webpackJsonp([9],[function(module,exports,__webpack_require__){(function(global){"use strict";module.exports=global.MK=__webpack_require__(136)}).call(exports,function(){return this}())},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),TextBox=_react2["default"].createClass({displayName:"TextBox",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return{placeholder:!this.props.value,focus:!1}},componentWillUpdate:function(nextProps){this.setState({placeholder:!nextProps.value})},getContent:function(){return _reactDom2["default"].findDOMNode(this.refs.input)},handleStopPop:function(e){e.stopPropagation()},handleMouseDown:function(e){e.preventDefault(),_reactDom2["default"].findDOMNode(this.refs.input).focus()},handleFocus:function(e){this.setState({focus:!0}),this.props.onFocus&&this.props.onFocus(e)},handleBlur:function(e){this.setState({focus:!1}),this.props.onBlur&&this.props.onBlur(e)},render:function(){var _props=this.props,className=_props.className,style=_props.style,themeColor=_props.themeColor,iconStyle=_props.iconStyle,icon=_props.icon,placeholder=_props.placeholder,component=_props.component,extProps=(_props.onFocus,_props.onBlur,_objectWithoutProperties(_props,["className","style","themeColor","iconStyle","icon","placeholder","component","onFocus","onBlur"])),isShownPlaceholder=this.state.placeholder,Component=component||"input",iconColor={};return this.state.focus&&(iconColor={color:themeColor}),className.indexOf("error")>-1&&(iconColor={color:"#DA2824"}),_react2["default"].createElement("div",{className:(0,_classnames2["default"])(className,{is_focus:this.state.focus,"has-icon":icon}),style:style},icon?_react2["default"].createElement("i",{key:"ctIcon",className:"iconfont fbi_icon",style:_.assign({},iconStyle,iconColor)},icon):null,isShownPlaceholder&&placeholder?_react2["default"].createElement("span",{className:"fbi_placeholder",style:{left:style.paddingLeft||0},onMouseDown:this.handleMouseDown},placeholder):null,_react2["default"].createElement(Component,_extends({className:"fbi_input aria-content",tabIndex:0},extProps,{ref:"input",style:{fontSize:style.fontSize,lineHeight:style.lineHeight},autoComplete:"off",spellCheck:!1,onMouseDown:extProps.onMouseDown,onKeyDown:this.handleStopPop,onFocus:this.handleFocus,onBlur:this.handleBlur})))}});exports["default"]=TextBox,module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formMetaUtil=__webpack_require__(57),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Input)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleWeChatScan:function(){var self=this;window.wx.scanQRCode({desc:"scanQRCode desc",needResult:1,success:function(res){res&&res.resultStr&&_formStore2["default"].dispatch({type:"setValue",id:self.props.data.id,value:res.resultStr})}})},handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputBlur",id:this.props.data.id,value:e.target.value})},renderTips:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle;if(1!==data.isWordLimit)return null;var content=null,_ariaContent=null,wrapperError=!1,isErrorTip=(valid||[]).indexOf("tip")>-1;return _lodash2["default"].isNumber(data.wordLimitFrom)&&_lodash2["default"].isNumber(data.wordLimitTo)?(content=[_react2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_tip_input",{error:isErrorTip}),key:"inputLength"},(fill||"").length),_react2["default"].createElement("span",{key:"tipContent"},"/"+data.wordLimitFrom+"~"+data.wordLimitTo)],_ariaContent=_config.lang.ariaInputWordRange({from:data.wordLimitFrom,to:data.wordLimitTo})):_lodash2["default"].isNumber(data.wordLimitFrom)?(wrapperError=!0,content=_config.lang.cInputWordLimitFormFunc({num:data.wordLimitFrom}),_ariaContent=_config.lang.ariaInputWordLimitFormFunc({from:data.wordLimitFrom})):_lodash2["default"].isNumber(data.wordLimitTo)&&(content=[_react2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_tip_input",{error:isErrorTip}),key:"inputLength"},(fill||"").length),_react2["default"].createElement("span",{key:"tipContent"},"/"+data.wordLimitTo)],_ariaContent=_config.lang.ariaInputWordLimitToFunc({to:data.wordLimitTo})),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),"aria-label":_ariaContent,style:tipsStyle,id:"tips"+data.id},content)},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,style=_props2.style,itemNum=_props2.itemNum,themeColor=_props2.themeColor,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,textAreaStyle=_formStyle2.textAreaStyle,inputWithIconStyle=_formStyle2.inputWithIconStyle,inputIconStyle=_formStyle2.inputIconStyle,Component="input",isMultiLine=0===+data.isOnlySingle;isMultiLine&&(Component="textarea");var FieldInfo=_formMetaUtil.FIELD_INFO_MAPPING[data.type],cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100));var _ariaLabelOrder=[];return _ariaLabelOrder=valid&&valid.length>0?["err"+data.id,"title"+data.id,"subtitle"+data.id,"tips"+data.id,"placehoder"+data.id]:["title"+data.id,"subtitle"+data.id,"tips"+data.id,"placehoder"+data.id],_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp",{isUseWeChatScan:data.isUseWeChatScan&&window.IN_WECHAT}),style:{width:cpWidthPre+"%"}},_react2["default"].createElement("span",{className:"aria-placeholder",id:"placehoder"+data.id,"aria-label":(isMultiLine?_config.lang.ariaMultiLine:"")+(data.placeholder||"")+"."}),_react2["default"].createElement(_FCTextBox2["default"],{component:Component,className:(0,_classnames2["default"])("fbc_input",{textarea:isMultiLine,error:valid&&valid.length>0}),tabIndex:1,"aria-labelledby":_ariaLabelOrder.join(" "),"aria-required":data.isRequired,ref:"input",type:"text",spellCheck:!1,autoComplete:"off",icon:"input"!==data.type&&FieldInfo?FieldInfo.icon:null,iconStyle:inputIconStyle,themeColor:style.themeColor,style:"input"!==data.type&&FieldInfo?inputWithIconStyle:isMultiLine?textAreaStyle:inputStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill||""}),data.isUseWeChatScan&&window.IN_WECHAT?_react2["default"].createElement("a",{className:"iconfont fbc_scanIcon",style:_lodash2["default"].assign(inputIconStyle,{color:themeColor||"#2D8FD9"}),onClick:this.handleWeChatScan},String.fromCharCode(58960)):null)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function markup_LINK(info){return _react2["default"].createElement("a",{className:"fbc_descriptionLink",href:(0,_tools.linkify)(info.data.url),tabIndex:1,target:"_blank",key:"linkDom"+info.key},info.content,_react2["default"].createElement("span",{className:"iconfont"},String.fromCharCode(59086)))}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_MGColor=__webpack_require__(50),_MGColor2=_interopRequireDefault(_MGColor),_MGString=__webpack_require__(29),_tools=(_interopRequireDefault(_MGString),__webpack_require__(33)),_formValid=__webpack_require__(43),_FormGeneratorUtil=__webpack_require__(56),_config=__webpack_require__(9),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_extensions=__webpack_require__(40),_extensions2=_interopRequireDefault(_extensions),_MGDraftRawConvert=__webpack_require__(37),gList=["",_FormGeneratorUtil.serialNumberGenerator.numberSimple,_FormGeneratorUtil.serialNumberGenerator.numberRightBrackets,_FormGeneratorUtil.serialNumberGenerator.numberAllBrackets,_FormGeneratorUtil.serialNumberGenerator.numberAllMiddleBrackets,_FormGeneratorUtil.serialNumberGenerator.numberWithBar,_FormGeneratorUtil.serialNumberGenerator.cnNumberSimple,_FormGeneratorUtil.serialNumberGenerator.cnNumberAllBrackets,_FormGeneratorUtil.serialNumberGenerator.romanNumberUpper,_FormGeneratorUtil.serialNumberGenerator.romanNumberLower,_FormGeneratorUtil.serialNumberGenerator.numberWithQ],textRender=(0,_MGDraftRawConvert.crateTextRender)({entity:{LINK:{component:markup_LINK}}});exports["default"]={getRawContent:function(info){return _lodash2["default"].isString(info)?info:_lodash2["default"].isArray(info)?info.join("\n"):void 0},renderRichContent:function(info,style){return style&&(_extensions2["default"].getExt("renderRichText")||(style=null)),textRender.render(info,style)},handleAddMobile:function(){_formStore2["default"].dispatch({type:"inputMultiAdd",id:this.props.data.id})},renderTitle:function(data,hasAddIcon){var required=null,_props=this.props,showQuestionNo=_props.showQuestionNo,num=_props.num,questionNoType=_props.questionNoType;data.isRequired&&(required=_react2["default"].createElement("span",{className:"fbc_required",tabIndex:-1,"aria-label":"("+_config.lang.ariaRequired+")"},"*"));var _add=null;return hasAddIcon&&(_add=_react2["default"].createElement("a",{className:"iconfont fbc_addIcon",tabIndex:1,role:"button",title:_config.lang.cMultiInputInsert,onClick:this.handleAddMobile},String.fromCharCode(58979))),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_title",{"has-addIcon":hasAddIcon}),style:this.formStyle().titleStyle,id:"title"+data.id},showQuestionNo&&num?gList[questionNoType](num):null,this.renderRichContent(data.title||"",data.title_style||null),required,hasAddIcon?String.fromCharCode(160):"",_add)},renderSubtitle:function(data,hasAddIcon){if(!data.subtitle||0===data.subtitle.length||1===data.subtitle.length&&!data.subtitle[0])return null;var _add=null;return hasAddIcon&&(_add=_react2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,onClick:this.handleAddMobile},String.fromCharCode(58979))),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_describe",{"has-addIcon":hasAddIcon}),style:this.formStyle().describeStyle,id:"subtitle"+data.id},this.renderRichContent(data.subtitle||"",data.subtitle_style||null),hasAddIcon?String.fromCharCode(160):"",_add)},renderError:function(valid){var data=this.props.data;if(!valid)return null;var _shownValid=_lodash2["default"].without(valid,"tip","tipHint");return 0===_shownValid.length?null:_react2["default"].createElement("p",{className:"fbc_errorTips",id:"err"+data.id},(0,_formValid.getErrorContent)(_shownValid[0],data.id))},formStyle:function(){var _props2=this.props,style=_props2.style,data=_props2.data,isMobile=_props2.isMobile,lineHeight=style.lineHeight/10,themeColor=style.themeColor,bodyStyle=style.bodyStyle||{},submitStyle=style.submitStyle||{},alignArray=["","left","center","right"],titleStyle={textAlign:alignArray[data.titleAlign],lineHeight:lineHeight+(isMobile?.2:0),fontSize:(bodyStyle.titleFontSize||16)+(isMobile?1:0),fontWeight:bodyStyle.titleFontWeight?"bold":"normal",color:bodyStyle.titleColor},describeStyle={textAlign:alignArray[data.subTitleAlign||data.picSubTitleAlign],lineHeight:lineHeight,fontSize:bodyStyle.describeFontSize,fontWeight:bodyStyle.describeFontWeight?"bold":"normal",color:bodyStyle.describeColor},tipsColor=_MGColor2["default"].convertToRGBObj.fromHex(bodyStyle.describeColor||"#666666"),tipsStyle={lineHeight:lineHeight,fontSize:(bodyStyle.describeFontSize||14)-2,color:"rgba("+[tipsColor.r,tipsColor.g,tipsColor.b,.7]+")"},textAreaStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize},inputStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+12),lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize},inputBtnStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,color:submitStyle.fontColor,backgroundColor:submitStyle.btnColor},inputUnitStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,color:bodyStyle.describeColor},inputWithIconStyle=_lodash2["default"].assign({},inputStyle,{paddingLeft:Math.max(14,bodyStyle.optionFontSize||14)*(16/14)+6}),iconColor=_MGColor2["default"].convertToRGBObj.fromHex(themeColor||"#2D8FD9"),inputIconStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+10)+"px",lineHeight:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+10)+"px",fontSize:Math.max(16,bodyStyle.optionFontSize||14),color:"rgba("+[iconColor.r,iconColor.g,iconColor.b,.6]+")"},commodityNameStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal",color:bodyStyle.optionColor},commodityDescribeStyle={fontSize:(bodyStyle.optionFontSize||14)-2,color:bodyStyle.describeColor||"#666666"},optionStyle={minHeight:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+10),lineHeight:lineHeight+(isMobile?.2:0),fontSize:(bodyStyle.optionFontSize||14)+(isMobile?1:0),fontWeight:bodyStyle.optionFontWeight?"bold":"normal",color:bodyStyle.optionColor},optionTipsStyle={fontSize:(bodyStyle.optionFontSize||14)-2,fontWeight:"normal",color:"rgba("+[tipsColor.r,tipsColor.g,tipsColor.b,.7]+")"},selectStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+12),lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal"},selectPlaceholderStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+12),lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal"},selectArrowStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal"},buttonStyle={fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,backgroundColor:submitStyle.btnColor},buttonDisabledStyle={fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal"};return isMobile&&(inputStyle.height+=6,inputWithIconStyle.height+=6,inputIconStyle.height=Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+15)+"px",inputIconStyle.lineHeight=Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+15)+"px",selectStyle.height+=6),{titleStyle:titleStyle,describeStyle:describeStyle,tipsStyle:tipsStyle,textAreaStyle:textAreaStyle,inputStyle:inputStyle,inputUnitStyle:inputUnitStyle,inputWithIconStyle:inputWithIconStyle,inputIconStyle:inputIconStyle,inputBtnStyle:inputBtnStyle,commodityNameStyle:commodityNameStyle,commodityDescribeStyle:commodityDescribeStyle,optionStyle:optionStyle,optionTipsStyle:optionTipsStyle,selectStyle:selectStyle,selectPlaceholderStyle:selectPlaceholderStyle,selectArrowStyle:selectArrowStyle,buttonStyle:buttonStyle,buttonDisabledStyle:buttonDisabledStyle}}},module.exports=exports["default"]},function(module,exports){"use strict";function number2CnNumberSimple(number){number=""+number;var _number_mapping=["〇","一","二","三","四","五","六","七","八","九"];return number.split("").map(function(v){return _number_mapping[v]}).join("")}function number2RomanNumber(number){for(var str="",symbol=["ↂ","Mↂ","ↁ","Mↁ","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],value=[1e4,9e3,5e3,4e3,1e3,900,500,400,100,90,50,40,10,9,5,4,1],i=0;0!=number;++i)for(;number>=value[i];)number-=value[i],str+=symbol[i];return str}function number2Alphabet(number){var _res="",_alpha=Math.floor(Math.round(10*number/27)/10),_remainder=number-26*_alpha;return _alpha>0&&(_res=String.fromCharCode(_alpha+64)),_remainder>0&&(_res+=String.fromCharCode(_remainder+64)),_res}Object.defineProperty(exports,"__esModule",{value:!0});exports.serialNumberGenerator={numberSimple:function(idx){return idx+". "},numberRightBrackets:function(idx){return idx+") "},numberAllBrackets:function(idx){return"("+idx+") "},numberAllMiddleBrackets:function(idx){return"["+idx+"] "},numberWithBar:function(idx){return"-"+idx+"- "},cnNumberSimple:function(idx){return number2CnNumberSimple(idx)+"、"},cnNumberAllBrackets:function(idx){return"（"+number2CnNumberSimple(idx)+"）"},romanNumberLower:function(idx){return number2RomanNumber(idx).toLowerCase()+". "},romanNumberUpper:function(idx){return number2RomanNumber(idx).toUpperCase()+". "},alphaNumberLower:function(idx){return number2Alphabet(idx).toLowerCase()+". "},alphaNumberUpper:function(idx){return number2Alphabet(idx).toUpperCase()+". "},numberWithQ:function(idx){return"Q"+idx+". "}}},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_jquery=__webpack_require__(22),_lodash=(_interopRequireDefault(_jquery),__webpack_require__(8)),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(59),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FormGeneratorUtil=__webpack_require__(56),_formValid=__webpack_require__(43),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Radio&Checkbox)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleARIA_stateChange)},componentDidUpdate:function(){var _this=this;this.refocus&&!function(){var _item=_this.refs["item"+_this.refocus];_this.refocus=null,_item&&(_item.blur(),window.setTimeout(function(){_item&&_item.focus()},10))}()},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleARIA_stateChange:function(data){this.ariaFocus&&"setSelector"===data.type&&(this.refocus=data.value),this.ariaFocus=!1},currentLayout:function(){var isMobile=this.props.isMobile,data=this.props.data,_optionsLayout=data.optionsLayout;return isMobile&&(_optionsLayout=Math.min(2,_optionsLayout||0),data.isAfterInput&&(_optionsLayout=0),data.isLimitOptions&&data.isShowOptionLimit&&data.optionsQuotaInfo&&(_optionsLayout=0)),_optionsLayout},isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},handleSelectOption:function(id){this.refocus=null;var data=this.props.data;_formStore2["default"].dispatch({type:"setSelector",id:data.id,value:id,isCheckbox:"checkbox"===data.type||data.isCheckbox})},handleARIA_SelectOption:function(id,e){13!==e.keyCode&&32!==e.keyCode||(this.ariaFocus=!0,this.handleSelectOption(id))},handleARIA_StopPop:function(e){e.stopPropagation()},handleOptionInputMouseDown:function(e){e.stopPropagation()},handleOptionInputClick:function(e){e.stopPropagation()},handleOptionInputChange:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelectorValue",id:data.id,optionId:id,value:e.target.value})},handleOptionInputBlur:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"blurSelectorInput",id:data.id,optionId:id,value:e.target.value})},renderOptionInput:function(sId,data,isError,isRequired){var _isMobile=this.props.isMobile,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,_input=_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input","fbc_optionInput",{error:isError}),type:"text",key:sId+"input",tabIndex:1,"aria-invalid":isError,"aria-describedby":["opt"+sId,"optionInfoAdd"+sId].join(" "),"aria-required":isRequired,style:inputStyle,defaultValue:data,onMouseDown:this.handleOptionInputMouseDown,onClick:this.handleOptionInputClick,onKeyDown:this.handleARIA_StopPop,onChange:this.handleOptionInputChange.bind(this,sId),onBlur:this.handleOptionInputBlur.bind(this,sId)}),_ariaOptionDes=_react2["default"].createElement("span",{className:"aria-optionInput-content-add","aria-label":_config.lang.ariaOptionContentAdd+(isRequired?"("+_config.lang.ariaRequired+")":""),id:"optionInfoAdd"+sId});return _isMobile?_react2["default"].createElement("div",{className:"fbc_optionInputWrapper",key:sId+"inputWrapper"},_ariaOptionDes,_input):[_ariaOptionDes,_input]},renderOptions:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,isMobile=_props.isMobile,mode=_props.mode,_formStyle2=this.formStyle(),optionStyle=_formStyle2.optionStyle,optionTipsStyle=_formStyle2.optionTipsStyle,options=data.options||[],_inputRequiredErr=[],_validInputRequiredErr=!1;valid&&valid.indexOf("inputRequired")>-1&&(_validInputRequiredErr=!0,_inputRequiredErr=(0,_formValid.getErrorInfo)("inputRequired",data.id));var isCheckbox="checkbox"===data.type||data.isCheckbox,CommonDom=isCheckbox?_svgBasicComponent.CommonCheckbox:_svgBasicComponent.CommonRadio,_opts=[],_temp=null,_num=0,_full=!1;isCheckbox&&1===data.isLimitChooseNum&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&fill&&fill.length>=data.chooseNumTo&&(_full=!0);for(var _optionsLayout=this.currentLayout(),i=0,len=options.length;i<len;i++)if(_temp=options[i],1!==mode||_temp.sId){var _isFill=this.isFill(fill,_temp.sId),_fillData=this.isFill(fill,_temp.sId,!0),_remainFull=!1,_limitInfo=null;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_quota=null;if(_quota=_lodash2["default"].isNumber(_quotaInfo[1])?_quotaInfo[1]:null,null!==_quota){var _remaining=_quota-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainFull=!0),data.isShowOptionLimit?_limitInfo=_react2["default"].createElement("span",{className:"fbc_optionTips",style:optionTipsStyle},_config.lang.cQuotaRemainingFunc({remaining:_remaining>0?_remaining:0})):_remainFull&&(_limitInfo=_react2["default"].createElement("span",{className:"fbc_optionTips",style:_lodash2["default"].assign({},optionTipsStyle,{color:"#ccc"})},_config.lang.cQuotaRemainingFull))}}_num++,_opts.push(_react2["default"].createElement("li",{key:"item"+i,className:(0,_classnames2["default"])("fbc_optionsLi","aria-content",{"has-input":data.isAfterInput&&_isFill,clearB:_num%_optionsLayout===1}),tabIndex:1,role:isCheckbox?"checkbox":"radio","aria-checked":_isFill,checked:_isFill,"aria-disabled":!_isFill&&(_full||_remainFull),"aria-label":_temp.value,ref:"item"+_temp.sId,id:"opt"+_temp.sId,onClick:!_full&&!_remainFull||_isFill?this.handleSelectOption.bind(this,_temp.sId):null,onKeyDown:!_full&&!_remainFull||_isFill?this.handleARIA_SelectOption.bind(this,_temp.sId):null},_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_optionVal",data.type,{checked:_isFill,disabled:!_isFill&&(_full||_remainFull),isFull:!_isFill&&_remainFull}),style:optionStyle},_react2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_isFill,"aria-checked":_isFill,"aria-disabled":!_isFill&&(_full||_remainFull),disabled:!_isFill&&(_full||_remainFull),style:{padding:1,paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?18:20))/2,0))}}),_react2["default"].createElement("span",{className:"fbc_optionLabel"},(data.isAutoNo?_optionNum(data.autoNo,_num):"")+_temp.value,_isFill&&data.isAfterInput&&data.afterInputIsRequired?_react2["default"].createElement("span",{className:"fbc_required",key:_temp.sId+"inputRequired","aria-label":_config.lang.ariaRequired},"*"):null),_limitInfo),data.isAfterInput&&_isFill?this.renderOptionInput(_temp.sId,_lodash2["default"].isObject(_fillData)?_fillData.value:"",_validInputRequiredErr&&_inputRequiredErr.indexOf(_temp.sId)>-1,data.afterInputIsRequired):null))}else console.error("component ID LOST ->."+_temp.id+" : "+_temp.value);if(1===data.isAddOtherOption){_num++;var _isFill2=this.isFill(fill,data.otherId),_fillData2=this.isFill(fill,data.otherId,!0),_limitInfo2=null,otherId=data.otherId,_ignore=!1,_remainFull2=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&otherId in data.optionsQuotaInfo){var _quotaInfo2=data.optionsQuotaInfo[otherId],_remaining2=_quotaInfo2[1]-_quotaInfo2[0];_remaining2<=0&&1===data.isHideFullOption&&(_ignore=!0),_remaining2<=0&&(_remainFull2=!0),data.isShowOptionLimit?_limitInfo2=_react2["default"].createElement("span",{className:"fbc_optionTips",style:optionTipsStyle},_config.lang.cQuotaRemainingFunc({remaining:_remaining2>0?_remaining2:0})):_remainFull2&&(_limitInfo2=_react2["default"].createElement("span",{className:"fbc_optionTips",style:_lodash2["default"].assign({},optionTipsStyle,{color:"#ccc"})},_config.lang.cQuotaRemainingFull))}_ignore||_opts.push(_react2["default"].createElement("li",{key:"other",className:(0,_classnames2["default"])("fbc_optionsLi","aria-content",{"has-input":_isFill2,clearB:_num%_optionsLayout===1}),tabIndex:1,role:isCheckbox?"checkbox":"radio","aria-checked":_isFill2,checked:_isFill2,"aria-disabled":!_isFill2&&(_full||_remainFull2),"aria-label":data.otherOptionTitle||_config.lang.cOptionOtherDefault,ref:"item"+otherId,id:"opt"+otherId,onClick:!_full&&!_remainFull2||_isFill2?this.handleSelectOption.bind(this,otherId):null,onKeyDown:!_full&&!_remainFull2||_isFill2?this.handleARIA_SelectOption.bind(this,otherId):null},_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_optionVal",data.type,{checked:_isFill2,disabled:!_isFill2&&(_full||_remainFull2),isFull:!_isFill2&&_remainFull2}),style:optionStyle},_react2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_isFill2,"aria-checked":_isFill2,"aria-disabled":!_isFill2&&(_full||_remainFull2),disabled:!_isFill2&&(_full||_remainFull2),style:{padding:1,paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}),_react2["default"].createElement("span",{className:"fbc_optionLabel"},(data.isAutoNo?_optionNum(data.autoNo,_num):"")+(data.otherOptionTitle||_config.lang.cOptionOtherDefault),_isFill2&&data.otherOptionIsRequired?_react2["default"].createElement("span",{className:"fbc_required",key:"otherRequired",tabIndex:-1,"aria-label":_config.lang.ariaRequired},"*"):null),_limitInfo2),_isFill2?this.renderOptionInput(otherId,_lodash2["default"].isObject(_fillData2)?_fillData2.value:"",valid&&valid.indexOf("otherInputRequired")>-1,data.otherOptionIsRequired):null))}return data.isLimitOptions&&data.optionsQuotaInfo&&0===_opts.length&&options.length>0&&_opts.push(_react2["default"].createElement("li",{className:"fbc_emptyTip"},_config.lang.cOptionNull)),_opts},renderTips:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),_formStyle3=this.formStyle(),tipsStyle=_formStyle3.tipsStyle;if("checkbox"!==data.type&&!data.isCheckbox)return null;if(1!==data.isLimitChooseNum)return null;var _tipContent="";return void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo?_tipContent+=data.chooseNumFrom==data.chooseNumTo?_config.lang.cOptionsLimitEqualFunc({num:data.chooseNumFrom}):_config.lang.cOptionsLimitRangeFunc({numForm:data.chooseNumFrom,numTo:data.chooseNumTo}):void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom?_tipContent+=_config.lang.cOptionsMoreThanNumFunc({numForm:data.chooseNumFrom}):void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&(_tipContent+=_config.lang.cOptionsLessThanNumFunc({numTo:data.chooseNumTo})),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:(valid||[]).indexOf("tip")>-1}),style:tipsStyle},_tipContent)},render:function(){var _props3=this.props,data=_props3.data,valid=_props3.valid,isMobile=_props3.isMobile,componentStyle=_props3.componentStyle,style=_props3.style,itemNum=_props3.itemNum,isCheckbox="checkbox"===data.type||data.isCheckbox,_optionsLayout=this.currentLayout(),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),
id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_content","aria-content",_optionsLayout?"layout-"+_optionsLayout:""),role:isCheckbox?"checkboxgroup":"radiogroup",tabIndex:1,"aria-labelledby":["title"+data.id,"subtitle"+data.id,"tips"+data.id,"err"+data.id].join(" ")},this.renderOptions(),_react2["default"].createElement("li",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_MGUtil=__webpack_require__(26),_MGUtil2=_interopRequireDefault(_MGUtil),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),CRadio=_react2["default"].createClass({displayName:"CRadio",mixins:[_reactAddonsPureRenderMixin2["default"]],render:function(){var _props=this.props,disabled=_props.disabled,selected=_props.selected,checked=_props.checked,className=_props.className,fallbackClassName=_props.fallbackClassName,style=_props.style,props=_objectWithoutProperties(_props,["disabled","selected","checked","className","fallbackClassName","style"]),isSelected=selected||checked;if(_MGUtil2["default"].browserCheck.msie&&parseInt(_MGUtil2["default"].browserCheck.version)<9)return _react2["default"].createElement("i",{className:(0,_classnames2["default"])(fallbackClassName,{selected:isSelected,disabled:disabled})}," ");var fillColor=disabled?"#F7F7F7":"#FFFFFF",strokeColor=disabled?"#DEDEDE":"currentColor";return isSelected&&(strokeColor=disabled?"#DEDEDE":"currentColor"),_react2["default"].createElement("svg",_extends({className:(0,_classnames2["default"])(className,{selected:isSelected})},props,{style:_.assign({},style,{pointerEvents:"visible"}),xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",preserveAspectRatio:"xMinYMin meet"}),_react2["default"].createElement("circle",{fill:fillColor,stroke:strokeColor,strokeWidth:2,cx:15,cy:15,r:14}),isSelected?_react2["default"].createElement("circle",{fill:strokeColor,cx:15,cy:15,r:7}):null)}}),CCheckbox=_react2["default"].createClass({displayName:"CCheckbox",mixins:[_reactAddonsPureRenderMixin2["default"]],render:function(){var _props2=this.props,disabled=_props2.disabled,selected=_props2.selected,checked=_props2.checked,className=_props2.className,fallbackClassName=_props2.fallbackClassName,style=_props2.style,props=_objectWithoutProperties(_props2,["disabled","selected","checked","className","fallbackClassName","style"]),isSelected=selected||checked;if(_MGUtil2["default"].browserCheck.msie&&parseInt(_MGUtil2["default"].browserCheck.version)<9)return _react2["default"].createElement("i",{className:(0,_classnames2["default"])(fallbackClassName,"checkbox",{selected:isSelected,disabled:disabled})}," ");var fillColor=disabled?"#F7F7F7":"#FFFFFF",strokeColor=disabled?"#DEDEDE":"currentColor";return isSelected&&(fillColor=disabled?"#DEDEDE":"currentColor",strokeColor=disabled?"#DEDEDE":"currentColor"),_react2["default"].createElement("svg",_extends({className:(0,_classnames2["default"])(className,{selected:isSelected})},props,{style:_.assign({},style,{pointerEvents:"visible"}),xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",preserveAspectRatio:"xMinYMin meet"}),_react2["default"].createElement("rect",{x:1,y:1,fill:fillColor,stroke:strokeColor,strokeWidth:2,width:28,height:28}),isSelected?_react2["default"].createElement("polygon",{fill:"#FFF",points:"12.08,22.77 25.51,8.58 22.42,5.34 11.97,16.15 7.71,11.67 4.61,14.91"}):null)}});exports["default"]={CommonRadio:CRadio,CommonCheckbox:CCheckbox},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_utils=(_interopRequireDefault(_jquery),__webpack_require__(30)),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(DropDown)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},componentDidMount:function(){},handleSelectOption:function(id,e){e.stopPropagation();var data=this.props.data;_formStore2["default"].dispatch({type:"setSelector",id:data.id,value:id,isCheckbox:"checkbox"===data.type}),this.refs.dropdown.doClose()},handleOptionInputMouseDown:function(e){e.stopPropagation()},handleOptionInputClick:function(e){e.stopPropagation()},handleDropDownMouseDown:function(id,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(id,e))},handleOptionInputChange:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelectorValue",id:data.id,optionId:id,value:e.target.value})},handleOptionInputBlur:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"blurSelectorInput",id:data.id,optionId:id,value:e.target.value})},renderOptions:function(){var _props=this.props,data=_props.data,fill=_props.fill,options=(_props.valid,data.options||[]),_opts=[],_temp=null;!data.isRequired&&data.defaultTips&&_opts.push(_react2["default"].createElement("li",{className:"fbc_selectLi",onMouseDown:this.handleDropDownMouseDown.bind(this,null),onClick:this.handleSelectOption.bind(this,null),key:"optplaceholder"},data.defaultTips));for(var i=0,len=options.length;i<len;i++){_temp=options[i];var _isFill=this.isFill(fill,_temp.sId),_limitInfo=null,_remainingFull=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainingFull=!0),data.isShowOptionLimit?_limitInfo=_react2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFunc({remaining:_remaining>0?_remaining:0})):_remainingFull&&(_limitInfo=_react2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFull))}_opts.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:_isFill,fbc_disabled:_remainingFull}),key:"opt"+_temp.sId,onMouseDown:_remainingFull?null:this.handleDropDownMouseDown.bind(this,_temp.sId),onClick:_remainingFull?null:this.handleSelectOption.bind(this,_temp.sId)},_temp.value,_limitInfo))}if(1===data.isAddOtherOption){var otherId=data.otherId,_isFill2=this.isFill(fill,otherId),_limitInfo2=null,_ignore=!1,_remainingFull2=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&otherId in data.optionsQuotaInfo){var _quotaInfo2=data.optionsQuotaInfo[otherId],_remaining2=_quotaInfo2[1]-_quotaInfo2[0];_remaining2<=0&&1===data.isHideFullOption&&(_ignore=!0),_remaining2<=0&&(_remainingFull2=!0),data.isShowOptionLimit?_limitInfo2=_react2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFunc({remaining:_remaining2})):_remainingFull2&&(_limitInfo2=_react2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFull))}_ignore||_opts.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi","is-other",{fbc_currentSelected:_isFill2,fbc_disabled:_remainingFull2}),onMouseDown:_remainingFull2?null:this.handleDropDownMouseDown.bind(this,otherId),onClick:_remainingFull2?null:this.handleSelectOption.bind(this,otherId),key:"opt"+otherId},data.otherOptionTitle||_config.lang.cOptionOtherDefault,_limitInfo2))}return _opts},renderTips:function(){return null},render:function(){var _this=this,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,style=_props2.style,itemNum=_props2.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,selectPlaceholderStyle=_formStyle.selectPlaceholderStyle,selectArrowStyle=_formStyle.selectArrowStyle,dropDownSelected=null,_isOtherSelected=!1;if(fill&&fill.length>0){var fillInfo=this.isFill(fill,data.otherId,!0);1===data.isAddOtherOption&&fillInfo!==!1?(dropDownSelected=data.otherOptionTitle||_config.lang.cOptionOtherDefault,_isOtherSelected=!0):_lodash2["default"].forEach(data.options,function(info){var isFill=_this.isFill(fill,info.sId);if(isFill)return dropDownSelected=info.value,!1})}var options=this.renderOptions(),_dropdown=(data.isLimitOptions&&data.optionsQuotaInfo&&(data.options||[]).length>0&&options.length===(!data.isRequired&&data.defaultTips)?1:0)?_react2["default"].createElement("div",{className:"fbc_emptyTip"},_config.lang.cOptionNull):_react2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select",{hasValue:fill&&fill.length>0,error:valid&&valid.indexOf("required")>-1}),display:dropDownSelected||data.defaultTips,ref:"dropdown",selectArrowStyle:selectArrowStyle,style:fill&&fill.length>0?selectStyle:selectPlaceholderStyle},options),cpWidthPre=10*(data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content fbc_widthCp",{"has-input":_isOtherSelected}),style:{width:cpWidthPre+"%"}},_dropdown,_isOtherSelected?[data.otherOptionIsRequired?_react2["default"].createElement("span",{className:"fbc_required",key:"otherRequired"},"*"):null,_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_input","fbc_selectInput",{error:valid&&valid.indexOf("otherInputRequired")>-1}),key:"otherInput",defaultValue:_lodash2["default"].isObject(fill[0])?fill[0].value:"",style:inputStyle,onChange:this.handleOptionInputChange.bind(this,data.otherId),onBlur:this.handleOptionInputBlur.bind(this,data.otherId)})]:null)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"FCDropDown",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return{isOpen:!1}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){"$$resize"===action.type&&this.doClose()},isOpen:function(){return this.state.isOpen},doClose:function(){this.refs.focusContent&&_reactDom2["default"].findDOMNode(this.refs.focusContent).blur()},handleMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault()},handleDropDownMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault(),e.stopPropagation()},handleToggleSelector:function(e){e.preventDefault(),e.stopPropagation();var focusContent=this.refs.focusContent,open=this.currentIsOpen;if(focusContent){var $focusContent=_reactDom2["default"].findDOMNode(focusContent);open?$focusContent.blur():$focusContent.focus()}},handleExpandDropDown:function(e){e.stopPropagation(),this.props.onExpand&&this.props.onExpand(),this.setState({isOpen:!0})},handleCondenseDropDown:function(e){e.stopPropagation(),this.setState({isOpen:!1})},render:function(){var _props=this.props,display=_props.display,imageUri=_props.imageUri,children=_props.children,selectArrowStyle=_props.selectArrowStyle,props=_objectWithoutProperties(_props,["display","imageUri","children","selectArrowStyle"]),open=this.state.isOpen;return _react2["default"].createElement("div",_extends({onClick:this.handleToggleSelector},props),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_selectValue",{hasImage:imageUri}),tabIndex:1,ref:"focusContent",style:imageUri?{backgroundImage:imageUri}:null,onMouseDown:this.handleDropDownMouseDown,onFocus:this.handleExpandDropDown,onBlur:this.handleCondenseDropDown},display),_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:selectArrowStyle,onMouseDown:this.handleMouseDown},String.fromCharCode(58983)),_react2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_selectList",{fbc_showList:open}),onMouseDown:this.handleDropDownMouseDown},children))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_mixins=(_interopRequireDefault(_jquery),__webpack_require__(30),__webpack_require__(55)),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(DropDownMobile)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},handleSelectOption:function(e){var data=this.props.data;return""+e.target.value=="null"?void _formStore2["default"].dispatch({type:"setSelector",id:data.id,value:null,isCheckbox:!1}):void _formStore2["default"].dispatch({type:"setSelector",id:data.id,value:+e.target.value,isCheckbox:!1})},handleOptionInputChange:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelectorValue",id:data.id,optionId:id,value:e.target.value})},handleOptionInputBlur:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"blurSelectorInput",id:data.id,optionId:id,value:e.target.value})},renderTips:function(){return null},renderOptions:function(){var _props=this.props,data=_props.data,options=(_props.fill,_props.valid,data.options||[]),_opts=[],_temp=null;data.isRequired||!data.defaultTips?_opts.push(_react2["default"].createElement("option",{key:"defaultDisabled",value:null,disabled:!0,selected:!0,hidden:!0,style:{display:"none"}},data.defaultTips||"")):_opts.push(_react2["default"].createElement("option",{key:"defaultTips",className:"fbc_selectLi",value:null},data.defaultTips));for(var i=0,len=options.length;i<len;i++){_temp=options[i];var _limitInfo=null,_remainingFull=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainingFull=!0),data.isShowOptionLimit?_limitInfo="    ("+_config.lang.cQuotaRemainingFunc({remaining:_remaining})+")":_remainingFull&&(_limitInfo="    ("+_config.lang.cQuotaRemainingFull+")")}_opts.push(_react2["default"].createElement("option",{key:"opt"+(_temp.sId||i),className:"fbc_selectLi",value:_temp.sId,disabled:_remainingFull},_temp.value+(_limitInfo||"")))}if(1===data.isAddOtherOption){var otherId=data.otherId,_limitInfo2=null,_ignore=!1,_remainingFull2=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&otherId in data.optionsQuotaInfo){var _quotaInfo2=data.optionsQuotaInfo[otherId],_remaining2=_quotaInfo2[1]-_quotaInfo2[0];_remaining2<=0&&1===data.isHideFullOption&&(_ignore=!0),_remaining2<=0&&(_remainingFull2=!0),data.isShowOptionLimit?_limitInfo2="    ("+_config.lang.cQuotaRemainingFunc({remaining:_remaining2})+")":_remainingFull2&&(_limitInfo2="    ("+_config.lang.cQuotaRemainingFull+")")}_ignore||_opts.push(_react2["default"].createElement("option",{key:"opt"+(otherId||"other"),className:"fbc_selectLi",value:otherId,disabled:_remainingFull2},(data.otherOptionTitle||_config.lang.cOptionOtherDefault)+(_limitInfo2||"")))}return _opts},render:function(){var _this=this,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,dropDownSelected=(_formStyle.selectPlaceholderStyle,null),_isOtherSelected=!1,options=this.renderOptions();if(fill&&fill.length>0){var fillInfo=this.isFill(fill,data.otherId,!0);1===data.isAddOtherOption&&fillInfo!==!1?(dropDownSelected=data.otherId,_isOtherSelected=!0):_lodash2["default"].forEach(data.options,function(info){var isFill=_this.isFill(fill,info.sId);if(isFill)return dropDownSelected=info.sId,!1})}var _dropdown=(data.isLimitOptions&&data.optionsQuotaInfo&&(data.options||[]).length>0&&options.length===(!data.isRequired&&data.defaultTips)?1:0)?_react2["default"].createElement("div",{className:"fbc_emptyTip"},_config.lang.cOptionNull):_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select",{hasValue:fill&&fill.length>0})},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_react2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect",{error:valid&&valid.indexOf("required")>-1}),style:selectStyle,value:dropDownSelected,onChange:this.handleSelectOption},options));return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content",{"has-input":_isOtherSelected})},_dropdown,_isOtherSelected?[_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_input","fbc_selectInput",{error:valid&&valid.indexOf("otherInputRequired")>-1}),key:"otherInput",defaultValue:_lodash2["default"].isObject(fill[0])?fill[0].value:"",style:inputStyle,onChange:this.handleOptionInputChange.bind(this,data.otherId),onBlur:this.handleOptionInputBlur.bind(this,data.otherId)})]:null))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_MGString=__webpack_require__(29),_MGString2=_interopRequireDefault(_MGString),_MultiLevelProcessor=__webpack_require__(64),_MultiLevelProcessor2=_interopRequireDefault(_MultiLevelProcessor),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(MultiLevel)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){function _fillingSelected(id){var info=multiOpts.getItem(id);info&&(_lvlSelected=[info].concat(_lvlSelected),info.pId&&_fillingSelected(info.pId))}function _setDefaultSelect(pId){var lvl=multiOpts.getChildren(pId);_lodash2["default"].forEach(lvl,function(info){if(info.defaultValue){var len=_lvlSelected.length,_currentDepth=len+multiOpts.getChildDepth(pId);return _lvlSelected.push(info),_currentDepth>len&&_setDefaultSelect(info.id),!1}})}this.depthInfo={};var data=this.props.data,fill=this.props.fill,_lvlSelected=[];this.multiLevelOptions=new _MultiLevelProcessor2["default"](data.options);var multiOpts=this.multiLevelOptions;if(fill&&fill[0]){var sId=fill[0];if(sId=_lodash2["default"].isObject(fill[0])&&fill[0].id?fill[0].id:fill[0],fill[0].current)_lvlSelected=fill[0].current;else{var fillInfo=_lodash2["default"].find(data.options,{sId:sId});fillInfo&&_fillingSelected(fillInfo.id)}}else _setDefaultSelect(null);return{currentSelected:_lvlSelected}},handleMouseDownOption:function(position,info,e){_utils2["default"].isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(position,info,e))},handleSelectOption:function(position,info){var newSelected=this.state.currentSelected.slice(0,position),data=this.props.data;info?newSelected[position]=info:info=newSelected[position-1]||{},!info||_lodash2["default"].isEmpty(info)||1!==data.isAllowPartEmpty&&newSelected.length+this.multiLevelOptions.getChildDepth(info.id)!==newSelected.length?_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:null,current:newSelected,isCheckbox:!1}):_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:newSelected[newSelected.length-1].sId,current:newSelected,isCheckbox:!1}),this.setState({currentSelected:newSelected})},handleChangeOptionContent:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setMultiLevelSelectorValue",id:data.id,optionId:id,current:this.state.currentSelected,value:e.target.value})},_getSetPlaceholderInfo:function(pid){var data=this.props.data,defaultTips=data.defaultTips||{},parent={};pid&&(parent=this.multiLevelOptions.getItem(pid));var defaultPlaceholder=2===parent.type?_config.lang.cFillingPlaceholder:_config.lang.cSelectorPlaceholder;return null===pid?defaultTips[-1]||defaultPlaceholder:defaultTips[pid]||defaultPlaceholder},renderDropDownBy:function(position,pid,sid){var _this=this,_props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,selectArrowStyle=_formStyle.selectArrowStyle,_options=[],_optionsData=this.multiLevelOptions.getChildren(pid),placeholder=this._getSetPlaceholderInfo(pid),_optionsWidth=0,_selectedContent="";if(!sid&&0===_optionsData.length){var parent=this.multiLevelOptions.getItem(pid);return parent&&2===parent.type?_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_mlItem","fbc_input","fbc_selectInput","fbc_other",{error:valid&&valid.indexOf("required")>-1&&(!fill[0]||!fill[0].value)}),value:fill[0]?fill[0].value:"",placeholder:placeholder,type:"text",key:"input"+parent.sId,style:inputStyle,onChange:this.handleChangeOptionContent.bind(this,parent.sId)}):null}if(1===_optionsData.length&&3===_optionsData[0].type)return _react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_mlItem","fbc_input","fbc_selectInput",{error:valid&&valid.indexOf("required")>-1&&(!fill[0]||!fill[0].value)}),value:fill[0]?fill[0].value:"",type:"text",key:"input"+_optionsData[0].sId,style:inputStyle,placeholder:_optionsData[0].content,onChange:this.handleChangeOptionContent.bind(this,_optionsData[0].sId)});_options.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:null===sid}),onMouseDown:this.handleMouseDownOption.bind(this,position,null),onClick:this.handleSelectOption.bind(this,position,null),key:"optPlaceholder"},placeholder));var _others=[];_lodash2["default"].forEach(_optionsData,function(info){data.widthInfo[info.id]>_optionsWidth&&(_optionsWidth=data.widthInfo[info.id]),info.id===sid&&(_selectedContent=info.content);var _target=_options;2===info.type&&(_target=_others),_target.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:info.id===sid}),onMouseDown:_this.handleMouseDownOption.bind(_this,position,info),onClick:_this.handleSelectOption.bind(_this,position,info),key:"opt"+info.id},info.content))}),_options=_options.concat(_others);var _w=Math.ceil(Math.max(79,_optionsWidth+37,_MGString2["default"].getWidth(placeholder,((selectStyle||{}).optionFontSize||14)+"px/1 "+_utils2["default"]._FONT)+37));return _react2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select fbc_mlItem",{hasValue:_selectedContent,error:valid&&valid.indexOf("required")>-1&&!_selectedContent}),key:"dp"+pid,selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({},selectStyle,{width:_w}),display:_selectedContent||this._getSetPlaceholderInfo(pid),ref:"dropdown"+pid},_options)},render:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),componentStyle=_props2.componentStyle,style=_props2.style,itemNum=_props2.itemNum,currentSelected=this.state.currentSelected,_formStyle2=this.formStyle(),selectStyle=_formStyle2.selectStyle,_dropList=[];if(_lodash2["default"].isEmpty(currentSelected))_dropList.push(this.renderDropDownBy(_dropList.length,null,null)),_dropList.push(_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select","fbc_mlItem",{error:valid&&valid.indexOf("required")>-1}),style:_lodash2["default"].assign({},selectStyle,{width:79}),key:"fakeSelect"},_react2["default"].createElement("p",{className:"fbc_selectValue"},_config.lang.cSelectorPlaceholder),_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:selectStyle.lineHeight}},String.fromCharCode(58983))));else for(var i=0,len=currentSelected.length;i<=len;i++){var _current=currentSelected[i];if(0===i)_dropList.push(this.renderDropDownBy(i,null,_current?_current.id:void 0));else{var _prev=currentSelected[i-1];_dropList.push(this.renderDropDownBy(i,_prev?_prev.id:void 0,_current?_current.id:void 0))}}var cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:"fbc_mlContent"},_dropList,_react2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),MultiLevelProcessor=function(){
function MultiLevelProcessor(options){var _this=this;return _classCallCheck(this,MultiLevelProcessor),this.MAX_DEPTH=4,this.options=options,this.pCMapping={},this.c_depth={},this.depth={},this.totalDepth=null,_lodash2["default"].forEach(options,function(info){_this.pCMapping[info.pId]||(_this.pCMapping[info.pId]=[]),_this.pCMapping[info.pId].push(info)}),this}return _createClass(MultiLevelProcessor,[{key:"getItem",value:function(info){return _lodash2["default"].isPlainObject(info)||(info={id:info}),_lodash2["default"].find(this.options,info)}},{key:"getChildren",value:function(id){return this.pCMapping[id]||[]}},{key:"getDepth",value:function(){if(this.totalDepth)return this.totalDepth;var tI=0,optLen=this.options.length,depth=0;for(tI;tI<optLen;tI++){var currentDepth=this.getCurrentDepth(this.options[tI].id);if(currentDepth>depth&&(depth=currentDepth),depth===this.MAX_DEPTH)break}return this.totalDepth=depth,depth}},{key:"getChildDepth",value:function(id){var _this2=this;if(void 0!==this.c_depth[id])return this.c_depth[id];for(var opts=this.getChildren(id),depth=0,_c=opts,_loop=function(){var _tempC=[];_lodash2["default"].forEach(_c,function(opt){var children=_this2.getChildren(opt.id);children.length>0&&(_tempC=_tempC.concat(children))}),_c=_tempC,depth++};_c.length>0;)_loop();return this.c_depth[id]=depth,depth}},{key:"getCurrentDepth",value:function(id){if(void 0!==this.depth[id])return this.depth[id];for(var p_option=_lodash2["default"].find(this.options,{id:id}),currentDepth=1;p_option&&p_option.pId;)currentDepth++,p_option=_lodash2["default"].find(this.options,{id:p_option.pId});return this.depth[id]=currentDepth,currentDepth}}]),MultiLevelProcessor}();exports["default"]=MultiLevelProcessor,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_MultiLevelProcessor=__webpack_require__(64),_MultiLevelProcessor2=_interopRequireDefault(_MultiLevelProcessor),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(MultiLevelMobile)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){function _fillingSelected(id){var info=multiOpts.getItem(id);info&&(_lvlSelected=[info].concat(_lvlSelected),info.pId&&_fillingSelected(info.pId))}function _setDefaultSelect(pId){var lvl=multiOpts.getChildren(pId);_lodash2["default"].forEach(lvl,function(info){if(info.defaultValue){var len=_lvlSelected.length,_currentDepth=len+multiOpts.getChildDepth(pId);return _lvlSelected.push(info),_currentDepth>len&&_setDefaultSelect(info.id),!1}})}this.depthInfo={};var data=this.props.data,fill=this.props.fill,_lvlSelected=[];this.multiLevelOptions=new _MultiLevelProcessor2["default"](data.options);var multiOpts=this.multiLevelOptions;if(fill&&fill[0]){var sId=fill[0];if(sId=_lodash2["default"].isObject(fill[0])&&fill[0].id?fill[0].id:fill[0],fill[0].current)_lvlSelected=fill[0].current;else{var fillInfo=_lodash2["default"].find(data.options,{sId:sId});fillInfo&&_fillingSelected(fillInfo.id)}}else _setDefaultSelect(null);return{currentSelected:_lvlSelected}},handleSelectOption:function(position,e){var newSelected=this.state.currentSelected.slice(0,position),data=this.props.data,_currentId=+e.target.value,_info=null;0!==_currentId?(_info=this.multiLevelOptions.getItem(_currentId),newSelected[position]=_info):(_info=newSelected[position-1],_currentId=_info?_info.id:null),1!==data.isAllowPartEmpty&&newSelected.length+this.multiLevelOptions.getChildDepth(_currentId)!==newSelected.length||!_info||_lodash2["default"].isEmpty(_info)?_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:null,current:newSelected,isCheckbox:!1}):_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:newSelected[newSelected.length-1].sId,current:newSelected,isCheckbox:!1}),this.setState({currentSelected:newSelected})},handleChangeOptionContent:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setMultiLevelSelectorValue",id:data.id,optionId:id,current:this.state.currentSelected,value:e.target.value})},_getSetPlaceholderInfo:function(pid){var data=this.props.data,defaultTips=data.defaultTips||{},parent={};pid&&(parent=this.multiLevelOptions.getItem(pid));var defaultPlaceholder=2===parent.type?_config.lang.cFillingPlaceholder:_config.lang.cSelectorPlaceholder;return null===pid?defaultTips[-1]||defaultPlaceholder:defaultTips[pid]||defaultPlaceholder},renderDropDownBy:function(position,pid,sid){var _props=this.props,fill=(_props.data,_props.fill),_formStyle=(_props.valid,this.formStyle()),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,_options=[],_optionsData=this.multiLevelOptions.getChildren(pid),_selectedContent="";if(!sid&&0===_optionsData.length){var parent=this.multiLevelOptions.getItem(pid);return parent&&2===parent.type?_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_mlItem fbc_selectInput fbc_input fbc_other",value:fill[0]?fill[0].value:"",style:inputStyle,type:"text",key:"input"+parent.sId,placeholder:this._getSetPlaceholderInfo(pid),onChange:this.handleChangeOptionContent.bind(this,parent.sId)}):null}if(1===_optionsData.length&&3===_optionsData[0].type)return _react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_mlItem fbc_selectInput fbc_input",value:fill[0]?fill[0].value:"",style:inputStyle,type:"text",key:"input"+_optionsData[0].sId,placeholder:_optionsData[0].content,onChange:this.handleChangeOptionContent.bind(this,_optionsData[0].sId)});_options.push(_react2["default"].createElement("option",{key:"optplaceholder",value:0},this._getSetPlaceholderInfo(pid)));var _others=[];return _lodash2["default"].forEach(_optionsData,function(info){info.id===sid&&(_selectedContent=info.content);var _target=_options;2===info.type&&(_target=_others),_target.push(_react2["default"].createElement("option",{key:"opt"+info.id,value:info.id},info.content))}),_options=_options.concat(_others),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select fbc_mlItem",{hasValue:_selectedContent}),key:"dp"+pid,style:_lodash2["default"].assign({},selectStyle,{width:"100%"})},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_react2["default"].createElement("select",{className:"fbc_innerSelect",value:sid,ref:"dropdown"+pid,style:selectStyle,onChange:this.handleSelectOption.bind(this,position)},_options))},render:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),componentStyle=_props2.componentStyle,currentSelected=this.state.currentSelected,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,selectStyle=_formStyle2.selectStyle,_dropList=[];if(_MGDebugger2["default"].log(currentSelected),_lodash2["default"].isEmpty(currentSelected))_dropList.push(this.renderDropDownBy(_dropList.length,null,null)),_dropList.push(_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select fbc_mlItem"),key:"fakeSelect",style:_lodash2["default"].assign({},selectStyle,{width:"100%"})},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_react2["default"].createElement("p",{className:"fbc_selectValue",style:{lineHeight:2.6}},_config.lang.cSelectorPlaceholder),_react2["default"].createElement("span",{className:"fbc_selectArrow"})));else for(var i=0,len=currentSelected.length;i<=len;i++){var _current=currentSelected[i];if(0===i)_dropList.push(this.renderDropDownBy(i,null,_current?_current.id:void 0));else{var _prev=currentSelected[i-1];_dropList.push(this.renderDropDownBy(i,_prev?_prev.id:void 0,_current?_current.id:void 0))}}return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_mlContent fbc_content"},_dropList,_react2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_MGString=__webpack_require__(29),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_utils=__webpack_require__(30),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Number)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"numberBlur",id:this.props.data.id,value:e.target.value})},renderTips:function(){var _props=this.props,data=_props.data,valid=(_props.fill,_props.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,content=null,wrapperError=!0,isErrorTip=(valid||[]).indexOf("tip")>-1;return data.isNumRange&&(_lodash2["default"].isNumber(data.numRangeFrom)&&_lodash2["default"].isNumber(data.numRangeTo)?content=_config.lang.cNumberValueRangeHintFunc({numRangeFrom:data.numRangeFrom,numRangeTo:data.numRangeTo}):_lodash2["default"].isNumber(data.numRangeFrom)?content=_config.lang.cNumberValueMoreThanValueFunc({numRangeFrom:data.numRangeFrom}):_lodash2["default"].isNumber(data.numRangeTo)&&(content=_config.lang.cNumberValueLessThanValueFunc({numRangeTo:data.numRangeTo}))),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},content)},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,fw=_props2.fw,itemNum=_props2.itemNum,style=_props2.style,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputUnitStyle=_formStyle2.inputUnitStyle,cpWidthPre=10*(isMobile?10:data.cpWidth||8),unitWidth=null;data.unit&&(unitWidth=Math.min((0,_MGString.getWidth)(data.unit,inputUnitStyle.fontSize+"px/1 "+_utils._FONT),((fw/(itemNum||1)-60)*(cpWidthPre/10)-(isMobile?10:25))/50));var cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,style:_lodash2["default"].assign({},inputStyle,{paddingRight:unitWidth?unitWidth+8:null}),onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:""+(_lodash2["default"].isNumber(fill)||fill?fill:"")}),data.unit?_react2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_unit"),style:inputUnitStyle},data.unit):null)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function beautyValue(v){if(v){var REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)/g,REG_DAY=/^--(\d{1,2}?)/g,REG_MONTH=/^-(\d{1,2}?)-/g,REG_YEAR=/^(\d{4}?)--/g;if(v.match(REG_YEAR_MONTH))return v.replace(/-$/g,"");if(v.match(REG_MONTH_DAY))return v.replace(/^-/g,"");if(v.match(REG_YEAR))return v.replace("--","");if(v.match(REG_MONTH))return _config.lang.gMonth[+v.replace(/-/g,"")-1];if(v.match(REG_DAY))return v.replace("--","")}return v}function _simpleJudgeDateType(dateInfo,isEuro){var y=void 0,m=void 0,d=void 0;if(isEuro){if(+dateInfo[0]>0&&+dateInfo[0]<=12){var _dateInfo=_slicedToArray(dateInfo,3);m=_dateInfo[0],d=_dateInfo[1],y=_dateInfo[2]}}else if(3===dateInfo.length){var _dateInfo2=_slicedToArray(dateInfo,3);y=_dateInfo2[0],m=_dateInfo2[1],d=_dateInfo2[2]}else if(1===dateInfo.length)if(_config.lang.gMonth.indexOf(dateInfo[0])>-1)m=_config.lang.gMonth.indexOf(dateInfo[0])+1;else if((""+dateInfo[0]).length>2)y=dateInfo[0];else{var _dateInfo3=_slicedToArray(dateInfo,1);d=_dateInfo3[0]}else if(4===dateInfo[0].length){var _dateInfo4=_slicedToArray(dateInfo,2);y=_dateInfo4[0],m=_dateInfo4[1]}else if(+dateInfo[0]>12){var _ref=[(dateInfo[0]<30?"20":"19")+dateInfo[0],dateInfo[1]];y=_ref[0],m=_ref[1]}else if(_config.lang.gMonth.indexOf(dateInfo[0])>-1)m=_config.lang.gMonth.indexOf(dateInfo[0])+1,d=dateInfo[1];else{var _dateInfo5=_slicedToArray(dateInfo,2);m=_dateInfo5[0],d=_dateInfo5[1]}return[y,m,d]}function convertBeautyValue(v){var timePrecision=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,dateType=arguments[2],_res=null;if(v){var _isProcessed=!1,_hasTime=!1;if(v.match(/[:]/))if(_hasTime=!0,v.match(/[\s]/)){var _v$split=v.split(/[\s]/),_v$split2=_slicedToArray(_v$split,2),_date=_v$split2[0],_time=_v$split2[1],_splitDate=_date.split(/[\-\_\/]/g);if(_splitDate.length<3){_isProcessed=!0;var type=_simpleJudgeDateType(_splitDate,_date.match(/[\/]/)),_resDate=(type[0]||"")+"-"+(type[1]||"")+"-"+(type[2]||""),_resTime=_time.split(":");_resTime=_resTime.length<3?_resTime.concat("00","00").slice(0,timePrecision).concat("00","00").slice(0,3).join(":"):_resTime.join(":"),"dateTime_time"===dateType?_res=_resTime:"dateTime_date"===dateType?_res=_resDate:"dateTime_both"===dateType&&(_res=_resDate+" "+_resTime)}}else"dateTime_time"===dateType?_res=_lodash2["default"].trim(v):"dateTime_both"===dateType&&(_res=(0,_MGMoment2["default"])().getFullDate()+" "+_lodash2["default"].trim(v));else{var _splitDate2=v.split(/[\-\_\/]/g);if(_splitDate2.length<3){_isProcessed=!0;var _type=_simpleJudgeDateType(_splitDate2,v.match(/[\/]/));"dateTime_date"===dateType?_res=(_type[0]||"")+"-"+(_type[1]||"")+"-"+(_type[2]||""):"dateTime_both"===dateType&&(_res=(_type[0]||"")+"-"+(_type[1]||"")+"-"+(_type[2]||"")+" "+(0,_MGMoment2["default"])().getTime())}}if(!_isProcessed){var _date2=(0,_MGMoment2["default"])(v);if(_hasTime){var _resTime2=_date2.getTime().split(":").slice(0,timePrecision);"dateTime_time"===dateType?_res=_resTime2.concat("00","00").slice(0,3).join(":"):"dateTime_date"===dateType?_res=_date2.getFullDate():"dateTime_both"===dateType&&(_res=_date2.getFullDate()+" "+_resTime2.concat("00","00").slice(0,3).join(":"))}else"dateTime_date"===dateType?_res=_date2.getFullDate():"dateTime_both"===dateType&&(_res=_date2.getFullDate()+" "+(0,_MGMoment2["default"])().getTime())}}return _res}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_config=__webpack_require__(9),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_MGMoment=__webpack_require__(34),_MGMoment2=_interopRequireDefault(_MGMoment),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCCalendar=__webpack_require__(68),_FCCalendar2=_interopRequireDefault(_FCCalendar),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),Calendar=(0,_FCCalendar2["default"])(_config.lang),_typeMapping={dateTime_date:1,dateTime_time:4,dateTime_both:5},_num=0;exports["default"]=_react2["default"].createClass({displayName:"Component(DateTime)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return _num++,this.num=_num,{isOpen:!1,inputValue:beautyValue(this.props.fill)}},componentWillUpdate:function(nextProps,nextState){beautyValue(nextProps.fill)===this.state.inputValue||this.inEdit||this.setState({inputValue:beautyValue(nextProps.fill)})},componentDidMount:function(){this.$dom=(0,_jquery2["default"])(_reactDom2["default"].findDOMNode(this));var key=".calendar"+this.num;this.$dom.on("click"+key,this.handleKeepOpenCalendar),(0,_jquery2["default"])(document).on("click"+key,this.handleCloseCalendar)},componentWillUnmount:function(){this.$dom.off(".calendar"+this.num),(0,_jquery2["default"])(document).off(".calendar"+this.num)},handleCalendarSelect:function(e,date){4!==this.caType&&5!==this.caType&&(this._saveCurrentData(date),this.setState({isOpen:!1}))},handleStopPop:function(e){e.stopPropagation(),e.preventDefault()},handleCalendarConfirm:function(){var calendar=this.refs.calendar;this._saveCurrentData(calendar.getFormatDate(calendar.getCurrentSelected())),this.calendarMouseDown=!1,this.setState({isOpen:!1})},handleCalendarCancel:function(){this.calendarMouseDown=!1,this.setState({isOpen:!1})},handleInputClick:function(e){this.calendarMouseDown=!1,this.setState({isOpen:!0})},handleInputFocus:function(e){this.calendarMouseDown=!1,this.setState({isOpen:!0})},handleInputChange:function(e){this.inEdit=!0,this.setState({inputValue:e.target.value})},handleInputBlur:function(e){this.inEdit=!1;var _props=this.props,isBirthDate=_props.isBirthDate,data=_props.data,dateTimeType=data.isCustomField?data.cfDateTimeType:data.type;this._saveCurrentData(convertBeautyValue(e.target.value,data.timePrecision,isBirthDate?"dateTime_date":dateTimeType)),this.calendarMouseDown||this.setState({isOpen:!1})},handleMouseDown:function(){this.calendarMouseDown=!0},handleKeepOpenCalendar:function(e){this.inCalendar=!0},handleCloseCalendar:function(e){return this.inCalendar?void(this.inCalendar=!1):(this.calendarMouseDown=!1,void this.setState({isOpen:!1}))},_saveCurrentData:function(dateStr){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:dateStr})},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isBirthDate=_props2.isBirthDate,isMobile=_props2.isMobile,style=_props2.style,itemNum=_props2.itemNum,id=data.id,dateFormat=data.dateFormat,formatType=data.formatType,timePrecision=data.timePrecision,isLimitDayInterval=data.isLimitDayInterval,dayIntervalFrom=data.dayIntervalFrom,dayIntervalTo=data.dayIntervalTo,isLimitDays=data.isLimitDays,limitDays=data.limitDays,_formStyle=this.formStyle(),inputIconStyle=(_formStyle.inputStyle,_formStyle.inputIconStyle),inputWithIconStyle=_formStyle.inputWithIconStyle,dateTimeType=data.isCustomField?data.cfDateTimeType:data.type,caType=_typeMapping[dateTimeType]||1;isBirthDate&&(caType=1),this.caType=caType;var _disableDate=null;if(isLimitDays&&!_lodash2["default"].isEmpty(limitDays)){_disableDate=[];for(var i=0;i<7;i++)limitDays.indexOf(i+1)===-1&&_disableDate.push("W"+i)}var _calendarProps={className:(0,_classnames2["default"])("fbc_dtDropWrapper",{fbc_dtShowWrapper:this.state.isOpen}),ref:"calendar",type:caType,formatType:formatType,timeFormatType:[3,2,1][timePrecision-1]||1,formatList:_lodash2["default"].map(dateFormat||(isBirthDate?[1,3]:[1]),function(v){return v-1}),range:isLimitDayInterval?[dayIntervalFrom||-1,dayIntervalTo||-1]:!!isBirthDate&&[-1,!0],disabledDate:_disableDate,defaultValue:fill,triggerChange:1===caType,onChange:this.handleCalendarSelect,onMouseDown:this.handleMouseDown};4!==caType&&5!==caType||(_calendarProps.extOpeartion=_react2["default"].createElement("div",{className:"calendar_operate"},_react2["default"].createElement("a",{className:"fbc_button calendar_confirm",onMouseDown:this.handleStopPop,onClick:this.handleCalendarConfirm},_config.lang.gBtnConfirm),_react2["default"].createElement("a",{className:"fbc_btnPrimitive calendar_cancel",onMouseDown:this.handleStopPop,onClick:this.handleCalendarCancel},_config.lang.gBtnCancel)));var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",dateTimeType),id:id,style:componentStyle,ref:"cdDateTime"},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_react2["default"].createElement("div",{className:"fbc_datetime",ref:"drop",name:"input_calendar_dropdown"},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",ref:"input",type:"text",spellCheck:!1,className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),icon:"birthDate"===dateTimeType?String.fromCharCode(59081):"dateTime_time"===dateTimeType?String.fromCharCode(59160):String.fromCharCode(59141),themeColor:style.themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,value:this.state.inputValue,onClick:this.handleInputClick,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onBlur:this.handleInputBlur}),_react2["default"].createElement(Calendar,_calendarProps)))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function valueFormat(v){var _v$split=v.split(" "),_v$split2=_slicedToArray(_v$split,2),_v$split2$=_v$split2[0],date=void 0===_v$split2$?"":_v$split2$,_v$split2$2=_v$split2[1],time=void 0===_v$split2$2?"":_v$split2$2,REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-$/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)$/g,REG_DAY=/^--(\d{1,2}?)$/g,REG_MONTH=/^-(\d{1,2}?)-$/g,REG_YEAR=/^(\d{4}?)--$/g;return date.match(REG_YEAR_MONTH)?{type:1,data:_lodash2["default"].trim(date+"1 "+time)}:date.match(REG_MONTH_DAY)?{type:2,data:_lodash2["default"].trim("2000"+date+" "+time)}:date.match(REG_YEAR)?{type:3,data:_lodash2["default"].trim(date.replace("--","")+"-1-1 "+time)}:date.match(REG_MONTH)?{type:4,data:_lodash2["default"].trim("2000"+date+"1 "+time)}:date.match(REG_DAY)?{type:5,data:_lodash2["default"].trim("2000-1-"+date.replace("--","")+" "+time)}:{type:0,data:_lodash2["default"].trim(date+" "+time)}}function dateRange(type,range){var _resRange={start:null,end:null};return!range||!_lodash2["default"].isArray(range)||_lodash2["default"].isArray(range)&&2!==range.length?_resRange:(4===type?(range[0]!==-1&&(range[0]===!0?_resRange.start=[0,0,0]:_resRange.start=_lodash2["default"].map(range[0].split(":"),function(v){return+v}).concat([0,0,0]).slice(0,3)),range[1]!==-1&&(range[1]===!0?_resRange.end=[23,59,59]:_resRange.end=_lodash2["default"].map(range[1].split(":"),function(v){return+v}).concat([0,0,0]).slice(0,3))):(range[0]!==-1&&(range[0]===!0?_resRange.start=(0,_MGMoment2["default"])().startOf("date"):_resRange.start=(0,_MGMoment2["default"])(range[0])),range[1]!==-1&&(range[1]===!0?_resRange.end=(0,_MGMoment2["default"])().endOf("date"):_resRange.end=(0,_MGMoment2["default"])(range[1]))),_resRange)}function checkDateValid(date,type,formatType,startOf,endOf){var _resValid=!0,_newDate=date.clone();if(startOf||endOf)if(4===type){var sNum=void 0,eNum=void 0;startOf&&(sNum=1e4*startOf[0]+100*startOf[1]+startOf[2]),endOf&&(eNum=1e4*endOf[0]+100*endOf[1]+endOf[2]);var currentTime=_lodash2["default"].map(date.getTime().split(":"),function(v){return+v||0}),cNum=1e4*currentTime[0]+100*currentTime[1]+currentTime[2];sNum&&cNum<sNum&&(_newDate.hours(startOf[0]),_newDate.minutes(startOf[1]),_newDate.seconds(startOf[2]+1)),eNum&&cNum>eNum&&(_newDate.hours(endOf[0]),_newDate.minutes(endOf[1]),_newDate.seconds(endOf[2]+1))}else{var _start=startOf?startOf.clone():null,_end=endOf?endOf.clone():null;1!==type&&5!==type||(2===formatType?(_start&&_start.year(1999),_end&&_end.year(2001)):1===formatType&&(_start&&_start.date(1).startOf("date"),_end&&_end.date(1).endOf("date"))),_start&&(_resValid=_resValid&&_newDate.time()>=_start.time(),_resValid||(_newDate=_start.clone().add(1,"s"),0!==formatType&&(_resValid=!0))),_end&&(_resValid=_resValid&&_newDate.time()<=_end.time(),_resValid||(_newDate=_end.clone().add(-1,"s"),0!==formatType&&(_resValid=!0)))}return{date:_newDate,valid:_resValid}}function calendar(){var SwitchLabel=_react2["default"].createClass({displayName:"SwitchLabel",mixins:[_reactAddonsPureRenderMixin2["default"]],getDefaultProps:function(){return{hasPrev:!0,hasNext:!0}},handleMouseDown:function(e){e.preventDefault()},render:function(){var props=this.props,_className={calendar_hTitle:!0,canSwitch:props.hasNext||props.hasPrev},_prevInfo={className:"iconfont calendar_hDecrease"},_nextInfo={className:"iconfont calendar_hIncrease"},_labelInfo={className:(0,_classnames2["default"])({hasTopLayer:props.onClick,calendar_CurrentVal:!0})};return props.hasNext&&(_nextInfo.onMouseDown=this.handleMouseDown,_nextInfo.onClick=props.onNextClick),props.hasPrev&&(_prevInfo.onMouseDown=this.handleMouseDown,_prevInfo.onClick=props.onPrevClick),props.onClick&&(_labelInfo.onMouseDown=this.handleMouseDown,_labelInfo.onClick=props.onClick),_react2["default"].createElement("div",{className:(0,_classnames2["default"])(_className,props.className)},_react2["default"].createElement("a",_prevInfo,String.fromCharCode(58989)),_react2["default"].createElement("span",_labelInfo,props.label),_react2["default"].createElement("a",_nextInfo,String.fromCharCode(58990)))}}),TypeTitle=_react2["default"].createClass({displayName:"TypeTitle",mixins:[_reactAddonsPureRenderMixin2["default"]],getDefaultProps:function(){return{formatType:0}},handleMouseDown:function(e){e.preventDefault()},render:function(){var props=this.props,_expandArrow=null,_labelProps={className:"calendar_sTitle"};return props.onClick&&(_expandArrow=_react2["default"].createElement("span",{className:"iconfont calendar_sArrow"},String.fromCharCode(58983)),_labelProps.onClick=props.onClick,_labelProps.onMouseDown=this.handleMouseDown),_react2["default"].createElement("div",{className:"calendar_switcher",key:"format"},_react2["default"].createElement("p",_labelProps,_react2["default"].createElement("span",{className:"calendar_sType"},dateTypeList[props.formatType]),_expandArrow))}}),FillingTypeSelector=_react2["default"].createClass({displayName:"FillingTypeSelector",mixins:[_reactAddonsPureRenderMixin2["default"]],handleMouseDown:function(e){e.preventDefault()},handleChangeFormat:function(formatType){this.props.onChange&&this.props.onChange("type",formatType)},renderItems:function(){var _this=this,_items=[],_props=this.props,formatList=_props.formatList,formatType=_props.formatType,_now=(0,_MGMoment2["default"])(),_ep={0:_now.getFullDate(),1:_now.getYearMonth(),2:_now.getMonthDay(),3:_now.year(),4:$lang.gMonth[_now.month()],5:_now.date()};return _lodash2["default"].forEach(dateTypeList,function(type,key){if((formatList||[]).indexOf(+key)===-1)return!0;var _itemProps={key:"typeItem"+key,className:(0,_classnames2["default"])({calendar_typeItem:!0,selected:formatType===+key}),onMouseDown:_this.handleMouseDown,onClick:_this.handleChangeFormat.bind(_this,+key)};_items.push(_react2["default"].createElement("li",_itemProps,_react2["default"].createElement("p",{className:"calendar_typeTitle"},type),_react2["default"].createElement("p",{className:"calendar_typeExample"},_ep[key])))}),_items},render:function(){return _react2["default"].createElement("div",{className:"calendar_body"},_react2["default"].createElement("ul",{className:"calendar_typeList",key:"formatList"},this.renderItems()))}}),YearSelector=_react2["default"].createClass({displayName:"YearSelector",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return this.animPrev=!1,this.animNext=!1,{decadeYear:this.props.date.decade()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({decadeYear:nextProps.date.decade()})},handleDecadePrev:function(){this.state.decadeYear>G_LIMIT_MIN_DATE.year()&&(this.setState({decadeYear:this.state.decadeYear-10}),this.animPrev=!0,this.animNext=!1)},handleDecadeNext:function(){this.setState({decadeYear:this.state.decadeYear+10}),this.animPrev=!1,this.animNext=!0},handleMouseDown:function(e){e.preventDefault()},handleChangeYear:function(year){var props=this.props;props.onChange&&props.onChange("year",year),props.isLeaf||props.onChangePanel&&props.onChangePanel("month")},renderYears:function(){for(var _years=[],decadeYear=this.state.decadeYear,_props2=this.props,selected=_props2.selected,startOf=_props2.startOf,endOf=_props2.endOf,_dFrom=decadeYear-1,_dTo=decadeYear+11,i=_dFrom;i<_dTo;i++){var disabled=i<G_LIMIT_MIN_DATE.year();startOf&&(disabled=disabled||i<startOf.year()),endOf&&(disabled=disabled||i>endOf.year());var yearProps={key:"year"+i,className:(0,_classnames2["default"])("calendar_bYearItem",{
"current-decade":i>=decadeYear&&i<decadeYear+10,selected:!!selected&&i===selected.year(),disabled:disabled}),onMouseDown:this.handleMouseDown};disabled||(yearProps.onClick=this.handleChangeYear.bind(this,i)),_years.push(_react2["default"].createElement("li",yearProps,i))}return _react2["default"].createElement("ul",{className:"calendar_bYearList",key:"yearList"+decadeYear},_years)},render:function(){var decadeYear=this.state.decadeYear,hasPrev=decadeYear>G_LIMIT_MIN_DATE.year();return _react2["default"].createElement("div",{className:"calendarMain"},_react2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_react2["default"].createElement(SwitchLabel,{className:"decade",label:decadeYear+"s",hasPrev:hasPrev,onPrevClick:this.handleDecadePrev,onNextClick:this.handleDecadeNext})),_react2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",key:"calendarBody",transitionName:"listSwitch",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),enterTimeout:200,leaveTimeout:200},this.renderYears()))}}),MonthSelector=_react2["default"].createClass({displayName:"MonthSelector",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return this.animPrev=!1,this.animNext=!1,{year:this.props.date.year()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({year:nextProps.date.year()})},handleYearPrev:function(){var _props3=this.props,isStatic=_props3.isStatic,onChange=_props3.onChange;if(!isStatic&&this.state.year>G_LIMIT_MIN_DATE.year()){var _newYear=this.state.year-1;onChange&&onChange("year",_newYear),this.setState({year:_newYear}),this.animPrev=!0,this.animNext=!1}},handleYearNext:function(){var _props4=this.props,isStatic=_props4.isStatic,onChange=_props4.onChange;if(!isStatic){var _newYear=this.state.year+1;onChange&&onChange("year",_newYear),this.setState({year:_newYear}),this.animPrev=!1,this.animNext=!0}},handleMouseDown:function(e){e.preventDefault()},handleLabelClick:function(name){this.props.onChangePanel&&this.props.onChangePanel(name)},handleSelectMonth:function(month){var _props5=this.props,onChange=_props5.onChange,isLeaf=_props5.isLeaf;onChange&&onChange("month",month),isLeaf||this.handleLabelClick("date")},renderMonths:function(){for(var _months=[],year=this.state.year,_props6=this.props,selected=_props6.selected,startOf=_props6.startOf,endOf=_props6.endOf,i=0;i<12;i++){var disabled=year<G_LIMIT_MIN_DATE.year();startOf&&(disabled=disabled||year<startOf.year()||year===startOf.year()&&i<startOf.month()),endOf&&(disabled=disabled||year>endOf.year()||year===endOf.year()&&i>endOf.month());var _monthProps={key:"month"+i,className:(0,_classnames2["default"])("calendar_bMonthItem",{selected:!!selected&&(selected.year()===year&&selected.month()===i),disabled:disabled}),onMouseDown:this.handleMouseDown};disabled||(_monthProps.onClick=this.handleSelectMonth.bind(this,i)),_months.push(_react2["default"].createElement("li",_monthProps,$lang.gMonth[i]))}return _react2["default"].createElement("ul",{className:"calendar_bMonthList",key:"monthsList"+year},_months)},render:function(){var isStatic=this.props.isStatic,year=this.state.year,_labelProps={className:isStatic?"month":"year",hasPrev:!isStatic&&year>G_LIMIT_MIN_DATE.year(),hasNext:!isStatic,label:isStatic?$lang.gCalendarChooseMonth:""+year,onClick:isStatic?null:this.handleLabelClick.bind(this,"year"),onPrevClick:this.handleYearPrev,onNextClick:this.handleYearNext};return _react2["default"].createElement("div",{className:"calendarMain",key:"monthSelect"},_react2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_react2["default"].createElement(SwitchLabel,_labelProps)),_react2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),key:"calendarBody",transitionName:"listSwitch",enterTimeout:200,leaveTimeout:200},this.renderMonths()))}}),DateSelector=_react2["default"].createClass({displayName:"DateSelector",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){this.animPrev=!1,this.animNext=!1;var date=this.props.date;return{year:date.year(),month:date.month()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({year:nextProps.date.year(),month:nextProps.date.month()})},handleLabelClick:function(name){this.props.onChangePanel&&this.props.onChangePanel(name)},handleYearPrev:function(){if(this.state.year>G_LIMIT_MIN_DATE.year()){var _newYear=this.state.year-1;this.setState({year:_newYear}),this.props.onChange&&this.props.onChange("year",_newYear),this.animPrev=!0,this.animNext=!1}},handleYearNext:function(){var _newYear=this.state.year+1;this.setState({year:_newYear}),this.props.onChange&&this.props.onChange("year",_newYear),this.animPrev=!1,this.animNext=!0},handleMonthPrev:function(){var _state=this.state,year=_state.year,month=_state.month,_change=this.props.onChange||function(){},_newYear=void 0,_newMonth=void 0;month>0?_newMonth=month-1:year>G_LIMIT_MIN_DATE.year()&&(_newMonth=11,_newYear=year-1);var _newState={};void 0!==_newYear&&(_newState.year=_newYear),void 0!==_newMonth&&(_newState.month=_newMonth),_lodash2["default"].isEmpty(_newState)||(this.setState(_newState),_change(_newState),this.animPrev=!0,this.animNext=!1)},handleMonthNext:function(){var _state2=this.state,year=_state2.year,month=_state2.month,_change=this.props.onChange||function(){},_newYear=void 0,_newMonth=void 0;month<11?_newMonth=month+1:(_newMonth=0,_newYear=year+1);var _newState={};void 0!==_newYear&&(_newState.year=_newYear),void 0!==_newMonth&&(_newState.month=_newMonth),_lodash2["default"].isEmpty(_newState)||(this.setState(_newState),_change(_newState),this.animPrev=!1,this.animNext=!0)},handleMouseDown:function(e){e.preventDefault()},handleSelectDay:function(day){this.props.onChange&&this.props.onChange({date:day,month:this.state.month,year:this.state.year})},renderWeek:function(){return _react2["default"].createElement("ul",{className:"calendar_bWeekNameRow",key:"weekRow"},_lodash2["default"].map($lang.gWeekDay,function(val,i){return _react2["default"].createElement("li",{className:"calendar_bWeekNameItem",key:"weekName"+i},val)}))},renderDays:function(){for(var _state3=this.state,year=_state3.year,month=_state3.month,_props7=this.props,startOf=_props7.startOf,endOf=_props7.endOf,disabledDate=_props7.disabledDate,selected=_props7.selected,_now=(0,_MGMoment2["default"])(),_hintMonth=(0,_MGMoment2["default"])(year+"-"+(month+1)+"-1"),startDate=_hintMonth.clone().startOf("month"),_currentDate=startDate.clone().day(0),_tempList=[],_weeks=[],_hasNextWeek=!0;_hasNextWeek;){var disabled=_currentDate.month()!==month;startOf&&(disabled=disabled||startOf.startOf("date").time()>_currentDate.time()),endOf&&(disabled=disabled||endOf.endOf("date").time()<_currentDate.time()),disabledDate&&(disabled=disabled||disabledDate.indexOf("W"+_currentDate.week())>-1);var selectDate=!1;selected&&(selectDate=_currentDate.date()===selected.date()&&_currentDate.month()===selected.month()&&_currentDate.year()===selected.year());var _dayProps={key:_currentDate.format("YYYYMMDD"),className:(0,_classnames2["default"])("calendar_bDayItem",{today:0===_currentDate.gap(_now),"current-month":_currentDate.month()===month,disabled:disabled,selected:selectDate}),onMouseDown:this.handleMouseDown};disabled||(_dayProps.onClick=this.handleSelectDay.bind(this,_currentDate.date())),_tempList.push(_react2["default"].createElement("li",_dayProps,_react2["default"].createElement("a",{href:"javascript:void(0);"},_currentDate.date()))),7===_tempList.length&&(_weeks.push(_react2["default"].createElement("ul",{className:"calendar_bWeekRow",key:"week"+_weeks.length},_tempList)),_tempList=[],6===_weeks.length&&(_hasNextWeek=!1)),_currentDate=_currentDate.clone().add(1,"d")}return _weeks},render:function(){var _state4=this.state,year=_state4.year,month=_state4.month,yearProps={label:""+year,key:"dYear",className:"halfWidth year",onClick:this.handleLabelClick.bind(this,"year"),onPrevClick:this.handleYearPrev,onNextClick:this.handleYearNext},monthProps={label:$lang.gMonth[month],key:"dMonth",className:"halfWidth month",onClick:this.handleLabelClick.bind(this,"month"),onPrevClick:this.handleMonthPrev,onNextClick:this.handleMonthNext};return _react2["default"].createElement("div",{className:"calendarMain",key:"dateSelect"},_react2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_react2["default"].createElement(SwitchLabel,yearProps),_react2["default"].createElement(SwitchLabel,monthProps)),_react2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),key:"calendarBody",transitionName:"listSwitch",enterTimeout:200,leaveTimeout:200},_react2["default"].createElement("div",{className:"calendar_bWeekList",key:"ListO"+year+"Y"+month+"M"},this.renderWeek(),this.renderDays())))}}),StaticDateSelector=_react2["default"].createClass({displayName:"StaticDateSelector",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return this.animPrev=!1,this.animNext=!1,{month:this.props.date.month()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({month:nextProps.date.month()})},handleLabelClick:function(type){this.props.onChangePanel&&this.props.onChangePanel(type)},handleMonthPrev:function(){var _props8=this.props,isStatic=_props8.isStatic,onChange=_props8.onChange,month=this.state.month;if(!isStatic){var _newMonth=month-1;_newMonth<0&&(_newMonth=11),onChange&&onChange("month",_newMonth),this.setState({month:_newMonth}),this.animPrev=!0,this.animNext=!1}},handleMonthNext:function(){var _props9=this.props,isStatic=_props9.isStatic,onChange=_props9.onChange,month=this.state.month;if(!isStatic){var _newMonth=month+1;_newMonth>11&&(_newMonth=0),onChange&&onChange("month",_newMonth),this.setState({month:_newMonth}),this.animPrev=!1,this.animNext=!0}},handleMouseDown:function(e){e.preventDefault()},handleSelectDay:function(day){this.props.onChange&&this.props.onChange("date",day)},renderDays:function(){for(var _props10=this.props,isStatic=_props10.isStatic,selected=_props10.selected,month=this.state.month,len=isStatic?31:STATIC_MONTH_DATE[month],_tempList=[],_weeks=[],i=0;i<len;i++){var _dayProps={key:"s"+(month+1)+(i+1),className:(0,_classnames2["default"])({calendar_bDayItem:!0,"current-month":!0,selected:!!selected&&(i+1===selected.date()&&month===selected.month())}),onMouseDown:this.handleMouseDown,onClick:this.handleSelectDay.bind(this,i+1)};_tempList.push(_react2["default"].createElement("li",_dayProps,_react2["default"].createElement("a",{href:"javascript:void(0);"},i+1))),7!==_tempList.length&&len!==i+1||(_weeks.push(_react2["default"].createElement("ul",{className:"calendar_bWeekRow",key:"weekS"+_weeks.length},_tempList)),_tempList=[])}return _weeks},render:function(){var isStatic=this.props.isStatic,month=this.state.month,_labelProps={className:"month",hasPrev:!isStatic,hasNext:!isStatic,label:isStatic?$lang.gCalendarChooseDate:""+$lang.gMonth[month],onClick:isStatic?null:this.handleLabelClick.bind(this,"month"),onPrevClick:this.handleMonthPrev,onNextClick:this.handleMonthNext};return _react2["default"].createElement("div",{className:"calendarMain",key:"dateSelect"},_react2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_react2["default"].createElement(SwitchLabel,_labelProps)),_react2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),key:"calendarBody",transitionName:"listSwitch",enterTimeout:200,leaveTimeout:200},_react2["default"].createElement("div",{className:"calendar_bWeekList",key:"ListS"+month+"M"},this.renderDays())))}}),TimerEditor=_react2["default"].createClass({displayName:"TimerEditor",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){this.animPrev=!1,this.animNext=!1;var date=this.props.date;return{hours:date.hours(),minutes:date.minutes(),seconds:date.seconds()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({hours:nextProps.date.hours(),minutes:nextProps.date.minutes(),seconds:nextProps.date.seconds()})},handleInputChange:function(type,e){var _value=e.target.value,_newState={};_newState[type]=_value,this.props.onChange&&this.props.onChange(type,_value),this.setState(_newState)},handleMouseDown:function(e){},render:function(){var _props11=this.props,className=_props11.className,accuracy=_props11.accuracy,children=_props11.children,_state5=this.state,hours=_state5.hours,minutes=_state5.minutes,seconds=_state5.seconds,_hour=[_react2["default"].createElement("input",{className:(0,_classnames2["default"])("cp_calendar_input","calendar_hour",className),name:"hour",key:"hourInput",value:hours,onChange:this.handleInputChange.bind(this,"hour")}),_react2["default"].createElement("span",{className:"calendarTips",key:"hourUnit"},$lang.gTimeUnit[0])],_minute=[_react2["default"].createElement("input",{className:(0,_classnames2["default"])("cp_calendar_input","calendar_minute",className),name:"minute",key:"minuteInput",value:minutes,onChange:this.handleInputChange.bind(this,"minute")}),_react2["default"].createElement("span",{className:"calendarTips",key:"minuteUnit"},$lang.gTimeUnit[1])],_second=[_react2["default"].createElement("input",{className:(0,_classnames2["default"])("cp_calendar_input","calendar_second",className),name:"second",key:"secondInput",value:seconds,onChange:this.handleInputChange.bind(this,"second")}),_react2["default"].createElement("span",{className:"calendarTips",key:"secondUnit"},$lang.gTimeUnit[2])],_timers=[_hour,_minute,_second];return accuracy<0&&0===_react2["default"].Children.count(children)?null:_react2["default"].createElement("div",{className:"calendar_footer"},_react2["default"].createElement("div",{className:"calendar_time"},_react2["default"].createElement("div",{className:"calendar_content"},_timers.slice(0,accuracy),_react2["default"].createElement("div",{className:"clearB"}))),children)}});return _react2["default"].createClass({displayName:"Calendar",mixins:[_reactAddonsPureRenderMixin2["default"]],getDefaultProps:function(){return{type:1,formatType:0,timeFormatType:1}},_preProcessState:function(props){var type=props.type,defaultValue=props.defaultValue,formatType=props.formatType,formatList=props.formatList,range=props.range,_defaultPanelMapping={1:"date",2:"date",3:"date",4:"time",5:"date"},_defaultValueInfo=valueFormat(defaultValue||""),_currentShowDate=(0,_MGMoment2["default"])().startOf("date");if(_defaultValueInfo.data&&(_currentShowDate=(0,_MGMoment2["default"])(_defaultValueInfo.data)),range){if(range[0]&&range[0]!==-1&&range[0]!==!0){var _rangeStart=(0,_MGMoment2["default"])(range[0]);_rangeStart.time()>_currentShowDate.time()&&(_currentShowDate=_rangeStart.clone().startOf("date"))}if(range[1]&&range[1]!==-1&&range[1]!==!0){var _rangeEnd=(0,_MGMoment2["default"])(range[1]);_rangeEnd.time()<_currentShowDate.time()&&(_currentShowDate=_rangeEnd.clone().startOf("date"))}}var _panelDefault=_defaultPanelMapping[type],_formatType=formatType,_formatList=formatList||[0,1,2];if(_formatList.indexOf(_defaultValueInfo.type)>-1?_formatType=_defaultValueInfo.type:_formatList.indexOf(_formatType)===-1&&(_formatType=_formatList[0]),this.formatList=_formatList,2===type||1===type||5===type){switch(_formatType){case 0:case 2:case 5:_panelDefault="date";break;case 1:case 4:_panelDefault="month";break;case 3:_panelDefault="year"}5!==_formatType&&2!==_formatType||(_currentShowDate=_currentShowDate.year(2e3))}var rangeInfo=dateRange(type,range);return this.start=rangeInfo.start,this.end=rangeInfo.end,{formatType:_formatType,panel:_panelDefault,pointer:_currentShowDate,selected:!!defaultValue&&_currentShowDate.clone()}},getInitialState:function(){this.animationMagnify=!1,this.animationShrink=!1,this.panelMapping={date:0,month:1,year:2,type:3};var p=this._preProcessState(this.props);return{formatType:p.formatType,panel:p.panel,pointer:p.pointer,selected:p.selected}},componentDidMount:function(){},componentWillUpdate:function(nextProps,nextState){if(this.animationMagnify=this.panelMapping[nextState.panel]<this.panelMapping[this.state.panel],this.animationShrink=!this.animationMagnify,(nextProps.defaultValue||this.props.defaultValue)&&nextProps.defaultValue!==this.props.defaultValue){var p=this._preProcessState(nextProps);this.setState({pointer:p.pointer,selected:p.selected})}},componentWillUnmount:function(){},toggleTypeSelector:function(newType){var currentFormatType=void 0!==newType?newType:this.state.formatType,currentPanel=this.state.panel;"type"===currentPanel?(1!==currentFormatType&&4!==currentFormatType||"month"===this.oldPanel?3===currentFormatType&&"year"!==this.oldPanel?this.oldPanel="year":5===currentFormatType&&"date"!==this.oldPanel&&(this.oldPanel="date"):this.oldPanel="month",this.handleChangePanel(this.oldPanel)):(this.oldPanel=currentPanel,this.handleChangePanel("type"))},handleMouseDown:function(e){},handleChangePanel:function(panel){this.setState({panel:panel})},handleChangePointer:function(d,newVal){var _this2=this,_props12=this.props,type=_props12.type,triggerChange=_props12.triggerChange,onSelect=_props12.onSelect,_state6=this.state,formatType=_state6.formatType,pointer=_state6.pointer,_keys=[],_value={};_lodash2["default"].isPlainObject(d)?(_keys=Object.keys(d),_value=d):(_keys=[d],_value={},_value[d]=newVal);var _change=(1===formatType||4===formatType)&&_keys.indexOf("month")>-1||(0===formatType||2===formatType||5===formatType)&&_keys.indexOf("date")>-1||3===formatType&&_keys.indexOf("year")>-1,_newPointer=pointer.clone();_lodash2["default"].forEach(["year","month","date","hour","minute","second","type"],function(dateType){if(void 0!==_value[dateType]&&null!==_value[dateType]){var value=_value[dateType];switch(dateType){case"second":_newPointer.seconds(+value);break;case"minute":_newPointer.minutes(+value);break;case"hour":_newPointer.hours(+value);break;case"date":_newPointer.date(+value);break;case"month":_newPointer.month(+value);break;case"year":_newPointer.year(+value);break;case"type":formatType!==value&&(2!==formatType&&2===value?_newPointer.year("2000"):2===formatType&&_newPointer.year((0,_MGMoment2["default"])().year()),_this2.setState({formatType:value})),_this2.toggleTypeSelector(value)}}});var _checkInfo=checkDateValid(_newPointer,type,formatType,this.start,this.end);_newPointer=_checkInfo.date,_checkInfo.valid&&(this.setState({pointer:_newPointer}),triggerChange&&_change&&this.doChange(_newPointer),onSelect&&onSelect(_newPointer),this.setState({selected:_newPointer}))},getCurrentSelected:function(){return this.state.pointer},getFormatDate:function(date){var _props13=this.props,type=_props13.type,timeFormatType=_props13.timeFormatType,_state7=this.state,selected=_state7.selected,formatType=_state7.formatType;if(date||(date=selected),!date)return"";var _formatDate=date.getFullDate();if(1!==timeFormatType&&(2===timeFormatType?date.seconds(0):3===timeFormatType&&(date.seconds(0),date.minutes(0))),1===type||2===type||5===type)switch(formatType){case 1:_formatDate=date.getYearMonth()+"-";break;case 2:_formatDate="-"+date.getMonthDay();break;case 3:_formatDate=date.year()+"--";break;case 4:_formatDate="-"+(date.month()+1)+"-";break;case 5:_formatDate="--"+date.date()}else 3===type?_formatDate=date.getFullDateTime():4===type&&(_formatDate=date.getTime());return 5===type&&(_formatDate+=" "+date.getTime()),_formatDate},doSetDate:function(dateStr){},doChange:function(date){var _formatDate=this.getFormatDate(date);this.setState({selected:date}),this.props.onChange&&this.props.onChange(null,_formatDate)},renderPanel:function(){var _props14=this.props,disabledDate=(_props14.type,_props14.disabledDate),_state8=this.state,panel=_state8.panel,formatType=_state8.formatType,pointer=_state8.pointer,selected=_state8.selected,_panel=null,_panelProps={date:pointer,selected:selected,key:"shown"+panel,startOf:this.start,endOf:this.end,isLeaf:(1===formatType||4===formatType)&&"month"===panel||(0===formatType||2===formatType||5===formatType)&&"date"===panel||3===formatType&&"year"===panel,onChange:this.handleChangePointer,onChangePanel:this.handleChangePanel};switch(panel){case"date":_panel=2===formatType||5===formatType?_react2["default"].createElement(StaticDateSelector,_extends({},_panelProps,{isStatic:5===formatType})):_react2["default"].createElement(DateSelector,_extends({},_panelProps,{disabledDate:disabledDate}));break;case"month":_panel=_react2["default"].createElement(MonthSelector,_extends({},_panelProps,{isStatic:2===formatType||4===formatType}));break;case"year":_panel=_react2["default"].createElement(YearSelector,_panelProps);break;case"type":_panel=_react2["default"].createElement(FillingTypeSelector,_extends({},_panelProps,{formatType:formatType,formatList:this.formatList}))}return _panel},render:function(){var _props15=this.props,type=_props15.type,className=_props15.className,timeFormatType=_props15.timeFormatType,extOpeartion=_props15.extOpeartion,onMouseDown=_props15.onMouseDown,_state9=this.state,formatType=_state9.formatType,panel=_state9.panel,pointer=_state9.pointer,timerFormatMapping={1:3,2:2,3:1},_formatLabel=null,_timer=_react2["default"].createElement(TimerEditor,{key:"calendarTimer",accuracy:timerFormatMapping[timeFormatType],startOf:this.start,endOf:this.end,date:pointer,onChange:this.handleChangePointer},extOpeartion);return 4===type?_react2["default"].createElement("div",{className:(0,_classnames2["default"])(className,"calendarContainer","calendarTimer"),key:"calendar",ref:"calendar",onMouseDown:onMouseDown},_timer):(1!==type&&5!==type||(_formatLabel=_react2["default"].createElement(TypeTitle,{formatType:formatType,formatList:this.formatList,onClick:this.toggleTypeSelector})),_react2["default"].createElement("div",{className:(0,_classnames2["default"])(className,"calendarContainer",["YMD","YM","MD","Y","M","D"][formatType],"panel_"+panel),key:"calendar",ref:"calendar",onMouseDown:onMouseDown},_formatLabel,_react2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendarWrapper",{calendarStatic:2===formatType||5===formatType,cm_magnify:this.animationMagnify,cm_shrink:this.animationShrink}),transitionName:"typeSwitch",enterTimeout:200,leaveTimeout:200},this.renderPanel()),[3,4,5].indexOf(type)>-1?_timer:null))}})}function calendarFactory(language){return $lang=language,dateTypeList={0:$lang.gCalendarTypeYMD,1:$lang.gCalendarTypeYM,2:$lang.gCalendarTypeMD,3:$lang.gCalendarTypeY,4:$lang.gCalendarTypeM,5:$lang.gCalendarTypeD},calendar()}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports["default"]=calendarFactory;var _jquery=__webpack_require__(22),_lodash=(_interopRequireDefault(_jquery),__webpack_require__(8)),_lodash2=_interopRequireDefault(_lodash),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_MGMoment=__webpack_require__(34),_MGMoment2=_interopRequireDefault(_MGMoment),_LegoAnimationGroup=__webpack_require__(69),_LegoAnimationGroup2=_interopRequireDefault(_LegoAnimationGroup),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),G_LIMIT_MIN_DATE=(0,_MGMoment2["default"])("1900-1-1"),STATIC_MONTH_DATE=[31,29,31,30,31,30,31,31,30,31,30,31],$lang={},dateTypeList={};module.exports=exports["default"]},,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function beautyValue(v){var _date=valueStructureGetter(v),_dateStr=_date.dateStr;if(_dateStr){var REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-$/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)$/g,REG_DAY=/^--(\d{1,2}?)$/g,REG_MONTH=/^-(\d{1,2}?)-$/g,REG_YEAR=/^(\d{4}?)--$/g;if(_dateStr.match(REG_YEAR_MONTH))return _dateStr.replace(/-$/g,"");if(_dateStr.match(REG_MONTH_DAY))return _dateStr.replace(/^-/g,"");if(_dateStr.match(REG_YEAR))return _dateStr.replace("--","");if(_dateStr.match(REG_MONTH))return _config.lang.gMonth[+v.replace(/-/g,"")-1];if(_dateStr.match(REG_DAY))return _dateStr.replace("--","")}return _dateStr}function valueStructureGetter(dateStr){var _t=["00","00","00"],_d=(dateStr||"").replace(REG_TIME,function($,$1,$2,$3){return $1&&(_t[0]=$1),$2&&(_t[1]=$2),$3&&(_t[2]=$3),""});return{dateStr:_lodash2["default"].trim(_d),timeList:_t}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_classnames=(_interopRequireDefault(_jquery),__webpack_require__(38)),_classnames2=_interopRequireDefault(_classnames),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_config=__webpack_require__(9),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_MGMoment=__webpack_require__(34),_formStore=(_interopRequireDefault(_MGMoment),__webpack_require__(42)),_formStore2=_interopRequireDefault(_formStore),_PopCalendar=__webpack_require__(73),_PopCalendar2=_interopRequireDefault(_PopCalendar),_FCTextBox=__webpack_require__(52),_reactAddonsPureRenderMixin=(_interopRequireDefault(_FCTextBox),__webpack_require__(46)),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_typeMapping={dateTime_date:1,dateTime_time:4,dateTime_both:5},REG_TIME=/(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?/g,_num=0;exports["default"]=_react2["default"].createClass({displayName:"Component(DateTimeMobile)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return _num++,this.num=_num,{isOpen:!1,displayValue:beautyValue(this.props.fill)}},componentWillUpdate:function(nextProps,nextState){beautyValue(nextProps.fill)===this.state.displayValue||this.inEdit||this.setState({displayValue:beautyValue(nextProps.fill)})},_saveCurrentData:function(dateStr){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:dateStr})},handleChangeDate:function(date){var _currentDate=this.props.fill||"",_valueStructureGetter=valueStructureGetter(_currentDate),timeList=(_valueStructureGetter.dateStr,_valueStructureGetter.timeList),_t="";1!==this.caType&&(_t=timeList.join(":")),this._saveCurrentData(_lodash2["default"].trim(date+" "+_t))},handleChangeTime:function(key,e){var value=e.target.value,_currentDate=this.props.fill||"",_valueStructureGetter2=valueStructureGetter(_currentDate),dateStr=_valueStructureGetter2.dateStr,timeList=_valueStructureGetter2.timeList,_newTime=[];1!==this.caType&&(_newTime=timeList.slice(),_newTime[key]=value||"00"),this._saveCurrentData(_lodash2["default"].trim(dateStr+" "+_newTime.join(":")))},handleEmptyDate:function(e){e.stopPropagation(),this.handleChangeDate("")},popCalendar:function(){var _props=this.props,isBirthDate=_props.isBirthDate,data=_props.data,fill=_props.fill,dateFormat=data.dateFormat,formatType=data.formatType,isLimitDayInterval=data.isLimitDayInterval,dayIntervalFrom=data.dayIntervalFrom,dayIntervalTo=data.dayIntervalTo,isLimitDays=data.isLimitDays,limitDays=data.limitDays,_disableDate=null;if(isLimitDays&&!_lodash2["default"].isEmpty(limitDays)){_disableDate=[];for(var i=0;i<7;i++)limitDays.indexOf(i+1)===-1&&_disableDate.push("W"+i)}var _defaultValue=fill||"";_defaultValue&&_defaultValue.match(/[:]/)&&(_defaultValue=_lodash2["default"].trim(_defaultValue.replace(REG_TIME,""))),_reactDom2["default"].render(_react2["default"].createElement(_PopCalendar2["default"],{formatType:formatType,dateFormat:dateFormat||(isBirthDate?[1,3]:[1]),isLimitDayInterval:isLimitDayInterval,dayIntervalFrom:dayIntervalFrom,dayIntervalTo:dayIntervalTo,disableDate:_disableDate,defaultValue:_defaultValue,onChange:this.handleChangeDate}),document.getElementById("popwin"))},renderDropDown:function(data,dropRange,defaultValue,key,width,dataKey){var i=dropRange[0],rangeTo=dropRange[1],options=[];options.push(_react2["default"].createElement("option",{key:"defaultDisabled",value:null,disabled:!0,selected:!0,hidden:!0,style:{display:"none"}},""));var _formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle;for(i;i<=rangeTo;i++)options.push(_react2["default"].createElement("option",{value:i,key:"s"+i},i));return _react2["default"].createElement("div",{className:"fbc_dateTimeSelectWrapper",key:key,style:{width:width}},_react2["default"].createElement("div",{className:"fbc_select fbc_dateTimeSelect"},_react2["default"].createElement("i",{className:"fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},_config.lang.gTimeUnit[dataKey]),_react2["default"].createElement("select",{className:"fbc_innerSelect",value:data,style:inputStyle,onChange:this.handleChangeTime.bind(this,dataKey)},options)))},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isBirthDate=_props2.isBirthDate,id=data.id,timePrecision=data.timePrecision,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputIconStyle=_formStyle2.inputIconStyle,dateTimeType=data.isCustomField?data.cfDateTimeType:data.type,caType=_typeMapping[dateTimeType]||1;isBirthDate&&(caType=1),this.caType=caType;var _fillDate=null;fill&&(_fillDate=valueStructureGetter(fill).timeList);var _content=null,_timePrecision=Math.min(3,+(timePrecision||3));return 4===caType?_content=_react2["default"].createElement("div",{className:"fbc_timeSelector fbc_timeOnly"},this.renderDropDown(_fillDate?+_fillDate[0]:null,[0,23],_config.lang.cDateTimeHour,"dpHour",100/_timePrecision+"%",0),_timePrecision<2?null:this.renderDropDown(_fillDate?+_fillDate[1]:null,[0,59],_config.lang.cDateTimeMin,"dpMin",100/_timePrecision+"%",1),_timePrecision<3?null:this.renderDropDown(_fillDate?+_fillDate[2]:null,[0,59],_config.lang.cDateTimeSec,"dpSec",100/_timePrecision+"%",2)):5===caType?(_content=[],_content.push(_react2["default"].createElement("div",{className:"fbc_datetime fbc_dateTimeSelector",key:"dateTimeSelector"},_react2["default"].createElement("i",{className:"iconfont fbc_dtIcon",style:inputIconStyle},"birthDate"===dateTimeType?String.fromCharCode(59081):String.fromCharCode(59141)),_react2["default"].createElement("div",{className:"fbc_input",style:_lodash2["default"].assign({},inputStyle,{paddingLeft:(inputStyle.fontSize||14)+10}),onClick:this.popCalendar},_react2["default"].createElement("div",{className:"fbi_input"},this.state.displayValue),this.state.displayValue?_react2["default"].createElement("a",{className:"iconfont fbc_empty",style:{height:inputStyle.height-2,lineHeight:inputStyle.height-2+"px"},onClick:this.handleEmptyDate},String.fromCharCode(58982)):null))),_content.push(_react2["default"].createElement("div",{className:"fbc_timeSelector fbc_dateTimeSelector",
key:"timerSelector"},this.renderDropDown(_fillDate?+_fillDate[0]:null,[0,23],_config.lang.cDateTimeHour,"dpHour",100/_timePrecision+"%",0),_timePrecision<2?null:this.renderDropDown(_fillDate?+_fillDate[1]:null,[0,59],_config.lang.cDateTimeMin,"dpMin",100/_timePrecision+"%",1),_timePrecision<3?null:this.renderDropDown(_fillDate?+_fillDate[2]:null,[0,59],_config.lang.cDateTimeSec,"dpSec",100/_timePrecision+"%",2)))):1===caType&&(_content=_react2["default"].createElement("div",{className:"fbc_datetime",key:"dateTimeSelector"},_react2["default"].createElement("i",{className:"iconfont fbc_dtIcon",style:inputIconStyle},"birthDate"===dateTimeType?String.fromCharCode(59081):String.fromCharCode(59141)),_react2["default"].createElement("div",{className:"fbc_input",style:_lodash2["default"].assign({},inputStyle,{paddingLeft:(inputStyle.fontSize||14)+5}),onClick:this.popCalendar},_react2["default"].createElement("div",{className:"fbi_input"},this.state.displayValue),this.state.displayValue?_react2["default"].createElement("a",{className:"iconfont fbc_empty",style:{height:inputStyle.height-2,lineHeight:inputStyle.height-2+"px"},onClick:this.handleEmptyDate},String.fromCharCode(58982)):null))),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",dateTimeType),id:id,style:componentStyle,ref:"cdDateTime"},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_content",style:{width:"100%"}},_content,_react2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_classnames=__webpack_require__(38),_react=(_interopRequireDefault(_classnames),__webpack_require__(14)),_react2=_interopRequireDefault(_react),_config=__webpack_require__(9),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_FCPopwin=__webpack_require__(74),_FCPopwin2=_interopRequireDefault(_FCPopwin),_FCCalendar=__webpack_require__(68),_FCCalendar2=_interopRequireDefault(_FCCalendar),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),Calendar=(0,_FCCalendar2["default"])(_config.lang);exports["default"]=_react2["default"].createClass({displayName:"PopCalendar",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){var _this=this;return _utils2["default"].getParentInfo([{t:"self",v:"rect",e:1,n:"rect"}]).then(function(res){res&&res.innerState&&_this.setState({rectTop:res.rect.top})}),{}},componentDidMount:function(){(0,_jquery2["default"])(".ie8").length>0?(0,_jquery2["default"])("html").addClass("ie8noscroll"):(0,_jquery2["default"])("html").addClass("noscroll")},componentWillUnmount:function(){(0,_jquery2["default"])("html").removeClass("noscroll").removeClass("ie8noscroll")},handleClose:function(){(0,_jquery2["default"])("html").removeClass("noscroll").removeClass("ie8noscroll"),this.refs.popwin.doClose()},handleDateChange:function(e,date){var _this2=this;this.props.onChange&&this.props.onChange(date),window.setTimeout(function(){_this2.handleClose()},80)},render:function(){var props=this.props,_calendarProps={ref:"calendar",type:1,formatType:props.formatType,formatList:_lodash2["default"].map(props.dateFormat||[1],function(v){return v-1}),range:props.isLimitDayInterval?[props.dayIntervalFrom||-1,props.dayIntervalTo||-1]:!!props.isBirthDate&&[-1,!0],disabledDate:props.disableDate,defaultValue:props.defaultValue,triggerChange:!0,onChange:this.handleDateChange};return _react2["default"].createElement(_FCPopwin2["default"],{className:"pop_calendar",ref:"popwin",boxStyle:{marginTop:this.state.rectTop?Math.max(60-this.state.rectTop,60):null}},_react2["default"].createElement(Calendar,_calendarProps))}}),module.exports=exports["default"]},,function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_utils=__webpack_require__(30),_tools=__webpack_require__(33),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger);__webpack_require__(76),__webpack_require__(77),__webpack_require__(78),__webpack_require__(79);var _CPictureAttachment=__webpack_require__(80);global.jQuery=global.$=_jquery2["default"];var FILE_TYPE_LIST=_formStore2["default"].FILE_TYPE_LIST,FileBlock=_react2["default"].createClass({displayName:"FileBlock",shouldComponentUpdate:function(nextProps,nextState){return!(0,_tools.shallowEqual)(nextProps.item||{},this.props.item||{})||!(0,_tools.shallowEqual)(nextProps.children||{},this.props.children||{})},componentDidUpdate:function(prevProps){if(!_utils.isOldIE&&_react2["default"].Children.count(this.props.children)){var _currentId=(this.props.item||{}).idx||null;((prevProps.item||{}).idx||null!==_currentId)&&this.props.onUpdateFileProcessId&&this.props.onUpdateFileProcessId((this.props.item||{}).idx||null)}},handleRemoveFile:function(e){e.stopPropagation(),this.props.onRemoveFile(this.props.item.idx)},handleSetRawId:function(){this.props.onUpdateFileProcessId&&this.props.onUpdateFileProcessId((this.props.item||{}).idx||null)},handleAddFile:function(){_utils.isOldIE||_react2["default"].Children.count(this.props.children)||this.props.onAddFile((this.props.item||{}).idx||null,!_react2["default"].Children.count(this.props.children))},getErrorInfo:function(){var _props=this.props,item=_props.item,maxSize=_props.maxSize;if(item&&item.error){var errInfo=_config.lang["cUploadFailed"+item.error];return"ILLEGAL_FILE_SIZE"===item.error&&(errInfo=errInfo({fileSize:maxSize})),errInfo}return null},render:function(){var _props2=this.props,item=_props2.item,maxSize=_props2.maxSize,inputStyle=_props2.inputStyle,inputIconStyle=_props2.inputIconStyle,children=_props2.children,_uploaderContent=null,_iconStr=58979;return item?(_iconStr=item.error?58938:58988,_uploaderContent=_react2["default"].createElement("p",{className:"fbc_ufText"},_react2["default"].createElement("a",{href:"javascript:void(0);"},item.error?this.getErrorInfo():item.name),_react2["default"].createElement("span",{className:"fbc_ufSize"},item.error?item.name:item.size?(0,_CPictureAttachment.fileSizeBeauty)(item.size):"-"))):_uploaderContent=_react2["default"].createElement("p",{className:"fbc_ufText"},_react2["default"].createElement("span",null,_config.lang.cFileSizeHint({fileSize:maxSize}))),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_uploadFile",{empty:!item,succeed:item,error:item&&item.error}),style:inputStyle,onClick:this.handleAddFile,onMouseDown:this.handleSetRawId,onTouchStart:this.handleSetRawId},_react2["default"].createElement("i",{className:"iconfont fbc_ufIcon",style:{lineHeight:inputIconStyle.lineHeight,fontSize:inputIconStyle.fontSize}},String.fromCharCode(_iconStr)),_react2["default"].createElement("div",{className:"fbc_ufContent"},_uploaderContent,item?_react2["default"].createElement("a",{className:"iconfont fbc_ufRemove",title:_config.lang.cRemoveFile,style:{lineHeight:inputStyle.lineHeight},onClick:this.handleRemoveFile},String.fromCharCode(58980)):null),children)}}),_MAXIMUM_UPLOADER_FILE_NUM=1/0;exports["default"]=_react2["default"].createClass({displayName:"Component(Attachment)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return this.uploaderFileList={},this.fileProcessContent={},{tipHint:!1}},componentWillUpdate:function(nextProps,nextState){var valid=nextProps.valid;valid&&valid.indexOf("tipHint")>-1&&this.props.valid.indexOf("tipHint")===-1&&!nextState.tipHint&&this.setState({tipHint:!0})},componentDidUpdate:function(){var _this=this;if(!_utils.isOldIE){var _props3=this.props,data=_props3.data,fill=_props3.fill,_maximumFileNum=data.fileNumber?+data.fileNumber:_MAXIMUM_UPLOADER_FILE_NUM,_fillLength=fill?fill.length:0,_maxNum=Math.max(data.isAcceptMultipleFile?_maximumFileNum-_fillLength:1,1);this.refs.uploader&&this.refs.uploader.doUpdateInputInfo({maxFileNumber:_maxNum,isMultiple:_maxNum>1})}this.state.tipHint&&!this.tipHintTimer&&(this.tipHintTimer=setTimeout(function(){_this.setState({tipHint:!1}),_this.tipHintTimer=null},1200))},componentWillUnmount:function(){clearTimeout(this.tipHintTimer)},handleUpdateFileUploaderProcessId:function(id){this.refs.uploader.doSetFrId(id)},handleAddFile:function(id,needTrigger){this.refs.uploader.doSetFrId(id),needTrigger&&this.refs.uploader.doUploadTigger()},handleRemoveFile:function(id){_formStore2["default"].dispatch({type:"removeFile",id:this.props.data.id,idx:id})},handleFileAdd:function(fileInfo){this.fileProcessContent.add=[].concat(this.fileProcessContent.add||[],fileInfo)},handleFileUpdate:function(fileInfo,id){this.fileProcessContent.update=[].concat(this.fileProcessContent.update||[],{id:id,fileInfo:fileInfo})},handleFlushFileProcess:function(){var _fp=this.fileProcessContent;this.fileProcessContent={},_MGDebugger2["default"].log("flush attachment~~",_fp),_formStore2["default"].dispatch({type:"fileProcessFlush",isImage:!1,id:this.props.data.id,processData:_fp})},handleFileUploadDestroy:function(){this.uploaderFile=null},renderTips:function(){var _props4=this.props,data=_props4.data,valid=_props4.valid,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle;if(1!==data.isLimitFileType)return null;var content=null,isErrorTip=(valid||[]).indexOf("tip")>-1;if(data.isLimitFileType&&!_lodash2["default"].isEmpty(data.fileTypes)){var types=_lodash2["default"].map(data.fileTypes||[],function(type){return FILE_TYPE_LIST[type]});content=_config.lang.cFileSupportFunc({fileTypes:types.join(", ")})}return _react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip||this.state.tipHint}),style:tipsStyle},content)},renderFilePreviewList:function(){var _this2=this,_props5=this.props,data=_props5.data,fill=_props5.fill,isMobile=(_props5.valid,_props5.isMobile),_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputIconStyle=_formStyle2.inputIconStyle,fileSizeMaximum=data.isLimitFileSize&&data.fileSize?data.fileSize:500,_uploader=null,_displayEmptyFileUploader=!fill||_lodash2["default"].isEmpty(fill);data.isAcceptMultipleFile&&(_displayEmptyFileUploader=fill&&fill.length&&fill.length<(data.fileNumber?+data.fileNumber:_MAXIMUM_UPLOADER_FILE_NUM)||!fill||_lodash2["default"].isEmpty(fill));var _filePreviewList=[],_fillLength=fill?fill.length:0,_maximumFileNum=data.fileNumber?+data.fileNumber:_MAXIMUM_UPLOADER_FILE_NUM;if(_utils.isOldIE||(this.uploaderFile=this.uploaderFile||_react2["default"].createElement(_CPictureAttachment.FileUploader,{ref:"uploader",isMultiple:!!data.isAcceptMultipleFile,image:!1,maxFileNumber:data.isAcceptMultipleFile?_maximumFileNum-_fillLength:1,onFileUpdate:this.handleFileUpdate,onFileAdd:this.handleFileAdd,onFlushFileProcess:this.handleFlushFileProcess,onDestroy:this.handleFileUploadDestroy})),_lodash2["default"].forEach(fill,function(item,idx){_uploader=_displayEmptyFileUploader||idx+1!==_fillLength?null:_this2.uploaderFile,_utils.isOldIE&&(_uploader=_this2.uploaderFileList[item.idx]=_this2.uploaderFileList[item.idx]||_react2["default"].createElement(_CPictureAttachment.FileUploader,{isMultiple:!1,maxFileNumber:1,cpId:data.id,key:"fi"+item.idx,onFileUpdate:_this2.handleFileUpdate,image:!1,onFileAdd:_this2.handleFileAdd,onFlushFileProcess:_this2.handleFlushFileProcess,fieldId:item.idx})),_filePreviewList.push(_react2["default"].createElement(FileBlock,{key:"fp"+item.idx,item:item,idx:idx,isMobile:isMobile,maxSize:fileSizeMaximum,inputStyle:inputStyle,inputIconStyle:inputIconStyle,onUpdateFileProcessId:_this2.handleUpdateFileUploaderProcessId,onAddFile:_this2.handleAddFile,onRemoveFile:_this2.handleRemoveFile},_uploader))}),_displayEmptyFileUploader){var _nextFrId=_formStore2["default"].getPreparedFileIdx(data.id);_uploader=_utils.isOldIE?this.uploaderFileList[_nextFrId]=this.uploaderFileList[_nextFrId]||_react2["default"].createElement(_CPictureAttachment.FileUploader,{isMultiple:!1,maxFileNumber:1,cpId:data.id,key:"fi"+_nextFrId,image:!1,onFileUpdate:this.handleFileUpdate,onFileAdd:this.handleFileAdd,onFlushFileProcess:this.handleFlushFileProcess,fieldId:_nextFrId}):this.uploaderFile,_filePreviewList.push(_react2["default"].createElement(FileBlock,{key:"fp"+_nextFrId,item:null,idx:null,isMobile:isMobile,maxSize:fileSizeMaximum,inputStyle:inputStyle,inputIconStyle:inputIconStyle,onUpdateFileProcessId:this.handleUpdateFileUploaderProcessId,onAddFile:this.handleAddFile,onRemoveFile:this.handleRemoveFile},_uploader))}return _filePreviewList},render:function(){var _props6=this.props,data=_props6.data,valid=(_props6.fill,_props6.valid),componentStyle=_props6.componentStyle,style=_props6.style,itemNum=_props6.itemNum,isMobile=_props6.isMobile,cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},this.renderFilePreviewList())))}}),module.exports=exports["default"]}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
	* http://jqueryui.com
	* Includes: widget.js
	* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
!function(factory){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(22)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){/*!
	 * jQuery UI Widget 1.11.4
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/jQuery.widget/
	 */
var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{events=$._data(elem,"events"),events&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.each(function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))})),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){if(suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}});$.widget})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(22)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){"use strict";var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var form,iframe,addParamChar,initialIframeSrc=options.initialIframeSrc||"javascript:false;";return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>'),form.attr("accept-charset",options.formAcceptCharset),addParamChar=/\?/.test(options.url)?"&":"?","DELETE"===options.type?(options.url=options.url+addParamChar+"_method=DELETE",options.type="POST"):"PUT"===options.type?(options.url=options.url+addParamChar+"_method=PUT",options.type="POST"):"PATCH"===options.type&&(options.url=options.url+addParamChar+"_method=PATCH",options.type="POST"),counter+=1,iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{if(response=iframe.contents(),!response.length||!response[0].firstChild)throw new Error}catch(e){response=void 0}completeCallback(200,"success",{iframe:response}),$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form),window.setTimeout(function(){form.remove()},0)}),form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type),options.formData&&$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)}),options.fileInput&&options.fileInput.length&&"POST"===options.type&&(fileInputClones=options.fileInput.clone(),options.fileInput.after(function(index){return fileInputClones[index]}),options.paramName&&options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)}),form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),options.fileInput.removeAttr("form")),form.submit(),fileInputClones&&fileInputClones.length&&options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")).attr("form",clone.attr("form")),clone.replaceWith(input)})}),form.append(iframe).appendTo(document.body)},abort:function(){iframe&&iframe.unbind("load").prop("src",initialIframeSrc),form&&form.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(22)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){"use strict";window.XDomainRequest&&!$.support.cors&&$.ajaxTransport(function(s){if(s.crossDomain&&s.async){s.timeout&&(s.xdrTimeout=s.timeout,delete s.timeout);var xdr;return{send:function(headers,completeCallback){function callback(status,statusText,responses,responseHeaders){xdr.onload=xdr.onerror=xdr.ontimeout=$.noop,xdr=null,completeCallback(status,statusText,responses,responseHeaders)}var addParamChar=/\?/.test(s.url)?"&":"?";xdr=new XDomainRequest,"DELETE"===s.type?(s.url=s.url+addParamChar+"_method=DELETE",s.type="POST"):"PUT"===s.type?(s.url=s.url+addParamChar+"_method=PUT",s.type="POST"):"PATCH"===s.type&&(s.url=s.url+addParamChar+"_method=PATCH",s.type="POST"),xdr.open(s.type,s.url),xdr.onload=function(){callback(200,"OK",{text:xdr.responseText},"Content-Type: "+xdr.contentType)},xdr.onerror=function(){callback(404,"Not Found")},s.xdrTimeout&&(xdr.ontimeout=function(){callback(0,"timeout")},xdr.timeout=s.xdrTimeout),xdr.send(s.hasContent&&s.data||null)},abort:function(){xdr&&(xdr.onerror=$.noop(),xdr.abort())}}}})})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(22),__webpack_require__(76)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){"use strict";function getDragHandler(type){var isDragOver="dragover"===type;return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;dataTransfer&&$.inArray("Files",dataTransfer.types)!==-1&&this._trigger(type,$.Event(type,{delegatedEvent:e}))!==!1&&(e.preventDefault(),isDragOver&&(dataTransfer.dropEffect="copy"))}}$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){return message=this.messages[message]||message.toString(),context&&$.each(context,function(key,value){message=message.replace("{"+key+"}",value)}),message},formData:function(form){return form.serializeArray()},add:function(e,data){return!e.isDefaultPrevented()&&void((data.autoUpload||data.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&data.process().done(function(){data.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;return(!this.bitrate||!interval||timeDiff>interval)&&(this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8,this.loaded=loaded,this.timestamp=now),this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;return"function"===$.type(options.formData)?options.formData(options.form):$.isArray(options.formData)?options.formData:"object"===$.type(options.formData)?(formData=[],$.each(options.formData,function(name,value){formData.push({name:name,value:value})}),formData):[]},_getTotal:function(files){var total=0;return $.each(files,function(index,file){total+=file.size||1}),total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};obj._progress?$.extend(obj._progress,progress):obj._progress=progress},_initResponseObject:function(obj){var prop;if(obj._response)for(prop in obj._response)obj._response.hasOwnProperty(prop)&&delete obj._response[prop];else obj._response={}},_onProgress:function(e,data){if(e.lengthComputable){var loaded,now=Date.now?Date.now():(new Date).getTime();if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total)return;data._time=now,loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0),this._progress.loaded+=loaded-data._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval),data._progress.loaded=data.loaded=loaded,data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();xhr.upload&&($(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable,e.loaded=oe.loaded,e.total=oe.total,that._onProgress(e,options)}),options.xhr=function(){return xhr})},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var formData,that=this,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName="array"===$.type(options.paramName)?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers),options.contentRange&&(options.headers["Content-Range"]=options.contentRange),multipart&&!options.blob&&this._isInstanceOf("File",file)||(options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'),multipart?$.support.xhrFormDataFileUpload&&(options.postMessage?(formData=this._getFormData(options),options.blob?formData.push({name:paramName,value:options.blob}):$.each(options.files,function(index,file){formData.push({name:"array"===$.type(options.paramName)&&options.paramName[index]||paramName,value:file})})):(that._isInstanceOf("FormData",options.formData)?formData=options.formData:(formData=new FormData,$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})),options.blob?formData.append(paramName,options.blob,file.name):$.each(options.files,function(index,file){(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file))&&formData.append("array"===$.type(options.paramName)&&options.paramName[index]||paramName,file,file.uploadName||file.name)})),options.data=formData):(options.contentType=file.type||"application/octet-stream",options.data=options.blob||file),options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||""),options.formData=this._getFormData(options),options.redirect&&targetHost&&targetHost!==location.host&&options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})},_initDataSettings:function(options){this._isXHRUpload(options)?(this._chunkedUpload(options,!0)||(options.data||this._initXHRData(options),this._initProgressListener(options)),options.postMessage&&(options.dataType="postmessage "+(options.dataType||""))):this._initIframeSettings(options)},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;return paramName?$.isArray(paramName)||(paramName=[paramName]):(paramName=[],fileInput.each(function(){for(var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;i;)paramName.push(name),i-=1}),paramName.length||(paramName=[fileInput.prop("name")||"files[]"])),paramName},_initFormSettings:function(options){options.form&&options.form.length||(options.form=$(options.fileInput.prop("form")),options.form.length||(options.form=$(this.options.fileInput.prop("form")))),options.paramName=this._getParamName(options),options.url||(options.url=options.form.prop("action")||location.href),options.type=(options.type||"string"===$.type(options.form.prop("method"))&&options.form.prop("method")||"").toUpperCase(),"POST"!==options.type&&"PUT"!==options.type&&"PATCH"!==options.type&&(options.type="POST"),options.formAcceptCharset||(options.formAcceptCharset=options.form.attr("accept-charset"))},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);return this._initFormSettings(options),this._initDataSettings(options),options},_getDeferredState:function(deferred){return deferred.state?deferred.state():deferred.isResolved()?"resolved":deferred.isRejected()?"rejected":"pending"},_enhancePromise:function(promise){return promise.success=promise.done,promise.error=promise.fail,promise.complete=promise.always,promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();return context=context||this.options.context||promise,resolveOrReject===!0?dfd.resolveWith(context,args):resolveOrReject===!1&&dfd.rejectWith(context,args),promise.abort=dfd.promise,this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){return(resolveFunc||rejectFunc)&&(data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).then(function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():getPromise(arguments)}).then(resolveFunc,rejectFunc)),this._processQueue||getPromise([this])},data.submit=function(){return"pending"!==this.state()&&(data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&that._onSend(e,this)),this.jqXHR||that._getXHRPromise()},data.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",that._trigger("fail",null,this),that._getXHRPromise(!1))},data.state=function(){return this.jqXHR?that._getDeferredState(this.jqXHR):this._processQueue?that._getDeferredState(this._processQueue):void 0},data.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===that._getDeferredState(this._processQueue)},data.progress=function(){return this._progress},data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var jqXHR,upload,that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise();return!(!(this._isXHRUpload(options)&&slice&&(ub||mcs<fs))||options.data)&&(!!testOnly||(ub>=fs?(file.error=options.i18n("uploadedBytes"),this._getXHRPromise(!1,options.context,[null,"error",file.error])):(upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs,that._initXHRData(o),that._initProgressListener(o),jqXHR=(that._trigger("chunksend",null,o)!==!1&&$.ajax(o)||that._getXHRPromise(!1,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize,currentLoaded+o.chunkSize-o._progress.loaded&&that._onProgress($.Event("progress",{lengthComputable:!0,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o),options.uploadedBytes=o.uploadedBytes=ub,o.result=result,o.textStatus=textStatus,o.jqXHR=jqXHR,that._trigger("chunkdone",null,o),that._trigger("chunkalways",null,o),ub<fs?upload():dfd.resolveWith(o.context,[result,textStatus,jqXHR])}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR,o.textStatus=textStatus,o.errorThrown=errorThrown,that._trigger("chunkfail",null,o),that._trigger("chunkalways",null,o),dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})},this._enhancePromise(promise),promise.abort=function(){return jqXHR.abort()},upload(),promise)))},_beforeSend:function(e,data){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(data),this._initProgressObject(data),data._progress.loaded=data.loaded=data.uploadedBytes||0,data._progress.total=data.total=this._getTotal(data.files)||1,data._progress.bitrate=data.bitrate=0,this._active+=1,this._progress.loaded+=data.loaded,this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;options._progress.loaded<total&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:total,total:total}),options),response.result=options.result=result,response.textStatus=options.textStatus=textStatus,response.jqXHR=options.jqXHR=jqXHR,this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;options.recalculateProgress&&(this._progress.loaded-=options._progress.loaded,this._progress.total-=options._progress.total),response.jqXHR=options.jqXHR=jqXHR,response.textStatus=options.textStatus=textStatus,response.errorThrown=options.errorThrown=errorThrown,this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){data.submit||this._addConvenienceMethods(e,data);var jqXHR,aborted,slot,pipe,that=this,options=that._getAJAXSettings(data),send=function(){return that._sending+=1,options._bitrateTimer=new that._BitrateTimer,jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===!1)&&that._getXHRPromise(!1,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){if(that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options),that._sending-=1,that._active-=1,options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending)for(var nextSlot=that._slots.shift();nextSlot;){if("pending"===that._getDeferredState(nextSlot)){nextSlot.resolve();break}nextSlot=that._slots.shift()}0===that._active&&that._trigger("stop")})};return this._beforeSend(e,options),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(slot=$.Deferred(),this._slots.push(slot),pipe=slot.then(send)):(this._sequence=this._sequence.then(send,send),pipe=this._sequence),pipe.abort=function(){return aborted=[void 0,"abort","abort"],jqXHR?jqXHR.abort():(slot&&slot.rejectWith(options.context,aborted),send())},this._enhancePromise(pipe)):send()},_onAdd:function(e,data){var paramNameSet,paramNameSlice,fileSet,i,that=this,result=!0,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),j=0;if(!filesLength)return!1;if(limitSize&&void 0===files[0].size&&(limitSize=void 0),(options.singleFileUploads||limit||limitSize)&&this._isXHRUpload(options))if(options.singleFileUploads||limitSize||!limit)if(!options.singleFileUploads&&limitSize)for(fileSet=[],paramNameSet=[],i=0;i<filesLength;i+=1)batchSize+=files[i].size+overhead,(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize||limit&&i+1-j>=limit)&&(fileSet.push(files.slice(j,i+1)),paramNameSlice=paramName.slice(j,i+1),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice),j=i+1,batchSize=0);else paramNameSet=paramName;else for(fileSet=[],paramNameSet=[],i=0;i<filesLength;i+=limit)fileSet.push(files.slice(i,i+limit)),paramNameSlice=paramName.slice(i,i+limit),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice);else fileSet=[files],paramNameSet=[paramName];return data.originalFiles=files,$.each(fileSet||files,function(index,element){var newData=$.extend({},data);return newData.files=fileSet?element:[element],newData.paramName=paramNameSet[index],that._initResponseObject(newData),that._initProgressObject(newData),that._addConvenienceMethods(e,newData),result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData)}),result},_replaceFileInput:function(data){var input=data.fileInput,inputClone=input.clone(!0),restoreFocus=input.is(document.activeElement);data.fileInputClone=inputClone,$("<form></form>").append(inputClone)[0].reset(),input.after(inputClone).detach(),restoreFocus&&inputClone.focus(),$.cleanData(input.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(i,el){return el===input[0]?inputClone[0]:el}),input[0]===this.element[0]&&(this.element=inputClone)},_handleFileTreeEntry:function(entry,path){var dirReader,that=this,dfd=$.Deferred(),errorHandler=function(e){e&&!e.entry&&(e.entry=entry),dfd.resolve([e])},successHandler=function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},readEntries=function(){dirReader.readEntries(function(results){results.length?(entries=entries.concat(results),readEntries()):successHandler(entries)},errorHandler)},entries=[];return path=path||"",entry.isFile?entry._file?(entry._file.relativePath=path,
dfd.resolve(entry._file)):entry.file(function(file){file.relativePath=path,dfd.resolve(file)},errorHandler):entry.isDirectory?(dirReader=entry.createReader(),readEntries()):dfd.resolve([]),dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;return items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)?this._handleFileTreeEntries($.map(items,function(item){var entry;return item.webkitGetAsEntry?(entry=item.webkitGetAsEntry(),entry&&(entry._file=item.getAsFile()),entry):item.getAsEntry()})):$.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var files,value,entries=fileInput.prop("webkitEntries")||fileInput.prop("entries");if(entries&&entries.length)return this._handleFileTreeEntries(entries);if(files=$.makeArray(fileInput.prop("files")),files.length)void 0===files[0].name&&files[0].fileName&&$.each(files,function(index,file){file.name=file.fileName,file.size=file.fileSize});else{if(value=fileInput.prop("value"),!value)return $.Deferred().resolve([]).promise();files=[{name:value.replace(/^.*\\/,"")}]}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){return fileInput instanceof $&&1!==fileInput.length?$.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(fileInput)},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that.options.replaceFileInput&&that._replaceFileInput(data),that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};items&&items.length&&($.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();file&&data.files.push(file)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==!1&&this._onAdd(e,data))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};dataTransfer&&dataTransfer.files&&dataTransfer.files.length&&(e.preventDefault(),this._getDroppedFiles(dataTransfer).always(function(files){data.files=files,that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)}))},_onDragOver:getDragHandler("dragover"),_onDragEnter:getDragHandler("dragenter"),_onDragLeave:getDragHandler("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=$.inArray(key,this._specialOptions)!==-1;reinit&&this._destroyEventHandlers(),this._super(key,value),reinit&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var options=this.options;void 0===options.fileInput?options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):options.fileInput instanceof $||(options.fileInput=$(options.fileInput)),options.dropZone instanceof $||(options.dropZone=$(options.dropZone)),options.pasteZone instanceof $||(options.pasteZone=$(options.pasteZone))},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();return parts.shift(),new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return"url"!==key&&"string"===$.type(value)&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options,data=this.element.data();$.each(this.element[0].attributes,function(index,attr){var value,key=attr.name.toLowerCase();/^data-/.test(key)&&(key=key.slice(5).replace(/-[a-z]/g,function(str){return str.charAt(1).toUpperCase()}),value=data[key],that._isRegExpOption(key,value)&&(value=that._getRegExp(value)),options[key]=value)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;data&&!this.options.disabled&&(data.fileInput&&!data.files?this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that._onAdd(null,data)}):(data.files=$.makeArray(data.files),this._onAdd(null,data)))},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var jqXHR,aborted,that=this,dfd=$.Deferred(),promise=dfd.promise();return promise.abort=function(){return aborted=!0,jqXHR?jqXHR.abort():(dfd.reject(null,"abort","abort"),promise)},this._getFileInputFiles(data.fileInput).always(function(files){if(!aborted){if(!files.length)return void dfd.reject();data.files=files,jqXHR=that._onSend(null,data),jqXHR.then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})}}),this._enhancePromise(promise)}if(data.files=$.makeArray(data.files),data.files.length)return this._onSend(null,data)}return this._getXHRPromise(!1,data&&data.context)}})})},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _arrayBufferToBase64(buffer){for(var binary="",bytes=new Uint8Array(buffer),len=bytes.byteLength,i=0;i<len;i++)binary+=String.fromCharCode(bytes[i]);return window.btoa(binary)}function _getImageData(fileInfo){return new Promise(function(resolve,reject){var setTimeCheck=(new Date).getTime(),fileReader=new FileReader;fileReader.onloadend=function(e){if(fileReader.error)return void resolve({e:e,base64img:null,value:null});if((new Date).getTime()-setTimeCheck>2e3)return void resolve({e:e,base64img:null,value:null});var base64img="data:"+fileInfo.type+";base64,"+_arrayBufferToBase64(fileReader.result),scanner=new DataView(fileReader.result),idx=0,value=1;if(fileReader.result.length<2||65496!=scanner.getUint16(idx))return void resolve({e:e,base64img:base64img,value:value});idx+=2;for(var maxBytes=scanner.byteLength;idx<maxBytes-2;){var uint16=scanner.getUint16(idx);switch(idx+=2,uint16){case 65505:var exifLength=scanner.getUint16(idx);maxBytes=exifLength-idx,idx+=2;break;case 274:value=scanner.getUint16(idx+6,!1),maxBytes=0}}resolve({e:e,base64img:base64img,value:value})};try{fileReader.readAsArrayBuffer(fileInfo.file)}catch(e){reject()}})}function _fixUnknownFileType(file){return new Promise(function(resolve,reject){return file.type?file.type:void!function(){var fileReader=new FileReader;fileReader.onloadend=function(e){for(var arr=new Uint8Array(fileReader.result).subarray(0,4),header="",i=0,arrLen=arr.length;i<arrLen;i++)header+=arr[i].toString(16);var fileType=null;switch(header){case"89504e47":fileType="image/png";break;case"47494638":fileType="image/gif";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":fileType="image/jpeg"}resolve(fileType)};try{fileReader.readAsArrayBuffer(fileData)}catch(e){resolve(null)}}()})}function fileSizeBeauty(bytes){if(null==bytes)return null;for(var unitList=_UNIT_LIST=_UNIT_LIST||["B","KB","MB","GB"],unitCursor=0,_beauty=bytes;_beauty>1024;)unitCursor++,_beauty/=1024;return _beauty.toFixed(2)+unitList[unitCursor]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileUploader=exports.fileSizeBeauty=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_utils=__webpack_require__(30),_tools=__webpack_require__(33),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger);__webpack_require__(76),__webpack_require__(77),__webpack_require__(78),__webpack_require__(79),global.jQuery=global.$=_jquery2["default"];var _UNIT_LIST=null,rotation={1:"rotate(0deg)",3:"rotate(180deg)",6:"rotate(90deg)",8:"rotate(270deg)"},FileUploader=_react2["default"].createClass({displayName:"FileUploader",getInitialState:function(){return this.maxFileNumber=this.props.maxFileNumber,{frId:null,isMultiple:this.props.isMultiple,maxFileNumber:this.props.maxFileNumber}},getDefaultProps:function(){return{image:!0}},shouldComponentUpdate:function(nextProps,nextState){return!0},componentDidMount:function(){if(!_utils.isOldIE){var $fileUploader=(0,_jquery2["default"])(this.refs.fileUploader);$fileUploader.fileupload({replaceFileInput:!1,add:this._addFile,singleFileUploads:!1,dropZone:$fileUploader,drop:function(e){e.stopPropagation()}}).on("click",function(e){e.stopPropagation()})}},_addFile:function(e,data){var _this=this,$fileUploader=(0,_jquery2["default"])(this.refs.fileUploader),_state=this.state,maxFileNumber=_state.maxFileNumber,frId=_state.frId,files=data.files,_processFileNum=Math.min(maxFileNumber,files.length),_processed=0,_processor=[];_MGDebugger2["default"].log("PFN --------- ",_processFileNum,maxFileNumber,_processed,frId),_lodash2["default"].forEach(files,function(file){return!(_processed>=_processFileNum)&&(_processor.push(new Promise(function(resolve){_this.uploadFile(file,0===_processed?frId:null,resolve)})),void _processed++)}),this._promise=Promise.all(_processor).then(function(res){return _this.props.onFlushFileProcess(),_this._promise=null,$fileUploader.val(""),!0})},componentWillUnmount:function(){_utils.isOldIE||(this.props.onDestroy&&this.props.onDestroy(),(0,_jquery2["default"])(this.refs.fileUploader).fileupload("destroy").off("click"))},doSetFrId:function(id){_utils.isOldIE||(_MGDebugger2["default"].log("set FRID ..",id),this.setState({frId:id}))},doUpdateInputInfo:function(_ref){var maxFileNumber=_ref.maxFileNumber,isMultiple=_ref.isMultiple;_utils.isOldIE||this.setState({maxFileNumber:maxFileNumber,isMultiple:isMultiple})},doUploadTigger:function(){_utils.isOldIE||(0,_jquery2["default"])(this.refs.fileUploader).trigger("click")},uploadFile:function(f,id,resolve){var _this2=this,_fileInfo={file:f,name:f.name,type:f.type,size:f.size},_processor=Promise.resolve(!0);this.props.image?(!_fileInfo.type&&window.FileReader&&window.Blob&&(_processor=_fixUnknownFileType(f).then(function(fileType){return _fileInfo.type=fileType,fileType&&(_fileInfo.name=_fileInfo.name+fileType.split("/")[1]),!0})),_processor.then(function(){var _URL=window.URL||window.webkitURL;return new Promise(function(_resolve){if(_URL)try{var _img=new Image;_img.src=_URL.createObjectURL(f),_img.onload=function(){_resolve({width:this.width,height:this.height})},_img.onerror=function(){_resolve({width:0,height:0})}}catch(e){_resolve({width:0,height:0})}else _resolve({width:0,height:0})})}).then(function(size){_fileInfo.resolution=size,id?_this2.props.onFileUpdate(_fileInfo,id):_this2.props.onFileAdd(_fileInfo),resolve(!0)})):_processor.then(function(){id?_this2.props.onFileUpdate(_fileInfo,id):_this2.props.onFileAdd(_fileInfo),resolve(!0)})},handleStop:function(e){e.stopPropagation()},handleInputChange:function(e){if(_utils.isOldIE){var f=e.target.value,_fileInfo={file:!0,name:_lodash2["default"].last(f.split(/[\\\/]/g)),type:null,size:null};null!=this.props.fieldId&&this.props.fieldId!==_formStore2["default"].getPreparedFileIdx(this.props.cpId)?this.props.onFileUpdate(_fileInfo,this.props.fieldId):this.props.onFileAdd(_fileInfo),this.props.onFlushFileProcess()}},render:function(){var props=this.props,_props={multiple:props.isMultiple,accept:props.fileTypeAccept,size:props.isMultiple?null:1};return _react2["default"].createElement("input",_extends({className:"fbc_ufInput",type:"file",ref:"fileUploader"},_props,{"data-idx":_utils.isOldIE?this.props.fieldId:null,onClick:this.handleStop,onChange:this.handleInputChange}))}}),FileBlock=_react2["default"].createClass({displayName:"FileBlock",getInitialState:function(){return{}},shouldComponentUpdate:function(nextProps,nextState){return nextState.previewImg!==this.state.previewImg||nextState.previewImgOrientation!==this.state.previewImgOrientation||(!(0,_tools.shallowEqual)(nextProps.item||{},this.props.item||{})||!(0,_tools.shallowEqual)(nextProps.children||{},this.props.children||{}))},componentDidMount:function(){var _this3=this;_utils.isOldIE||!this.props.item||this.props.item.error?this.setState({previewImg:null,previewImgOrientation:null}):!function(){var self=_this3;_getImageData({file:_this3.props.item.fileData,type:_this3.props.item.type}).then(function(_ref2){var base64img=(_ref2.e,_ref2.base64img),value=_ref2.value;self.setState({previewImg:base64img,previewImgOrientation:rotation[value||1]})})["catch"](function(){self.setState({previewImg:null,previewImgOrientation:null})})}(),!_utils.isOldIE&&_react2["default"].Children.count(this.props.children)&&this.props.onUpdateFileProcessId&&this.props.onUpdateFileProcessId((this.props.item||{}).idx||null)},componentWillUpdate:function(nextProps){var _this4=this;_utils.isOldIE||!nextProps.item||nextProps.item.name===(this.props.item||{}).name||nextProps.item.error?(_utils.isOldIE||!nextProps.item||nextProps.item&&nextProps.item.error)&&this.setState({previewImg:null,previewImgOrientation:null}):!function(){var self=_this4;_getImageData({file:nextProps.item.fileData,type:nextProps.item.type}).then(function(_ref3){var base64img=(_ref3.e,_ref3.base64img),value=_ref3.value;self.setState({previewImg:base64img,previewImgOrientation:rotation[value||1]})})["catch"](function(){self.setState({previewImg:null,previewImgOrientation:null})})}()},componentDidUpdate:function(prevProps){if(!_utils.isOldIE&&_react2["default"].Children.count(this.props.children)){var _currentId=(this.props.item||{}).idx||null;((prevProps.item||{}).idx||null!==_currentId)&&this.props.onUpdateFileProcessId&&this.props.onUpdateFileProcessId((this.props.item||{}).idx||null)}},handleRemoveFile:function(e){e.stopPropagation(),this.props.onRemoveFile(this.props.item.idx)},handleSetRawId:function(){this.props.onUpdateFileProcessId&&this.props.onUpdateFileProcessId((this.props.item||{}).idx||null)},handleAddFile:function(){_utils.isOldIE||_react2["default"].Children.count(this.props.children)||this.props.onAddFile((this.props.item||{}).idx||null,!_react2["default"].Children.count(this.props.children))},getErrorInfo:function(){var _props2=this.props,item=_props2.item,maxSize=_props2.maxSize;if(item&&item.error){var errInfo=_config.lang["cUploadFailed"+item.error];return"ILLEGAL_FILE_SIZE"===item.error&&(errInfo=errInfo({fileSize:maxSize})),errInfo}return null},render:function(){var _props3=this.props,item=_props3.item,isMobile=(_props3.idx,_props3.isMobile),maxSize=_props3.maxSize,children=_props3.children,_state2=this.state,previewImg=_state2.previewImg,previewImgOrientation=_state2.previewImgOrientation,_previewImage=null,_mobileRemoveFile=null,_removeFile=null,_placeholderIcon=null,_placeholderContent=null;if(item&&!item.error)isMobile?(_mobileRemoveFile=this._c_mobileRemoveFile=this._c_mobileRemoveFile||_react2["default"].createElement("div",{className:"fbc_pafRemoveWrapper"},_react2["default"].createElement("a",{className:"fbc_pafRemove",title:_config.lang.cRemoveFile,onClick:this.handleRemoveFile},_config.lang.cRemoveFile)),_previewImage=_react2["default"].createElement("div",{className:"fbc_paImgPreview"},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_selectedImage",{fbc_selectedImagePreview:previewImg}),style:{backgroundImage:"url("+(previewImg||"./images/form/IE8_ImgUploadSuccess.png")+")",transform:previewImgOrientation}}))):(_removeFile=this._c_removeFile=this._c_removeFile||_react2["default"].createElement("a",{className:"fbc_pafRemove iconfont",title:_config.lang.cRemoveFile,onClick:this.handleRemoveFile},String.fromCharCode(58982)),_previewImage=_react2["default"].createElement("div",{className:"fbc_paImgPreview"},_removeFile,_react2["default"].createElement("span",{className:"fbc_reUploadBtn"},_config.lang.cPicAttachmentReload),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_selectedImage",{fbc_selectedImagePreview:previewImg}),style:{backgroundImage:"url("+(previewImg||"./images/form/IE8_ImgUploadSuccess.png")+")",transform:previewImgOrientation}})));else{var _hasError=item&&item.error;_placeholderIcon=_react2["default"].createElement("div",{className:"fbc_paImgPlaceholder"},_react2["default"].createElement("i",{className:"iconfont fbc_paImgState"},String.fromCharCode(_hasError?58938:58997))),_placeholderContent=_react2["default"].createElement("div",{className:"fbc_paContentInfo"},_react2["default"].createElement("p",{className:"fbc_paAddTitle"},_config.lang.cPicAttachmentAddTitle),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_paAddTips",{error:_hasError})},_hasError?this.getErrorInfo():_config.lang.cPicAttachmentAddTips({max:maxSize})))}return _react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_paItem",{add:!item,error:item&&item.error,selected:item}),onClick:this.handleAddFile,onMouseDown:this.handleSetRawId,onTouchStart:this.handleSetRawId},_react2["default"].createElement("div",{className:"fbc_paItem_wrapper",key:"itemWrapper"},_previewImage,_placeholderIcon,_placeholderContent,children),_mobileRemoveFile)}}),_MAXIMUM_UPLOADER_FILE_NUM=1/0;exports["default"]=_react2["default"].createClass({displayName:"Component(PictureAttachment)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return this.uploaderFileList={},this.fileProcessContent={},{tipHint:!1}},componentWillUpdate:function(nextProps,nextState){var valid=nextProps.valid;valid&&valid.indexOf("tipHint")>-1&&this.props.valid.indexOf("tipHint")===-1&&!nextState.tipHint&&this.setState({tipHint:!0})},componentDidUpdate:function(){var _this5=this;if(!_utils.isOldIE){var _props4=this.props,data=_props4.data,fill=_props4.fill,_maximumFileNum=data.fileNumber?+data.fileNumber:_MAXIMUM_UPLOADER_FILE_NUM,_fillLength=fill?fill.length:0,_maxNum=Math.max(data.isAcceptMultipleFile?_maximumFileNum-_fillLength:1,1);this.refs.uploader&&this.refs.uploader.doUpdateInputInfo({maxFileNumber:_maxNum,isMultiple:_maxNum>1})}this.state.tipHint&&!this.tipHintTimer&&(this.tipHintTimer=setTimeout(function(){_this5.setState({tipHint:!1}),_this5.tipHintTimer=null},1200))},componentWillUnmount:function(){clearTimeout(this.tipHintTimer)},handleUpdateFileUploaderProcessId:function(id){this.refs.uploader.doSetFrId(id)},handleAddFile:function(id,needTrigger){this.refs.uploader.doSetFrId(id),needTrigger&&this.refs.uploader.doUploadTigger()},handleRemoveFile:function(id){_formStore2["default"].dispatch({type:"removeFile",id:this.props.data.id,idx:id})},handleFileAdd:function(fileInfo){this.fileProcessContent.add=[].concat(this.fileProcessContent.add||[],fileInfo)},handleFileUpdate:function(fileInfo,id){this.fileProcessContent.update=[].concat(this.fileProcessContent.update||[],{id:id,fileInfo:fileInfo})},handleFlushFileProcess:function(){var _fp=this.fileProcessContent;this.fileProcessContent={},_formStore2["default"].dispatch({type:"fileProcessFlush",isImage:!0,id:this.props.data.id,processData:_fp})},handleFileUploadDestroy:function(){this.uploaderFile=null},renderTips:function(){var _props5=this.props,data=_props5.data,valid=(_props5.fill,_props5.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,wrapperError=this.state.tipHint,isErrorTip=(valid||[]).indexOf("tip")>-1,picResolution=[];if(data.isLimitPicResolution){if(data.picMinWidth||data.picMaxWidth){var widthVal="";data.picMinWidth&&data.picMaxWidth?widthVal=data.picMinWidth+"px~"+data.picMaxWidth+"px":data.picMinWidth?widthVal=">"+data.picMinWidth+"px":data.picMaxWidth&&(widthVal="<"+data.picMaxWidth+"px"),picResolution.push(_config.lang.cPicAttachmentTipsWidth({value:widthVal}))}if(data.picMinHeight||data.picMaxHeight){var heightVal="";data.picMinHeight&&data.picMaxHeight?heightVal=data.picMinHeight+"px~"+data.picMaxHeight+"px":data.picMinHeight?heightVal=">"+data.picMinHeight+"px":data.picMaxHeight&&(heightVal="<"+data.picMaxHeight+"px"),picResolution.push(_config.lang.cPicAttachmentTipsHeight({value:heightVal}))}}return picResolution=picResolution.join(", "),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},_config.lang.cPicAttachmentTips({resolution:picResolution?", "+picResolution:""}))},renderFilePreviewList:function(){var _this6=this,_props6=this.props,data=_props6.data,fill=_props6.fill,isMobile=(_props6.valid,_props6.isMobile),fileSizeMaximum=data.isLimitFileSize&&data.fileSize?data.fileSize:500,_uploader=null,_displayEmptyFileUploader=!fill||_lodash2["default"].isEmpty(fill);data.isAcceptMultipleFile&&(_displayEmptyFileUploader=fill&&fill.length&&fill.length<(data.fileNumber?+data.fileNumber:_MAXIMUM_UPLOADER_FILE_NUM)||!fill||_lodash2["default"].isEmpty(fill));var _filePreviewList=[],_fillLength=fill?fill.length:0,_maximumFileNum=data.fileNumber?+data.fileNumber:_MAXIMUM_UPLOADER_FILE_NUM;if(_utils.isOldIE||(this.uploaderFile=this.uploaderFile||_react2["default"].createElement(FileUploader,{ref:"uploader",isMultiple:!!data.isAcceptMultipleFile,maxFileNumber:data.isAcceptMultipleFile?_maximumFileNum-_fillLength:1,onFileUpdate:this.handleFileUpdate,onFileAdd:this.handleFileAdd,onFlushFileProcess:this.handleFlushFileProcess,fileTypeAccept:isMobile&&!window.IN_WECHAT?"image/bmp,image/jpeg,image/png,image/gif;capture=camera":null,onDestroy:this.handleFileUploadDestroy})),_lodash2["default"].forEach(fill,function(item,idx){_uploader=_displayEmptyFileUploader||idx+1!==_fillLength?null:_this6.uploaderFile,_utils.isOldIE&&(_uploader=_this6.uploaderFileList[item.idx]=_this6.uploaderFileList[item.idx]||_react2["default"].createElement(FileUploader,{isMultiple:!1,maxFileNumber:1,cpId:data.id,key:"fi"+item.idx,onFileUpdate:_this6.handleFileUpdate,onFileAdd:_this6.handleFileAdd,onFlushFileProcess:_this6.handleFlushFileProcess,fieldId:item.idx})),_filePreviewList.push(_react2["default"].createElement(FileBlock,{key:"fp"+item.idx,item:item,idx:idx,isMobile:isMobile,maxSize:fileSizeMaximum,onUpdateFileProcessId:_this6.handleUpdateFileUploaderProcessId,onAddFile:_this6.handleAddFile,onRemoveFile:_this6.handleRemoveFile},_uploader))}),_displayEmptyFileUploader){var _nextFrId=_formStore2["default"].getPreparedFileIdx(data.id);_uploader=_utils.isOldIE?this.uploaderFileList[_nextFrId]=this.uploaderFileList[_nextFrId]||_react2["default"].createElement(FileUploader,{isMultiple:!1,maxFileNumber:1,cpId:data.id,key:"fi"+_nextFrId,onFileUpdate:this.handleFileUpdate,onFileAdd:this.handleFileAdd,onFlushFileProcess:this.handleFlushFileProcess,fieldId:_nextFrId}):this.uploaderFile,_filePreviewList.push(_react2["default"].createElement(FileBlock,{key:"fp"+_nextFrId,item:null,idx:null,isMobile:isMobile,maxSize:fileSizeMaximum,onUpdateFileProcessId:this.handleUpdateFileUploaderProcessId,onAddFile:this.handleAddFile,onRemoveFile:this.handleRemoveFile},_uploader))}return _filePreviewList},render:function(){var _props7=this.props,data=_props7.data,valid=(_props7.fill,_props7.valid),componentStyle=_props7.componentStyle,style=_props7.style,itemNum=_props7.itemNum,isMobile=_props7.isMobile,cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("ul",{className:"fbc_pictureAttachment"},this.renderFilePreviewList(),_react2["default"].createElement("li",{className:"clearB"}))))}}),exports.fileSizeBeauty=fileSizeBeauty,exports.FileUploader=FileUploader}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_CRateGenerator=__webpack_require__(82),_CRateGenerator2=_interopRequireDefault(_CRateGenerator),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Rate)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(i,e){_formStore2["default"].dispatch({type:"setRate",id:this.props.data.id,value:i})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,optionStyle=_formStyle.optionStyle,cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:"fbc_content"},_react2["default"].createElement(_CRateGenerator2["default"],{data:data,themeColor:style.themeColor,tipsStyle:tipsStyle,optionStyle:optionStyle,value:fill,onChange:this.handleChange,isMobile:isMobile}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_MGColor=(_interopRequireDefault(_formStore),__webpack_require__(50)),_MGColor2=_interopRequireDefault(_MGColor),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(RateGenerator)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return{hover:0}},handleOnMouseOver:function(i,e){this.setState({hover:i})},handleOnMouseOut:function(i,e){this.setState({hover:0})},handleClick:function(i,e){this.props.onChange&&this.props.onChange(i,e)},renderRateItemMobile:function(info){var _props=this.props,optionStyle=_props.optionStyle,themeColor=_props.themeColor,_props$data=this.props.data,rateMax=_props$data.rateMax,rateIcon=_props$data.rateIcon,selected=this.props.value?+this.props.value:0,isHeat=4==rateIcon,isNumber=6==rateIcon,_maxRateWidth=Math.min(10,rateMax),_classNames={fbc_rateItem:!isHeat&&!isNumber,fbc_heatItem:isHeat,selected:info.idx<=selected,fbc_numItem:isNumber,numSelected:info.idx===selected},_inner=null;if(isHeat){var _heatStyle={};info.idx<=selected&&(_heatStyle.backgroundColor=info.heatColorList[info.idx-1]||"#000"),_inner=_react2["default"].createElement("span",{className:(0,_classnames2["default"])(_classNames),key:"rateItem"+info.idx},_react2["default"].createElement("span",{style:_heatStyle}," "))}else{var _style={};if(isNumber&&(_style=_lodash2["default"].assign({},optionStyle),info.idx===selected)){var bgColorObject=_MGColor2["default"].convertToRGBObj.fromHex(themeColor||"#2D8FD9"),isDarkBG=_MGColor2["default"].colorGrayLevel(bgColorObject.r,bgColorObject.g,bgColorObject.b)<170;_style.color=isDarkBG?"#fff":"#000",_style.backgroundColor=themeColor||"#2D8FD9"}_inner=_react2["default"].createElement("span",{className:"fbc_rateItemBorder"},_react2["default"].createElement("span",{className:(0,_classnames2["default"])(_classNames,"full-star"),style:_style},isNumber?info.idx:" "))}return _react2["default"].createElement("span",{className:"fbc_rateItemWrapper",key:"rateItem"+info.idx,style:{width:(1/_maxRateWidth*100||20)+"%"},onClick:this.handleClick.bind(this,info.idx)},_inner)},renderRateItem:function(info){var hover=this.state.hover,_props2=this.props,optionStyle=_props2.optionStyle,themeColor=_props2.themeColor,_props$data2=this.props.data,rateMax=_props$data2.rateMax,rateIcon=_props$data2.rateIcon,isAllowHalf=_props$data2.isAllowHalf,selected=this.props.value?+this.props.value:0,prevSelected=!1,isStar=1==rateIcon||void 0==rateIcon,isHeat=4==rateIcon,isNumber=6==rateIcon;hover>0&&!this.props.isMobile&&(prevSelected=selected,selected=hover);var _classNames={fbc_rateItem:!isHeat&&!isNumber,fbc_heatItem:isHeat,selected:info.idx<=selected,preSelected:!!prevSelected&&info.idx<=prevSelected,fbc_numItem:isNumber,numSelected:info.idx===selected},_propsEvent={onMouseOver:this.handleOnMouseOver.bind(this,info.idx),onMouseOut:this.handleOnMouseOut.bind(this,info.idx),onClick:this.handleClick.bind(this,info.idx)};if(isStar){var _extClassName={selected:isAllowHalf?info.idx-.5<=selected:info.idx<=selected,preSelected:!!prevSelected&&(isAllowHalf?info.idx-.5<=prevSelected:info.idx<=prevSelected)
},_extPropsEvent=_lodash2["default"].assign({},_propsEvent);return isAllowHalf&&(_extPropsEvent.onMouseOver=this.handleOnMouseOver.bind(this,info.idx-.5),_extPropsEvent.onMouseOut=this.handleOnMouseOut.bind(this,info.idx-.5),_extPropsEvent.onClick=this.handleClick.bind(this,info.idx-.5)),_react2["default"].createElement("div",{className:"fbc_rateItemWrapper",key:"rateItem"+info.idx},_react2["default"].createElement("span",_extends({className:(0,_classnames2["default"])(_classNames,"left-half",_extClassName)},_extPropsEvent,{key:"rateItem"+info.idx-.5})," "),_react2["default"].createElement("span",_extends({className:(0,_classnames2["default"])(_classNames,"right-half")},_propsEvent,{key:"rateItem"+info.idx})," "))}if(isHeat){var _heatStyle={};return info.idx<=selected?_heatStyle.backgroundColor=info.heatColorList[info.idx-1]||"#000":info.idx<=prevSelected&&(_heatStyle.backgroundColor=info.heatColorList[info.idx-1]||"#000"),_react2["default"].createElement("span",_extends({className:(0,_classnames2["default"])(_classNames)},_propsEvent,{key:"rateItem"+info.idx,style:{width:(1/rateMax*100||20)+"%"}}),_react2["default"].createElement("span",{style:_heatStyle}," "))}var _style={};if(isNumber&&(_style=_lodash2["default"].assign({},optionStyle),info.idx===selected||info.idx===prevSelected)){var bgColorObject=_MGColor2["default"].convertToRGBObj.fromHex(themeColor||"#2D8FD9"),isDarkBG=_MGColor2["default"].colorGrayLevel(bgColorObject.r,bgColorObject.g,bgColorObject.b)<170;_style.color=isDarkBG?"#fff":"#000",_style.backgroundColor=themeColor||"#2D8FD9"}return _react2["default"].createElement("span",_extends({className:(0,_classnames2["default"])("fbc_rateItemWrapper",_classNames)},_propsEvent,{key:"rateItem"+info.idx,style:_style}),isNumber?info.idx:" ")},render:function(){var _props3=this.props,data=_props3.data,tipsStyle=_props3.tipsStyle,isMobile=_props3.isMobile,rateIcon=data.rateIcon,rateMax=data.rateMax,heatBarColorForm=data.heatBarColorForm,heatBarColorTo=data.heatBarColorTo,isShowTips=data.isShowTips,rateTipsLeft=data.rateTipsLeft,rateTipsMiddle=data.rateTipsMiddle,rateTipsRight=data.rateTipsRight,isStar=1==rateIcon||void 0==rateIcon,isHeat=4==rateIcon,isNumber=6==rateIcon,_widthPre=isMobile?10:data.cpWidth||8,_rateClass={fbc_rateGroup:!0,star:isStar,heart:2==rateIcon,thumb:3==rateIcon,rose:5==rateIcon,heatBar:isHeat,number:isNumber,fbc_widthCp:isHeat},heatColor=[];isHeat&&(heatColor=_MGColor2["default"].gradientColor(heatBarColorForm||"#f5d964",heatBarColorTo||"#e94c3c",rateMax||5));for(var _rateList=[],i=0;i<(rateMax||5);i++)_rateList.push((isMobile?this.renderRateItemMobile:this.renderRateItem)({idx:i+1,heatColorList:heatColor}));var _rateContent=_react2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_rateContent:!isHeat,fbc_heatBar:isHeat}),key:"rateContent"},_rateList,_react2["default"].createElement("div",{className:"clearB"})),_rateTips=null;isShowTips&&(rateTipsLeft||rateTipsMiddle||rateTipsRight)&&(_rateTips=_react2["default"].createElement("p",{className:"fbc_rateTips",key:"rateTips",style:tipsStyle},_react2["default"].createElement("span",{className:"fbc_rateTipsText left"},rateTipsLeft),_react2["default"].createElement("span",{className:"fbc_rateTipsText middle"},rateTipsMiddle),_react2["default"].createElement("span",{className:"fbc_rateTipsText right"},rateTipsRight)));var _rateMain=[_rateTips,_rateContent];return 2==data.tipsPosition&&(_rateMain=[_rateContent,_rateTips]),_react2["default"].createElement("div",{className:(0,_classnames2["default"])(_rateClass),style:isHeat||isMobile?{width:10*_widthPre+"%"}:{}},_rateMain)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(59),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_CRateGenerator=__webpack_require__(82),_CRateGenerator2=_interopRequireDefault(_CRateGenerator),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Tabular)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],componentWillMount:function(){this.renderItems=this.tabularItemFactory()},handleChange:function(qId,opId,d){var data=this.props.data,_d={type:"setTabularValue",id:data.id,componentType:data.tabularType?+data.tabularType:1,qId:qId};switch(+data.tabularType){case 3:_d.value=d.target.value;break;case 4:var _value=this.props.fill&&this.props.fill[qId];_value===d?_d.value=null:_d.value=d;break;case 1:case 2:default:_d.value=opId}_formStore2["default"].dispatch(_d)},tabularItemFactory:function(){var data=this.props.data,isMobile=this.props.isMobile,self=this,isCheckbox=!1,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,inputStyle=_formStyle.inputStyle,textAreaStyle=_formStyle.textAreaStyle,tipsStyle=_formStyle.tipsStyle,_ret=function(){switch(+data.tabularType){case 3:return{v:function(qIdInfo){var fill=self.props.fill,Component="input",_style=inputStyle;1==data.isAllowMulti&&(Component="textarea",_style=textAreaStyle);var _value=fill&&fill[qIdInfo];return _value||(_value=""),_react2["default"].createElement("td",{key:"td",className:"fbc_tContent"},_react2["default"].createElement(_FCTextBox2["default"],{component:Component,type:"text",className:"fbc_tabularInput "+Component,style:_style,onChange:this.handleChange.bind(self,qIdInfo,null),value:_value}))}};case 4:return{v:function(qIdInfo){var fill=this.props.fill,_value=fill&&fill[qIdInfo];_value||(_value=0);var _d=self.props.data;return _react2["default"].createElement("td",{key:"td",className:"fbc_tContent"},_react2["default"].createElement(_CRateGenerator2["default"],{data:_d,isMobile:isMobile,value:_value,themeColor:this.props.style.themeColor,tipsStyle:tipsStyle,optionStyle:optionStyle,onChange:this.handleChange.bind(self,qIdInfo,null)}))}};case 2:isCheckbox=!0;case 1:default:var CommonDom=_svgBasicComponent.CommonRadio;return isCheckbox&&(CommonDom=_svgBasicComponent.CommonCheckbox),{v:function(qIdInfo){var _this=this,_res=[],fill=self.props.fill;return _lodash2["default"].forEach(data.options,function(option,idx){var _sId=idx;if(!(data.ql2sMapping&&data.ql2sMapping[qIdInfo]&&data.ql2sMapping[qIdInfo][option.id]))return void console.error("component tabularOPT ID LOST ->."+option.id+" : "+JSON.stringify(option));_sId=data.ql2sMapping[qIdInfo][option.id];var _className={fbc_optionVal:!0,radio:!isCheckbox,checkbox:isCheckbox,checked:fill&&(fill[qIdInfo]||[]).indexOf(_sId)>-1};_res.push(_react2["default"].createElement("td",{key:"td"+idx},_react2["default"].createElement("p",{className:(0,_classnames2["default"])(_className),style:_lodash2["default"].assign({height:optionStyle.minHeight},optionStyle),onClick:_this.handleChange.bind(self,qIdInfo,_sId)},_react2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:fill&&(fill[qIdInfo]||[]).indexOf(_sId)>-1,style:{padding:1,paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}))))}),_res}}}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v},render:function(){var _this2=this,_props=this.props,data=_props.data,valid=(_props.fill,_props.valid),componentStyle=_props.componentStyle,questionWidth=data.questionWidth||25,_formStyle2=this.formStyle(),optionStyle=_formStyle2.optionStyle,_tHeader=null;!function(){switch(+data.tabularType){case 3:case 4:_tHeader=_react2["default"].createElement("th",{key:"th",style:{width:100-questionWidth+"%"}},_react2["default"].createElement("p",{className:"fbc_tabularTitle",style:optionStyle},data.tipText||_config.lang.cFillingPlaceholder));break;default:var optionLength=(data.options||[]).length;_tHeader=_lodash2["default"].map(data.options,function(option,idx){return _react2["default"].createElement("th",{key:"th"+idx,style:{width:(100-questionWidth)/optionLength+"%"}},_react2["default"].createElement("p",{className:"fbc_tabularTitle",style:optionStyle},option.value))})}}();var _tBody=_lodash2["default"].map(data.questions,function(question,idx){return _react2["default"].createElement("tr",{key:"tr"+idx},_react2["default"].createElement("td",{key:"trTitle",className:"fbc_tTitleLeft"},_react2["default"].createElement("p",{className:"fbc_tabularTitle",style:optionStyle},question.value)),_this2.renderItems(question.id))});return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_content"},_react2["default"].createElement("table",{className:"fbc_tabular"},_react2["default"].createElement("tbody",null,_react2["default"].createElement("tr",null,_react2["default"].createElement("th",{style:{width:questionWidth+"%"}}," "),_tHeader),_tBody))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(59),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_CRateGenerator=__webpack_require__(82),_CRateGenerator2=_interopRequireDefault(_CRateGenerator),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Tabular.Mobile)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],componentWillMount:function(){this.renderItems=this.tabularItemFactory()},handleChange:function(qId,opId,d){var data=this.props.data,_d={type:"setTabularValue",id:data.id,componentType:data.tabularType?+data.tabularType:1,qId:qId};switch(+data.tabularType){case 3:_d.value=d.target.value;break;case 4:var _value=this.props.fill&&this.props.fill[qId];_value===d?_d.value=null:_d.value=d;break;case 1:case 2:default:_d.value=opId}_formStore2["default"].dispatch(_d)},tabularItemFactory:function(){var _props=this.props,data=_props.data,isMobile=_props.isMobile,self=this,isCheckbox=!1,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,inputStyle=_formStyle.inputStyle,textAreaStyle=_formStyle.textAreaStyle,tipsStyle=_formStyle.tipsStyle,_ret=function(){switch(+data.tabularType){case 3:return{v:function(qId,inputTip){var fill=self.props.fill,Component="input",_style=inputStyle;1==data.isAllowMulti&&(Component="textarea",_style=textAreaStyle);var _value=fill&&fill[qId];return _value||(_value=""),_react2["default"].createElement("div",{className:"fbc_tContent",key:"que"},_react2["default"].createElement(_FCTextBox2["default"],{component:Component,type:"text",className:"fbc_tabularInput "+Component,placeholder:inputTip,style:_style,onChange:this.handleChange.bind(self,qId,null),value:_value}))}};case 4:return{v:function(qId){var fill=this.props.fill,_value=fill&&fill[qId];_value||(_value=0);var _d=self.props.data;return _react2["default"].createElement("div",{key:"que",className:"fbc_tContent"},_react2["default"].createElement(_CRateGenerator2["default"],{data:_d,isMobile:isMobile,value:_value,themeColor:this.props.style.themeColor,tipsStyle:tipsStyle,optionStyle:optionStyle,onChange:this.handleChange.bind(self,qId,null)}))}};case 2:isCheckbox=!0;case 1:default:var CommonDom=_svgBasicComponent.CommonRadio;return isCheckbox&&(CommonDom=_svgBasicComponent.CommonCheckbox),{v:function(qId,options){var _this=this,_items=[],fill=self.props.fill;return _lodash2["default"].forEach(options,function(option,idx){var _sId=idx;if(!(data.ql2sMapping&&data.ql2sMapping[qId]&&data.ql2sMapping[qId][option.id]))return void console.error("component tabularOPT ID LOST ->."+option.id+" : "+JSON.stringify(option));_sId=data.ql2sMapping[qId][option.id];var _checked=fill&&(fill[qId]||[]).indexOf(_sId)>-1,_className={radio:!isCheckbox,checkbox:isCheckbox,checked:_checked};_items.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_optionsLi",_className),key:"item"+idx,style:_lodash2["default"].assign({height:optionStyle.minHeight},optionStyle),onClick:_this.handleChange.bind(self,qId,_sId)},_react2["default"].createElement("p",{className:"fbc_optionVal"},_react2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_checked,style:{paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}),_react2["default"].createElement("span",{className:"fbc_optionLabel"},option.value))))}),_react2["default"].createElement("ul",null,_items,_react2["default"].createElement("li",{className:"clearB"}))}}}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v},render:function(){var _this2=this,_props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),componentStyle=_props2.componentStyle,_formStyle2=this.formStyle(),optionStyle=_formStyle2.optionStyle,_subInfo=null;switch(+data.tabularType){case 3:case 4:_subInfo=data.tipText||_config.lang.cFillingPlaceholder;break;default:_subInfo=data.options}var _tBody=_lodash2["default"].map(data.questions,function(question,idx){return _react2["default"].createElement("div",{className:"fbc_tabularQuestion",key:"ques"+idx},_react2["default"].createElement("p",{className:"fbc_tabularTitle",style:_lodash2["default"].omit(optionStyle,"minHeight")},question.value),_this2.renderItems(question.id,_subInfo))});return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_content"},_tBody))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}function inject(connect,status,sourceId){return{connectDragSource:connect.dragSource(),isDragging:status.isDragging}}function collect(connect,status,targetId){return{connectDropTarget:connect.dropTarget(),isDragging:status.isDragging(),hover:status.isOverTarget(targetId)}}function generatorRank(){return(0,_Lego.bindContext)(_Lego.eventCore)(Rank)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=generatorRank;var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_Lego=__webpack_require__(86),_FormGeneratorUtil=__webpack_require__(56),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_isMove=!1,events={beginDrag:function(props,status,component){props.setPosition&&props.setPosition([0,0]),_isMove=!1},canDrag:function(props,status,sourceId){return"rankDrag"===status.getSourceType(sourceId)},dragging:function(props,status){var offset=status.getDifferenceFromInitialOffset(),_ref=offset||{x:0,y:0},x=_ref.x,y=_ref.y;_isMove=!0,props.setPosition&&props.setPosition([x,y])},endDrag:function(props,status,component){props.runDispatch&&props.runDispatch(),props.setPosition&&props.setPosition([0,0],!0)}},RankItem=_react2["default"].createClass({displayName:"RankItem",mixins:[_reactAddonsPureRenderMixin2["default"]],contextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.status=this.manager.getStatus(),{}},handleClick:function(e){return _isMove?void(_isMove=!1):void(this.props.onClick&&this.props.onClick(e))},handleDragBarClick:function(e){this.props.dragging||this.props.onDragBarClick&&this.props.onDragBarClick(e)},render:function(){var _props=this.props,connectDragSource=_props.connectDragSource,value=_props.value,dragBar=_props.dragBar,optionStyle=_props.optionStyle,num=_props.num,position=_props.position,dragging=_props.dragging,onDragBarClick=_props.onDragBarClick;return connectDragSource(_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_roItem",{dragging:dragging}),key:"rOpt"+num,style:_lodash2["default"].assign({position:"relative",left:position[0],top:position[1]},optionStyle),onClick:this.handleClick},_react2["default"].createElement("p",{className:"fbc_roInfo"},value),dragBar?_react2["default"].createElement("a",{className:"fbc_rsDragBar iconfont",onClick:onDragBarClick},String.fromCharCode(58982)):_react2["default"].createElement("a",{className:"fbc_roDragBar"})))}}),DragRankItem=(0,_Lego.bindDragSource)("rankDrag",events,inject)(RankItem),rankTarget={canDrop:function(){return!0},drop:function(props){props.active&&props.setDispatch({type:"setRank",id:props.data.id,num:props.num,value:props.active})}},_answerItem=_react2["default"].createClass({displayName:"_answerItem",mixins:[_reactAddonsPureRenderMixin2["default"]],handleFilledPosition:function(){for(var _props2=this.props,fill=_props2.fill,num=_props2.num,setPosition=_props2.setPosition,_len=arguments.length,info=Array(_len),_key=0;_key<_len;_key++)info[_key]=arguments[_key];fill&&fill[num]&&setPosition&&setPosition.apply(void 0,[fill[num]].concat(info)),this.oldId&&this.oldId!==fill[num]&&setPosition&&setPosition.apply(void 0,[this.oldId].concat(info)),this.oldId=fill[num]},handleRemoveItem:function(){var props=this.props,active=props.fill[props.num];_formStore2["default"].dispatch({type:"removeRank",id:props.data.id,value:active});var newHidden=props.hidden.slice(),idx=newHidden.indexOf(active);newHidden.splice(idx,1),props.handleHiddenItems(newHidden)},render:function(){var _props3=this.props,connectDropTarget=_props3.connectDropTarget,hover=_props3.hover,data=_props3.data,fill=_props3.fill,num=_props3.num,optionStyle=_props3.optionStyle,active=_props3.active,position=_props3.position,runDispatch=_props3.runDispatch,answer=String.fromCharCode(160);if(fill&&fill[num]){var _temp=_lodash2["default"].find(data.options,{sId:fill[num]});answer=_react2["default"].createElement(DragRankItem,{key:num,value:_temp.value,num:num,dragBar:!0,optionStyle:optionStyle,dragging:active===_temp.sId,position:position[_temp.sId],setPosition:this.handleFilledPosition,onDragBarClick:this.handleRemoveItem,runDispatch:runDispatch})}return connectDropTarget(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_raItem",{fbc_raFilled:fill&&fill[num],fbc_raHovered:hover}),key:"rAns"+num,style:_lodash2["default"].assign({position:"relative"},optionStyle)},_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_raNum")},num+1),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_raGroove")},_react2["default"].createElement("div",{className:"fbc_ragInfo"},answer)),_react2["default"].createElement("div",{className:"clearB"})))}}),AnswerItem=(0,_Lego.bindDropTarget)("answer",rankTarget,collect)(_answerItem),SortBoard=_react2["default"].createClass({displayName:"SortBoard",mixins:[_reactAddonsPureRenderMixin2["default"]],render:function(){for(var rankDigits=this.props.rankDigits,answer=[],i=0;i<rankDigits;i++)answer.push(_react2["default"].createElement(AnswerItem,_extends({key:i},this.props,{num:i})));return _react2["default"].createElement("ul",{className:"fbc_rankAnswer"},answer)}}),Rank=_react2["default"].createClass({displayName:"Component(Rank)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){var _position={};_lodash2["default"].forEach(this.props.data.options,function(data){_position[data.sId]=[0,0]});var hidden=[];return _lodash2["default"].forEach(this.props.fill,function(info){hidden.push(info)}),{position:_position,active:null,hidden:hidden}},componentWillUpdate:function(nextProps){var _this=this;this.needUpdateHidden&&!function(){var fill=nextProps.fill,hidden=[];_lodash2["default"].forEach(fill,function(info){hidden.push(info)}),_this.setState({hidden:hidden}),_this.needUpdateHidden=!1}()},handleSetPosition:function(id,value,isEnd){var _this2=this,newData={};newData[id]=value;var newState={position:_lodash2["default"].assign({},this.state.position,newData),active:isEnd?null:id};isEnd&&!function(){var newHiddenOptions=[];_lodash2["default"].forEach(_this2.props.fill,function(info){newHiddenOptions.push(info)}),newState.hidden=newHiddenOptions}(),this.setState(newState)},handleHiddenItems:function(newHidden){this.setState({hidden:newHidden})},handleClickAddRank:function(sid){var props=this.props;_formStore2["default"].dispatch({type:"setNextRank",id:props.data.id,value:sid,total:props.data.trueDigits}),this.needUpdateHidden=!0},handleSetDispatch:function(info){this.dispatchInfo=info},handleRunDispatch:function(){this.dispatchInfo&&(_formStore2["default"].dispatch(this.dispatchInfo),_isMove=!1,this.dispatchInfo=null)},render:function(){for(var _props4=this.props,data=_props4.data,fill=_props4.fill,valid=_props4.valid,componentStyle=_props4.componentStyle,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,tipsStyle=_formStyle.tipsStyle,_length=(data.options||[]).length,rankDigits=data.isLimitDigit?data.rankDigits||_length:_length,_temp=null,options=data.options||[],_options=[],i=0,len=options.length;i<len;i++)_temp=options[i],this.state.hidden.indexOf(_temp.sId)>-1||_options.push(_react2["default"].createElement(DragRankItem,{key:i,value:(data.isAutoNo?_optionNum(data.autoNo,i+1):"")+_temp.value,num:i,dragBar:!1,optionStyle:optionStyle,dragging:this.state.active===_temp.sId,position:this.state.position[_temp.sId],setPosition:this.handleSetPosition.bind(this,_temp.sId),onClick:this.handleClickAddRank.bind(this,_temp.sId),runDispatch:this.handleRunDispatch}));return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),_react2["default"].createElement("p",{className:"fbc_tips",style:tipsStyle},_config.lang.cRankTips),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_content"},_react2["default"].createElement(SortBoard,_extends({fill:fill,rankDigits:rankDigits,optionStyle:optionStyle,data:data},this.state,{setPosition:this.handleSetPosition,handleHiddenItems:this.handleHiddenItems,runDispatch:this.handleRunDispatch,setDispatch:this.handleSetDispatch})),_react2["default"].createElement("div",{className:"fbc_rankOption"},_options)))}});module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventCore=exports.createDragHelper=exports.bindDragSource=exports.bindDropTarget=exports.bindContext=void 0;var _BindDropTarget=__webpack_require__(87),_BindDropTarget2=_interopRequireDefault(_BindDropTarget),_BindDragSource=__webpack_require__(89),_BindDragSource2=_interopRequireDefault(_BindDragSource),_DnDContext=__webpack_require__(90),_DnDContext2=_interopRequireDefault(_DnDContext),_DragHelper=__webpack_require__(95),_DnDEventMouse=__webpack_require__(96),_DnDEventMouse2=_interopRequireDefault(_DnDEventMouse),eventCore=_DnDEventMouse2["default"];exports.bindContext=_DnDContext2["default"],exports.bindDropTarget=_BindDropTarget2["default"],exports.bindDragSource=_BindDragSource2["default"],exports.createDragHelper=_DragHelper.createDragHelper,exports.eventCore=eventCore},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createTargetConnector(handlerId,eventCore){function ref(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_react2["default"].isValidElement(node)){var nextElement=node;return(0,_dndUtil.cloneWithRef)(nextElement,function(inst){inst&&compositeDisposable.add(new _dndUtil.Disposable(connectorEvent.dropTarget(handlerId,_reactDom2["default"].findDOMNode(inst))))})}}var connectorEvent={dropTarget:function(){return eventCore.connectDropTarget.apply(eventCore,arguments)}},compositeDisposable=new _dndUtil.CompositeDisposable;return{connector:{dropTarget:function(){return ref}},disposable:compositeDisposable}}function createTargetEvent(targetEventCallback){var Target=function(){function Target(status){_classCallCheck(this,Target),this.status=status,this.props=null,this.component=null}return _createClass(Target,[{key:"receiveProps",value:function(props){this.props=props}},{key:"receiveComponent",value:function(component){this.component=component}},{key:"canDrop",value:function(){return!!targetEventCallback.canDrop&&targetEventCallback.canDrop(this.props,this.status)}},{key:"hover",value:function(){if(targetEventCallback.hover)return targetEventCallback.hover(this.props,this.status,this.component)}},{key:"blur",value:function(){if(targetEventCallback.blur)return targetEventCallback.blur(this.props,this.status)}},{key:"drop",value:function(binder,targetId){return targetEventCallback.drop?targetEventCallback.drop(this.props,this.status):null}}]),Target}();return function(status){return new Target(status)}}function bindDragSource(type,events,inject){var getType=void 0;getType=_lodash2["default"].isFunction(type)?type:function(){return type};var targetEvent=createTargetEvent(events);return function(Component){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},displayName=Component.displayName||Component.name||"Component";return _react2["default"].createClass({displayName:"DropTarget("+displayName+")",contextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.currentType=null,this.disposable=new _dndUtil.SerialDisposable,this.event=this.manager.getEvent(),this.status=this.manager.getStatus(),this.handler=targetEvent(this.status),this.receiveProps(this.props),this.getCurrentState()},shouldComponentUpdate:function(nextProps,nextState){return!(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||!(0,_dndUtil.shallowEqual)(nextState,this.state)},componentWillReceiveProps:function(nextProps){(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||(this.receiveProps(nextProps),this.handleChange())},componentDidMount:function(){},componentWillUnmount:function(){this.disposable.dispose()},receiveProps:function(props){this.handler.receiveProps(props),this.receiveType(getType(props))},receiveType:function(type){var _this=this;if(type!==this.currentType){this.currentType=type;var _manager$registerTarg=this.manager.registerTarget(this.currentType,this.handler,options),handlerId=_manager$registerTarg.handlerId,unregist=_manager$registerTarg.unregist,unsubscribe=this.manager.subscribeChange(function(){_this.status.getDirtyHandlerId().indexOf(_this.handlerId)>-1&&_this.handleChange()});this.handlerId=handlerId;var _createTargetConnecto=createTargetConnector(this.handlerId,this.event),connector=_createTargetConnecto.connector,disposable=_createTargetConnecto.disposable;this.connector=connector,this.disposable.setDisposable(new _dndUtil.CompositeDisposable(new _dndUtil.Disposable(unsubscribe),new _dndUtil.Disposable(function(){return unregist(_this.handlerId)}),disposable))}},handleChange:function(){var nextState=this.getCurrentState();(0,_dndUtil.shallowEqual)(nextState,this.state)||this.setState(nextState)},getCurrentState:function(){return inject(this.connector,this.status,this.handlerId)},getHandlerId:function(){return this.handlerId},getInstance:function(){return this.componentInstance},handleChildrenRef:function(component){this.componentInstance=component,this.handler.receiveComponent(component)},render:function(){return _react2["default"].createElement(Component,_extends({},this.props,this.state,{ref:this.handleChildrenRef,targetId:this.getHandlerId()}))}})}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=bindDragSource;var _dndUtil=__webpack_require__(88),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function cloneWithRef(element,newRef){var previousRef=element.ref;return(0,_react.cloneElement)(element,{ref:function(instance){newRef(instance),previousRef&&previousRef(instance);
}})}function shallowEqual(objA,objB){if(objA===objB)return!0;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var hasOwn=Object.prototype.hasOwnProperty,i=0;i<keysA.length;i++){if(!hasOwn.call(objB,keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;var valA=objA[keysA[i]],valB=objB[keysA[i]];if(valA!==valB)return!1}return!0}function shallowEqualScalar(objA,objB){if(objA===objB)return!0;if("object"!==("undefined"==typeof objA?"undefined":_typeof(objA))||null===objA||"object"!==("undefined"==typeof objB?"undefined":_typeof(objB))||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var hasOwn=Object.prototype.hasOwnProperty,i=0;i<keysA.length;i++){if(!hasOwn.call(objB,keysA[i]))return!1;var valA=objA[keysA[i]],valB=objB[keysA[i]];if(valA!==valB||"object"===("undefined"==typeof valA?"undefined":_typeof(valA))||"object"===("undefined"==typeof valB?"undefined":_typeof(valB)))return!1}return!0}function isDisposable(obj){return Boolean(obj&&"function"==typeof obj.dispose)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerialDisposable=exports.CompositeDisposable=exports.Disposable=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.cloneWithRef=cloneWithRef,exports.shallowEqual=shallowEqual,exports.shallowEqualScalar=shallowEqualScalar;var _react=__webpack_require__(14),_emptyFunc=function(){},Disposable=function(){function Disposable(action){_classCallCheck(this,Disposable),this.action=action||_emptyFunc,this.disposed=!1}return _createClass(Disposable,[{key:"dispose",value:function(){this.disposed||(this.action.call(null),this.disposed=!0)}}]),Disposable}(),CompositeDisposable=function(){function CompositeDisposable(){for(var _len=arguments.length,disposables=Array(_len),_key=0;_key<_len;_key++)disposables[_key]=arguments[_key];_classCallCheck(this,CompositeDisposable),Array.isArray(disposables[0])&&1===disposables.length&&(disposables=disposables[0]),this.disposed=!1,this.disposables=disposables}return _createClass(CompositeDisposable,[{key:"add",value:function(item){this.disposed?item.dispose():this.disposables.push(item)}},{key:"remove",value:function(item){var run=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.disposed)return!1;var indexRemoveItem=this.disposables.indexOf(item);return indexRemoveItem!==-1&&(this.disposables.splice(indexRemoveItem,1),run&&item.dispose(),!0)}},{key:"dispose",value:function(){if(!this.disposed){for(var len=this.disposables.length,currentDisposables=new Array(len),i=0;i<len;i++)currentDisposables[i]=this.disposables[i];this.disposed=!0,this.disposables=[];for(var _i=0;_i<len;_i++)currentDisposables[_i].dispose()}}}]),CompositeDisposable}(),SerialDisposable=function(){function SerialDisposable(){_classCallCheck(this,SerialDisposable),this.disposed=!1,this.current=null}return _createClass(SerialDisposable,[{key:"setDisposable",value:function(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==value||isDisposable(value)){var disposed=this.disposed,prev=null;disposed||(prev=this.current,this.current=value),prev&&prev.dispose(),disposed&&value&&value.dispose()}}},{key:"getDisposable",value:function(){return this.current}},{key:"dispose",value:function(){if(!this.disposed){this.disposed=!0;var prev=this.current;this.current=null,prev&&prev.dispose()}}}]),SerialDisposable}();exports.Disposable=Disposable,exports.CompositeDisposable=CompositeDisposable,exports.SerialDisposable=SerialDisposable},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createSourceConnector(handlerId,eventCore){function ref(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_react2["default"].isValidElement(node)){var nextElement=node;return(0,_dndUtil.cloneWithRef)(nextElement,function(inst){inst&&compositeDisposable.add(new _dndUtil.Disposable(connectorEvent.dragSource(handlerId,_reactDom2["default"].findDOMNode(inst))))})}}var connectorEvent={dragSource:function(){return eventCore.connectDragSource.apply(eventCore,arguments)}},compositeDisposable=new _dndUtil.CompositeDisposable;return{connector:{dragSource:function(){return ref}},disposable:compositeDisposable}}function createSourceEvent(sourceEventCallback){var Source=function(){function Source(status){_classCallCheck(this,Source),this.status=status,this.props=null,this.component=null}return _createClass(Source,[{key:"receiveProps",value:function(props){this.props=props}},{key:"receiveComponent",value:function(component){this.component=component}},{key:"beginDrag",value:function(){return sourceEventCallback.beginDrag(this.props,this.status,this.component)}},{key:"canDrag",value:function(binder,sourceId){return!sourceEventCallback.beginDrag||sourceEventCallback.canDrag(this.props,this.status,sourceId)}},{key:"dragging",value:function(){if(sourceEventCallback.dragging)return sourceEventCallback.dragging(this.props,this.status)}},{key:"endDrag",value:function(){if(sourceEventCallback.endDrag)return sourceEventCallback.endDrag(this.props,this.status,this.component)}}]),Source}();return function(status){return new Source(status)}}function bindDragSource(type,events,inject){var getType=void 0;getType=_lodash2["default"].isFunction(type)?type:function(){return type};var sourceEvent=createSourceEvent(events);return function(Component){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},displayName=Component.displayName||Component.name||"Component";return _react2["default"].createClass({displayName:"DragSource("+displayName+")",contextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.disposable=new _dndUtil.SerialDisposable,this.event=this.manager.getEvent(),this.status=this.manager.getStatus(),this.handler=sourceEvent(this.status),this.receiveProps(this.props),this.getCurrentState()},shouldComponentUpdate:function(nextProps,nextState){return!(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||!(0,_dndUtil.shallowEqual)(nextState,this.state)},componentWillReceiveProps:function(nextProps){(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||(this.receiveProps(nextProps),this.handleChange())},componentDidMount:function(){},componentWillUnmount:function(){this.disposable.dispose()},receiveProps:function(props){this.handler.receiveProps(props),this.receiveType(getType(props))},receiveType:function(type){var _this=this;if(type!==this.currentType){this.currentType=type;var _manager$registerSour=this.manager.registerSource(this.currentType,this.handler,options),handlerId=_manager$registerSour.handlerId,unregist=_manager$registerSour.unregist,unsubscribe=this.manager.subscribeChange(function(){_this.status.getDirtyHandlerId().indexOf(_this.handlerId)>-1&&_this.handleChange()});this.handlerId=handlerId;var _createSourceConnecto=createSourceConnector(this.handlerId,this.event),connector=_createSourceConnecto.connector,disposable=_createSourceConnecto.disposable;this.connector=connector,this.disposable.setDisposable(new _dndUtil.CompositeDisposable(new _dndUtil.Disposable(unsubscribe),new _dndUtil.Disposable(function(){return unregist(_this.handlerId)}),disposable))}},handleChange:function(){var nextState=this.getCurrentState();(0,_dndUtil.shallowEqual)(nextState,this.state)||this.setState(nextState)},getCurrentState:function(){return inject(this.connector,this.status,this.handlerId)},getHandlerId:function(){return this.handlerId},getInstance:function(){return this.componentInstance},handleChildrenRef:function(component){this.componentInstance=component,this.handler.receiveComponent(component)},render:function(){return _react2["default"].createElement(Component,_extends({},this.props,this.state,{ref:this.handleChildrenRef,sourceId:this.getHandlerId()}))}})}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=bindDragSource;var _dndUtil=__webpack_require__(88),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function DnDContext(eventCore){var childContext={dragDropManager:new _DnDManager2["default"](eventCore)};return function(Component){var displayName=Component.displayName||Component.name||"Component";return _react2["default"].createClass({displayName:"DnDContext("+displayName+")",childContextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInstance:function(){return this.ref.child},getManager:function(){return childContext.dragDropManager},getChildContext:function(){return childContext},render:function(){return _react2["default"].createElement(Component,_extends({},this.props,{ref:"child"}))}})}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=DnDContext;var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_DnDManager=__webpack_require__(91),_DnDManager2=_interopRequireDefault(_DnDManager);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getNextId(){return bindUniqueId++,bindUniqueId.toString(36)}function getNextHandlerId(role){return""+role+getNextId()}function _getSourceClientOffset(state){var clientOffset=state.clientOffset,initialClientOffset=state.initialClientOffset,initialSourceClientOffset=state.initialSourceClientOffset;return clientOffset&&initialClientOffset&&initialSourceClientOffset?{x:clientOffset.x+initialSourceClientOffset.x-initialClientOffset.x,y:clientOffset.y+initialSourceClientOffset.y-initialClientOffset.y}:null}function _getDifferenceFromInitialOffset(state){var clientOffset=state.clientOffset,initialClientOffset=state.initialClientOffset;return clientOffset&&initialClientOffset?{x:clientOffset.x-initialClientOffset.x,y:clientOffset.y-initialClientOffset.y}:null}function isTarget(targetId){return"T"===targetId[0]}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_DnD=__webpack_require__(92),_DnD2=_interopRequireDefault(_DnD),_DnD3=__webpack_require__(93),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),bindUniqueId=0,ROLE={dragSource:"S",dropTarget:"T"},DnDBinder=function(){function DnDBinder(store){_classCallCheck(this,DnDBinder),this.store=store,this.types={},this.handlers={},this.options={},this.pinnedSourceId=null,this.isDragging=this.isDragging.bind(this)}return _createClass(DnDBinder,[{key:"register",value:function(role,typeName,eventHandler,options){var id=getNextHandlerId(role);this.types[id]=typeName,this.handlers[id]=eventHandler,this.options[id]=options;var removeCallback=void 0;return role===ROLE.dragSource?(this.store.dispatchProcess({type:_DnD3.ActionType.ADD_SOURCE,sourceId:id}),removeCallback=this.removeSource.bind(this)):role===ROLE.dropTarget&&(this.store.dispatchProcess({type:_DnD3.ActionType.ADD_TARGET,targetId:id}),removeCallback=this.removeTarget.bind(this)),{handlerId:id,unregist:removeCallback}}},{key:"pinSourceId",value:function(sourceId){this.pinnedSourceId=sourceId}},{key:"unpinSourceId",value:function(){this.pinnedSourceId=null}},{key:"removeSource",value:function(sourceId){this.store.dispatchProcess({type:_DnD3.ActionType.REMOVE_SOURCE,sourceId:sourceId}),delete this.handlers[sourceId],delete this.types[sourceId],delete this.options[sourceId]}},{key:"removeTarget",value:function(targetId){this.store.dispatchProcess({type:_DnD3.ActionType.REMOVE_TARGET,sourceId:targetId}),delete this.handlers[targetId],delete this.types[targetId],delete this.options[targetId]}},{key:"canDragSource",value:function(sourceId){if(this.isDragging())return!1;var source=this.getSource(sourceId);return!source.canDrag||source.canDrag(this,sourceId)}},{key:"canDropOnTarget",value:function(targetId){if(!this.isDragging()||this.didDrop())return!1;var target=this.getTarget(targetId);return target.canDrop(this,targetId)}},{key:"getSourceId",value:function(){return this.pinnedSourceId||this.store.getState().sourceId}},{key:"getSource",value:function(sourceId){return this.handlers[sourceId]}},{key:"getTarget",value:function(targetId){return this.handlers[targetId]}},{key:"getHandlers",value:function(){return this.handlers}},{key:"getSourceType",value:function(sourceId){if(!sourceId&&this.pinnedSourceId&&(sourceId=this.pinnedSourceId),sourceId)return this.types[sourceId]}},{key:"getTargetType",value:function(targetId){return this.types[targetId]}},{key:"getSourceOptions",value:function(sourceId){return this.options[sourceId]}},{key:"getTargetOptions",value:function(targetId){return this.options[targetId]}},{key:"isDragging",value:function(){return Boolean(this.store.getState().itemType)}},{key:"didDrop",value:function(){return this.store.getState().didDrop}},{key:"getTargetIds",value:function(){return this.store.getState().targetIds}},{key:"isOverTarget",value:function(targetId){return!!this.isDragging()&&this.getTargetIds().indexOf(targetId)>-1}},{key:"getItemType",value:function(){return this.store.getState().itemType}},{key:"getItem",value:function(){return this.store.getState().item}},{key:"isSourcePublish",value:function(){return this.store.getState().isSourcePublish}},{key:"getDirtyHandlerId",value:function(){return this.store.getState().dirtyHandlerId}},{key:"getInitialClientOffset",value:function(){return this.store.getState().initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().clientOffset}},{key:"getSourceSize",value:function(){return this.store.getState().initialSourceSize}},{key:"getHoldInfo",value:function(){var info=this.store.getState();return info.holdMeta||info.holdCtrl}},{key:"getSourceClientOffset",value:function(){var _store$getState=this.store.getState(),initialSourceClientOffset=_store$getState.initialSourceClientOffset,initialClientOffset=_store$getState.initialClientOffset,clientOffset=_store$getState.clientOffset;return _getSourceClientOffset({initialSourceClientOffset:initialSourceClientOffset,initialClientOffset:initialClientOffset,clientOffset:clientOffset})}},{key:"getDifferenceFromInitialOffset",value:function(){var _store$getState2=this.store.getState(),initialSourceClientOffset=_store$getState2.initialSourceClientOffset,initialClientOffset=_store$getState2.initialClientOffset,clientOffset=_store$getState2.clientOffset;return _getDifferenceFromInitialOffset({initialSourceClientOffset:initialSourceClientOffset,initialClientOffset:initialClientOffset,clientOffset:clientOffset})}}]),DnDBinder}(),DnDManager=function(){function DnDManager(eventCore){_classCallCheck(this,DnDManager),this.store=(0,_DnD2["default"])(),this.binder=new DnDBinder(this.store),this.eventCore=eventCore(this),this.store.addChangeListener(this.handleRefCountChange.bind(this))}return _createClass(DnDManager,[{key:"handleRefCountChange",value:function(){var shouldSetUp=this.store.getState().itemCount>0;shouldSetUp&&!this.isSetUp?(this.eventCore.setup(),this.isSetUp=!0):!shouldSetUp&&this.isSetUp&&(this.eventCore.teardown(),this.isSetUp=!1)}},{key:"subscribeChange",value:function(callback){return this.store.addChangeListener(callback)}},{key:"registerSource",value:function(typeName,eventHandler,options){return this.binder.register(ROLE.dragSource,typeName,eventHandler,options)}},{key:"registerTarget",value:function(typeName,eventHandler,options){return this.binder.register(ROLE.dropTarget,typeName,eventHandler,options)}},{key:"getActions",value:function(){return{beginDrag:this.beginDrag.bind(this),publishDragSource:this.publishDragSource.bind(this),hover:this.hover.bind(this),endDrag:this.endDrag.bind(this),drop:this.drop.bind(this),pressedCtrlKey:this.pressedCtrlKey.bind(this)}}},{key:"getStatus",value:function(){return this.binder}},{key:"getEvent",value:function(){return this.eventCore}},{key:"beginDrag",value:function(sourceIds){for(var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$publishSource=_ref.publishSource,publishSource=void 0===_ref$publishSource||_ref$publishSource,_ref$clientOffset=_ref.clientOffset,clientOffset=void 0===_ref$clientOffset?null:_ref$clientOffset,getSourceClientOffset=_ref.getSourceClientOffset,sourceId=(_ref.holdCtrl,_ref.holdMeta,null),i=sourceIds.length-1;i>=0;i--)if(this.binder.canDragSource(sourceIds[i])){sourceId=sourceIds[i];break}if(null!==sourceId){this.binder.pinSourceId(sourceId);var sourceClientOffset=null,sourceSize=null;if(clientOffset){var sourceOffset=getSourceClientOffset(sourceId);sourceClientOffset={x:sourceOffset.x,y:sourceOffset.y},sourceSize={width:sourceOffset.width,height:sourceOffset.height}}var source=this.binder.getSource(sourceId),item=source.beginDrag(this.binder,sourceId),itemType=this.binder.getSourceType(sourceId);this.store.dispatchProcess({type:_DnD3.ActionType.BEGIN_DRAG,itemType:itemType,item:item,sourceId:sourceId,clientOffset:clientOffset,sourceSize:sourceSize,sourceClientOffset:sourceClientOffset,isSourcePublish:publishSource})}}},{key:"publishDragSource",value:function(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},holdMeta=_ref2.holdMeta,holdCtrl=_ref2.holdCtrl;if(this.binder.isDragging()){var sourceId=this.binder.getSourceId(),source=this.binder.getSource(sourceId);source.dragging(this.binder,sourceId),this.store.dispatchProcess({type:_DnD3.ActionType.PUBLISH_DRAG_SOURCE,holdMeta:holdMeta,holdCtrl:holdCtrl})}}},{key:"hover",value:function(targetIds){var _this=this,_ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$clientOffset=_ref3.clientOffset,clientOffset=void 0===_ref3$clientOffset?null:_ref3$clientOffset;targetIds=targetIds.slice(0);this.binder.getItemType();_lodash2["default"].forEach(targetIds,function(targetId){var target=_this.binder.getTarget(targetId);target.hover(_this.binder,targetId)}),_lodash2["default"].forEach(this.binder.getDirtyHandlerId(),function(handlerId){if(isTarget(handlerId)&&targetIds.indexOf(handlerId)===-1){var target=_this.binder.getTarget(handlerId);target.blur(_this.binder,handlerId)}}),this.store.dispatchProcess({type:_DnD3.ActionType.HOVER,targetIds:targetIds,clientOffset:clientOffset})}},{key:"drop",value:function(){var _this2=this,_ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},holdMeta=_ref4.holdMeta,holdCtrl=_ref4.holdCtrl,targetIds=_lodash2["default"].filter(this.binder.getTargetIds(),function(tgId){return _this2.binder.canDropOnTarget(tgId)});targetIds.reverse(),_lodash2["default"].forEach(targetIds,function(targetId,idx){var target=_this2.binder.getTarget(targetId),dropResult=target.drop(_this2.binder,targetId);_this2.store.dispatchProcess({type:_DnD3.ActionType.DROP,dropResult:dropResult,holdMeta:holdMeta,holdCtrl:holdCtrl})})}},{key:"endDrag",value:function(){var sourceId=this.binder.getSourceId(),source=this.binder.getSource(sourceId);source.endDrag(this.binder,sourceId),this.binder.unpinSourceId(),this.store.dispatchProcess({type:_DnD3.ActionType.END_DRAG})}},{key:"pressedCtrlKey",value:function(){var _this3=this,targetIds=this.binder.getTargetIds().slice(0);this.binder.getItemType();_lodash2["default"].forEach(targetIds,function(targetId){var target=_this3.binder.getTarget(targetId);target.hover(_this3.binder,targetId)}),_lodash2["default"].forEach(this.binder.getDirtyHandlerId(),function(handlerId){if(isTarget(handlerId)&&targetIds.indexOf(handlerId)===-1){var target=_this3.binder.getTarget(handlerId);target.blur(_this3.binder,handlerId)}})}}]),DnDManager}();exports["default"]=DnDManager,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function areOffsetsEqual(offsetA,offsetB){return offsetA===offsetB||offsetA&&offsetB&&offsetA.x===offsetB.x&&offsetA.y===offsetB.y}function createDnDStore(){return new DnDStore({itemCount:0,itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublish:null,dirtyHandlerId:[],initialSourceClientOffset:null,initialSourceSize:null,initialClientOffset:null,clientOffset:null,holdCtrl:!1,holdMeta:!1})}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=createDnDStore;var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_DnD=__webpack_require__(93),DnDStore=function(){function DnDStore(initState){_classCallCheck(this,DnDStore),this.currentState=initState,this.listeners=[]}return _createClass(DnDStore,[{key:"getState",value:function(){return this.currentState}},{key:"addChangeListener",value:function(callback){this.listeners.push(callback);var isSubscribed=!0,listeners=this.listeners;return function(){if(isSubscribed){isSubscribed=!1;var _idx=listeners.indexOf(callback);listeners.splice(_idx,1)}}}},{key:"updateState",value:function(newState){var _this=this,tempState=_lodash2["default"].assign({},this.currentState,newState||{});this.changeState=Object.keys(newState).filter(function(key){return tempState[key]!==_this.currentState[key]}),this.currentState=tempState}},{key:"dispatchProcess",value:function(action){if(action.type){switch(action.type){case _DnD.ActionType.BEGIN_DRAG:this.updateState({itemType:action.itemType,item:action.item,sourceId:action.sourceId,isSourcePublish:action.isSourcePublish,dropResult:null,didDrop:!1,initialSourceClientOffset:action.sourceClientOffset,initialSourceSize:action.sourceSize,initialClientOffset:action.clientOffset,clientOffset:action.clientOffset,dirtyHandlerId:[],holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.PUBLISH_DRAG_SOURCE:this.updateState({isSourcePublish:!0,holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.DRAGGING:this.updateState({isSourcePublish:!0});break;case _DnD.ActionType.END_DRAG:this.updateState({itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublish:null,targetIds:[],initialSourceClientOffset:null,initialSourceSize:null,initialClientOffset:null,clientOffset:null,dirtyHandlerId:[],holdCtrl:!1,holdMeta:!1});break;case _DnD.ActionType.HOVER:var state=this.getState(),oldTargetIds=state.targetIds,dirtyHandlerId=_lodash2["default"].xor(oldTargetIds,action.targetIds).concat(state.sourceId);this.updateState({targetIds:action.targetIds,dirtyHandlerId:dirtyHandlerId}),areOffsetsEqual(this.currentState.clientOffset,action.clientOffset)||this.updateState({clientOffset:action.clientOffset});break;case _DnD.ActionType.PRESSKEY:this.updateState({holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.DROP:this.updateState({dropResult:action.dropResult,didDrop:!0,targetIds:[],initialSourceClientOffset:null,initialSourceSize:null,initialClientOffset:null,clientOffset:null,holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.ADD_SOURCE:case _DnD.ActionType.ADD_TARGET:this.updateState({itemCount:this.currentState.itemCount+1});break;case _DnD.ActionType.REMOVE_SOURCE:case _DnD.ActionType.REMOVE_TARGET:this.updateState({itemCount:this.currentState.itemCount-1})}return this.listeners.slice().forEach(function(listener){return listener()}),this.getState()}}}]),DnDStore}();module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActionType=void 0;var _keyMirror=__webpack_require__(94),_keyMirror2=_interopRequireDefault(_keyMirror);exports.ActionType=(0,_keyMirror2["default"])({BEGIN_DRAG:!0,PUBLISH_DRAG_SOURCE:!0,DRAGGING:!0,END_DRAG:!0,HOVER:!0,DROP:!0,PRESSKEY:!0,ADD_SOURCE:!0,ADD_TARGET:!0,REMOVE_SOURCE:!0,REMOVE_TARGET:!0})},function(module,exports){"use strict";var keyMirror=function(obj){var key,ret={};for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=key);return ret};module.exports=keyMirror},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createDragHelper(renderFunc){return _react2["default"].createClass({mixins:[_reactAddonsPureRenderMixin2["default"]],contextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.status=this.manager.getStatus(),this.getCurrentState()},getCurrentState:function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isShown:!1,top:0,left:0,holdCtrl:!1};return state},componentDidMount:function(){(0,_jquery2["default"])(_reactDom2["default"].findDOMNode(this)).bind("wheel",this.handleDOMWheel),this.unsubscribeListener=this.manager.subscribeChange(this.handleOffsetChange)},componentWillUnmount:function(){(0,_jquery2["default"])(_reactDom2["default"].findDOMNode(this)).unbind("wheel",this.handleDOMWheel),this.unsubscribeListener()},handleDOMWheel:function(e){this.props.onWheel&&this.props.onWheel(e)},handleOffsetChange:function(){if(!this.isMounted())return!1;var offset=this.status.getSourceClientOffset(),_ref=offset||{x:0,y:0},x=_ref.x,y=_ref.y;this.setState(this.getCurrentState({isShown:Boolean(this.status.isSourcePublish()),top:Math.round(y),left:Math.round(x),holdCtrl:this.status.getHoldInfo()}))},render:function(){var helperClassName={"lg-dragHelper":!0,isShown:this.state.isShown},extInfo=renderFunc(this.props,this.status);return _react2["default"].createElement("div",{className:(0,_classnames2["default"])(helperClassName),style:{top:this.state.top,left:this.state.left}},extInfo)}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDragHelper=createDragHelper;var _jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getEventClientTouchOffset(e){if(1===e.targetTouches.length)return getEventClientOffset(e.targetTouches[0])}function getEventClientOffset(e){return e.targetTouches?getEventClientTouchOffset(e):{x:e.clientX,y:e.clientY}}function getNodeClientOffset(node){var el=node.nodeType===ELEMENT_NODE?node:node.parentElement;if(!el)return null;var clientRect=el.getBoundingClientRect(),top=void 0,left=void 0,width=void 0,height=void 0;return clientRect&&(top=clientRect.top,left=clientRect.left,width=clientRect.width||clientRect.right-clientRect.left,height=clientRect.height||clientRect.bottom-clientRect.top),{x:left,y:top,width:width,height:height}}function getMoveDistance(start,end){return Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2))}function createEventBackend(manager){return new MouseEventBackend(manager)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=createEventBackend;var _jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),ELEMENT_NODE=1,enableMouseEvent="onmousedown"in document.documentElement||"onmousedown"in window,enableTouchEvent="ontouchstart"in document.documentElement||"ontouchstart"in window,isOldBrowser=!window.addEventListener,_mouseDown=!1,_touchDelayTimer=null,_count=0,eventNames={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"},key:{keydown:"keydown",keyup:"keyup"}},MouseEventBackend=function(){function MouseEventBackend(manager){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,MouseEventBackend),
this.status=manager.getStatus(),this.actions=manager.getActions(),this.eventList=["key"],enableMouseEvent&&this.eventList.push("mouse"),enableTouchEvent&&this.eventList.push("touch"),this.sourceNodes={},this.targetNodes={},this._mouseClientOffset={},this.handleTopMoveStartCapture=this.handleTopMoveStartCapture.bind(this),this.handleTopMoveStart=this.handleTopMoveStart.bind(this),this.handleTopMoveCapture=this.handleTopMoveCapture.bind(this),this.handleKeyCapture=this.handleKeyCapture.bind(this),this.handleTopMoveEndCapture=this.handleTopMoveEndCapture.bind(this),this.handleSelectStart=this.handleSelectStart.bind(this)}return _createClass(MouseEventBackend,[{key:"addEventListener",value:function(node,eventName,callback,useCapture){var _this=this;isOldBrowser?!function(){node===window&&(node=document.body);var $ui=(0,_jquery2["default"])(node);useCapture?_lodash2["default"].forEach(_this.eventList,function(type){if(eventNames[type][eventName]){$ui.data("hasCapture"+eventName,"1");var _event="capture_"+eventNames[type][eventName];$ui.on(_event,function(e){callback(e);var $self=(0,_jquery2["default"])(e.currentTarget);$self.attr("iscapturecalled","1")}),$ui.on(eventNames[type][eventName],function(e){var $self=(0,_jquery2["default"])(e.currentTarget);"0"===$self.attr("iscapturecalled")&&callback(e),$self.attr("iscapturecalled","0")})}}):_lodash2["default"].forEach(_this.eventList,function(type){eventNames[type][eventName]&&$ui.on(eventNames[type][eventName],function(e){var $self=(0,_jquery2["default"])(e.currentTarget),allParents=$self.parents(),needTriggerNodes=[],tempTriggerNodes=[e.currentTarget],needTrigger=!1;_lodash2["default"].map(allParents,function(parentItem){var $this=(0,_jquery2["default"])(parentItem);needTrigger?needTriggerNodes=[parentItem].concat(needTriggerNodes):tempTriggerNodes=[parentItem].concat(needTriggerNodes),1===+$this.data("hasCapture"+eventName)&&$this.prop("nodeType")===ELEMENT_NODE&&(needTrigger=!0,needTriggerNodes=[].concat(tempTriggerNodes))});var captureEventName="capture_"+eventNames[type][eventName];_lodash2["default"].forEach(needTriggerNodes,function(elem){var elementClientRect=elem.getBoundingClientRect?elem.getBoundingClientRect():{},_e=_jquery2["default"].Event(captureEventName,{clientX:elementClientRect.left,clientY:elementClientRect.top,target:elem});(0,_jquery2["default"])(elem).trigger(_e)}),callback(e)})})}():_lodash2["default"].forEach(this.eventList,function(type){eventNames[type][eventName]&&(node.removeEventListener(eventNames[type][eventName],callback,useCapture),node.addEventListener(eventNames[type][eventName],callback,useCapture))})}},{key:"removeEventListener",value:function(node,eventName,callback,useCapture){var _this2=this;isOldBrowser?!function(){var $node=(0,_jquery2["default"])(node);_lodash2["default"].forEach(_this2.eventList,function(type){var _event=(useCapture?"capture_":"")+eventNames[type][eventName];useCapture&&$node.attr("hasCapture"+eventName,!1),$node.off(_event)})}():_lodash2["default"].forEach(this.eventList,function(type){node.removeEventListener(eventNames[type][eventName],callback,useCapture)})}},{key:"setup",value:function(){if("undefined"!=typeof window&&!this.isSetUp){this.isSetUp=!0;var target=window;isOldBrowser&&(target=document.body),this.addEventListener(target,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(target,"start",this.handleTopMoveStart),this.addEventListener(target,"move",this.handleTopMoveCapture,!0),this.addEventListener(target,"end",this.handleTopMoveEndCapture,!0),this.addEventListener(target,"keydown",this.handleKeyCapture),this.addEventListener(target,"keyup",this.handleKeyCapture)}}},{key:"teardown",value:function(){if("undefined"!=typeof window){this.isSetUp=!1;var target=window;isOldBrowser&&(target=document.body),this.removeEventListener(target,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(target,"start",this.handleTopMoveStart),this.removeEventListener(target,"move",this.handleTopMoveCapture,!0),this.removeEventListener(target,"end",this.handleTopMoveEndCapture,!0),this.removeEventListener(target,"keydown",this.handleKeyCapture),this.removeEventListener(target,"keyup",this.handleKeyCapture)}}},{key:"connectDragSource",value:function(sourceId,node){var _this3=this;if(this.sourceNodes[sourceId]=node,!node.getAttribute("isbind")){var handleMoveStart=this.handleMoveStart.bind(this,sourceId),handleMoveNode=this.handleNodeMove.bind(this);return node.setAttribute("isbind",!0),this.addEventListener(node,"start",handleMoveStart),this.addEventListener(node,"move",handleMoveNode),this.addEventListener(node,"selectstart",this.handleSelectStart),function(){delete _this3.sourceNodes[sourceId],_this3.removeEventListener(node,"start",handleMoveStart),_this3.removeEventListener(node,"move",handleMoveNode),_this3.removeEventListener(node,"selectstart",_this3.handleSelectStart),node.setAttribute("isbind",!1)}}}},{key:"connectDropTarget",value:function(targetId,node){var _this4=this;return this.targetNodes[targetId]=node,function(){delete _this4.targetNodes[targetId]}}},{key:"getSourceClientOffset",value:function(sourceId){return getNodeClientOffset(this.sourceNodes[sourceId])}},{key:"getSourceClientSize",value:function(sourceId){}},{key:"handleKeyCapture",value:function(e){this.status.isDragging()&&(this.actions.publishDragSource({holdCtrl:e.ctrlKey,holdMeta:e.metaKey}),this.actions.pressedCtrlKey())}},{key:"handleTopMoveStartCapture",value:function(e){return _mouseDown?void(e.preventDefault?e.preventDefault():e.returnValue=!1):(this.moveStartSourceIds=[],void(this._mouseClientOffset=null))}},{key:"handleMoveStart",value:function(sourceId,e){var _this5=this;return window.lgTouchLock=!0,"touchstart"===e.type?(window.clearTimeout(_touchDelayTimer),void(_touchDelayTimer=window.setTimeout(function(){_touchDelayTimer=null,_mouseDown=!0,_count=0,e.preventDefault&&e.preventDefault(),e.returnValue=!1,null!=_this5.moveStartSourceIds&&_this5.moveStartSourceIds.unshift(sourceId);var clientOffset=getEventClientOffset(e);clientOffset&&(_this5._mouseClientOffset=clientOffset)},300))):(_mouseDown=!0,_count=0,e.preventDefault&&e.preventDefault(),e.returnValue=!1,void(null!=this.moveStartSourceIds&&this.moveStartSourceIds.unshift(sourceId)))}},{key:"handleTopMoveStart",value:function(e){var clientOffset=getEventClientOffset(e);clientOffset&&(this._mouseClientOffset=clientOffset)}},{key:"handleNodeMove",value:function(e){_touchDelayTimer&&(window.lgTouchLock=!1),clearTimeout(_touchDelayTimer),_touchDelayTimer=null,_mouseDown&&(e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1)}},{key:"handleTopMoveCapture",value:function(e){var _this6=this;if(_mouseDown){var moveStartSourceIds=this.moveStartSourceIds;if(moveStartSourceIds&&this._mouseClientOffset||this.status.isDragging()){var clientOffset=getEventClientOffset(e);if(clientOffset&&(!this.status.isDragging()&&moveStartSourceIds&&moveStartSourceIds.length>0&&this._mouseClientOffset.hasOwnProperty("x")&&getMoveDistance(this._mouseClientOffset,clientOffset)>2&&(this.actions.beginDrag(moveStartSourceIds,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset.bind(this),publishSource:!1,holdCtrl:e.ctrlKey,holdMeta:e.metaKey}),this.moveStartSourceIds=null),this.status.isDragging()&&(_count++,_count%2!==0))){this.actions.publishDragSource({holdCtrl:e.ctrlKey,holdMeta:e.metaKey});var matchTargetIds=_lodash2["default"].filter(Object.keys(this.targetNodes),function(tId){var boundingRect=_this6.getBoundingReact("target",tId,_this6.targetNodes[tId]),res=clientOffset.x>=boundingRect.left&&clientOffset.x<=boundingRect.right&&clientOffset.y>=boundingRect.top&&clientOffset.y<=boundingRect.bottom;return res});this.actions.hover(matchTargetIds,{clientOffset:clientOffset})}}}}},{key:"handleTopMoveEndCapture",value:function(e){return clearTimeout(_touchDelayTimer),_touchDelayTimer=null,_mouseDown=!1,window.lgTouchLock=!1,_count=0,!this.status.isDragging()||this.status.didDrop()?void(this.moveStartSourceIds=null):(e.preventDefault?e.preventDefault():e.returnValue=!1,this._mouseClientOffset={},this.actions.drop({holdCtrl:e.ctrlKey,holdMeta:e.metaKey}),void this.actions.endDrag())}},{key:"handleSelectStart",value:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},{key:"getBoundingReact",value:function(type,id,node){return node.getBoundingClientRect()}}]),MouseEventBackend}();module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FormGeneratorUtil=__webpack_require__(56),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Rank)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChangeRank:function(id,hasRank){hasRank!==!1?this.handleRemoveRank(id):this.handleAddRank(id)},handleAddRank:function(id){for(var props=this.props,data=props.data,currentFill=props.fill||{},rankDigits=data.isLimitDigit?data.rankDigits:(data.options||[]).length,setNum=null,i=0;i<rankDigits;i++)if(!currentFill[i]){setNum=i;break}null!==setNum&&_formStore2["default"].dispatch({type:"setRank",id:props.data.id,num:setNum,value:id})},handleRemoveRank:function(id){var props=this.props;_formStore2["default"].dispatch({type:"removeRank",id:props.data.id,value:id})},render:function(){var _this=this,_props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,tipsStyle=_formStyle.tipsStyle,rankDigits=data.isLimitDigit?data.rankDigits:(data.options||[]).length,_isFullFill=Object.keys(fill||{}).length===rankDigits;return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),_react2["default"].createElement("p",{className:"fbc_tips",style:tipsStyle},_config.lang.cRankTipsMobile),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_content"},_react2["default"].createElement("div",{className:"fbc_rankAnswer"},_lodash2["default"].map(data.options,function(info,idx){var _hasRank=!1;return _lodash2["default"].forEach(fill,function(id,key){if(+id===+info.sId)return _hasRank=+key,!1}),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_raItem",{fbc_raFull:_isFullFill&&_hasRank===!1}),key:"rAns"+idx,style:_lodash2["default"].assign({position:"relative"},optionStyle),onClick:_this.handleChangeRank.bind(_this,info.sId,_hasRank)},_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_raNum",{has_value:_hasRank!==!1})},_hasRank!==!1?_hasRank+1:null),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_raGroove")},_react2["default"].createElement("div",{className:"fbc_ragInfo"},(data.isAutoNo?_optionNum(data.autoNo,idx+1):"")+info.value)),_react2["default"].createElement("div",{className:"clearB"}))}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_MGString=__webpack_require__(29),_utils=__webpack_require__(30),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Currency)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"numberBlur",id:this.props.data.id,value:e.target.value})},renderTips:function(){var _props=this.props,data=_props.data,valid=(_props.fill,_props.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,content=null,wrapperError=!0,isErrorTip=(valid||[]).indexOf("tip")>-1;return data.isNumRange&&(_lodash2["default"].isNumber(data.numRangeFrom)&&_lodash2["default"].isNumber(data.numRangeTo)?content=_config.lang.cNumberValueRangeHintFunc({numRangeFrom:data.numRangeFrom,numRangeTo:data.numRangeTo}):_lodash2["default"].isNumber(data.numRangeFrom)?content=_config.lang.cNumberValueMoreThanValueFunc({numRangeFrom:data.numRangeFrom}):_lodash2["default"].isNumber(data.numRangeTo)&&(content=_config.lang.cNumberValueLessThanValueFunc({numRangeTo:data.numRangeTo}))),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},content)},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,fw=_props2.fw,itemNum=_props2.itemNum,style=_props2.style,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputUnitStyle=_formStyle2.inputUnitStyle,_symbol="￥";"0"==data.symbol?_symbol=data.symbolDefined:data.symbol&&(_symbol=_config.lang.cCurrencySymbolArray[data.symbol-1]);var cpWidthPre=10*(isMobile?10:data.cpWidth||8),symbolWidth=null;_symbol&&(symbolWidth=Math.min((0,_MGString.getWidth)(_symbol,inputUnitStyle.fontSize+"px/1 "+_utils._FONT),((fw/(itemNum||1)-60)*(cpWidthPre/10)-(isMobile?10:25))/50));var cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},_react2["default"].createElement("span",{className:"fbc_currencySymbol",style:inputUnitStyle},_symbol),_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,style:_lodash2["default"].assign({},inputStyle,{paddingLeft:symbolWidth?symbolWidth+8:null}),onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:""+(_lodash2["default"].isNumber(fill)||fill?fill:"")}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_MGString=__webpack_require__(29),_MGString2=_interopRequireDefault(_MGString),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCInputSearch=__webpack_require__(100),_FCInputSearch2=_interopRequireDefault(_FCInputSearch),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_EMPTY_SEARCH_RES=[];exports["default"]=_react2["default"].createClass({displayName:"Component(CityLocation)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill;this.processedList=[];var _currentSelected=[];return data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&2!==data.componentType&&(fill.struct&&!_lodash2["default"].isEmpty(fill.struct)&&(this.isSelected=!0),_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:_EMPTY_SEARCH_RES}},componentDidMount:function(){this.handlePreGetDropDownContent(this.props,this.state)},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},componentDidUpdate:function(){this.refs.input&&!this.refs.input.isOpen()&&this.checkSetDefault&&(this.handleSetDefaultLocation(),this.checkSetDefault=!1)},handlePreGetDropDownContent:function(props,state){var _this=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this.processedList.indexOf(id)===-1&&(_this.isSelected=!0,_this.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId);var data=this.props.data,isMobile=this.props.isMobile,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle;_formStore2["default"].getLocationInfo(pId,data.minLevel||3,inputStyle.fontSize,this.handleUpdateCurrentLocationInfo,isMobile)},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},handleMouseDownOption:function(lvl,info,e){_utils2["default"].isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(lvl,info,e))},handleSelectOption:function(lvl,info){var data=this.props.data,newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(info.id),this.isSelected=!0,this.setState({currentSelected:newSelected});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3,_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:newSelected.slice(data.isLimitCountry?1:0)}),selectedLvl>newSelected.length&&this.handleGetNextLevelData(info.id)},handleSelectPosition:function(info,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[info.id]}),this.hasContentChange=!1,_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:info.name}),this.refs.input.doClose()},handleSetDefaultLocation:function(){var data=this.props.data;if(!this.state.currentSelected||this.hasContentChange){var value=(this.state.searchResult||_EMPTY_SEARCH_RES)[0];value||(value={id:null}),_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[value.id]}),value.id&&_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:value.name})}this.hasContentChange=!1},handleChangeLocationInput:function(e){var _this2=this,data=this.props.data;this.hasContentChange=!0;var processedValue=_lodash2["default"].trim(e.target.value)||"";_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:processedValue});var _structClear=!1;processedValue?_formStore2["default"].getLocationInfoByTyping(processedValue,data.isLimitCountry?+data.limitCountry:null,data.minLevel).done(function(res){0===res.r&&res.d?(_this2.checkSetDefault=!0,_this2.setState({searchResult:_lodash2["default"].map(res.d,function(item){return{name:item.t,id:item.i,alias:item.a}})})):(_this2.setState({searchResult:_EMPTY_SEARCH_RES}),_structClear=!0)}):(this.setState({searchResult:_EMPTY_SEARCH_RES}),_structClear=!0),_structClear&&_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[null]})},handleCheckDropDownContent:function(pId){this.state.currentLocationInfo[pId]||this.handleGetNextLevelData(pId)},renderSelector:function(){var _this3=this,_props=this.props,data=_props.data,valid=_props.valid,selectedValue=this.state.currentSelected,_formStyle2=this.formStyle(),selectStyle=(_formStyle2.inputStyle,_formStyle2.selectStyle),selectPlaceholderStyle=_formStyle2.selectPlaceholderStyle,selectArrowStyle=_formStyle2.selectArrowStyle,selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null,optionsWidth=0;if(_this3.state.currentLocationInfo[pId])options=[],_lodash2["default"].forEach(_this3.state.currentLocationInfo[pId],function(locationData){locationData.name&&(locationData.width>optionsWidth&&(optionsWidth=locationData.width),options.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{hasImage:0===i,fbc_currentSelected:+locationData.id===+currentValue}),key:"opt"+locationData.id,style:{backgroundImage:0===i?"url(images/nationalFlag/"+locationData.id+".gif)":""},onMouseDown:_this3.handleMouseDownOption.bind(_this3,i,locationData),onClick:_this3.handleSelectOption.bind(_this3,i,locationData)},locationData.name)))});else if(null===_this3.state.currentLocationInfo[pId])return"break";if(_this3.isSelected&&!currentValue)return"break";var defaultWidth=Math.max(_MGString2["default"].getWidth(_config.lang.cSelectorPlaceholder,_config._FONT)+55,80);return null===pId?defaultWidth=Math.max(_MGString2["default"].getWidth(_config.lang.cSelectorPlaceholder,_config._FONT)+55,244):1===pId&&(defaultWidth=Math.max(_MGString2["default"].getWidth(_config.lang.cSelectorPlaceholder,_config._FONT)+55,93)),optionsWidth=Math.round(Math.max(defaultWidth,optionsWidth+37+(0===i?25:0))),res.push(_react2["default"].createElement(_FCDropDown2["default"],{key:"lvl"+(i+1),className:(0,_classnames2["default"])("fbc_mlItem","fbc_select",{hasValue:currentValue,error:valid&&valid.indexOf("required")>-1&&!currentValue}),display:currentValue?(_utils2["default"].getGeoInfo(currentValue)||{}).name||_config.lang.cOptionLoading:_config.lang.cSelectorPlaceholder,imageUri:!(!currentValue||0!==i)&&"url("+window.rootPath("images/nationalFlag/"+currentValue+".gif")+")",selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({width:optionsWidth},currentValue?selectStyle:selectPlaceholderStyle),onExpand:_this3.handleCheckDropDownContent.bind(_this3,pId)},options)),currentValue?void 0:"break"},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret=_loop(i);if("break"===_ret)break}return res},render:function(){var _this4=this,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,style=_props2.style,itemNum=_props2.itemNum,type=data.type,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle3=this.formStyle(),inputStyle=_formStyle3.inputStyle,selectStyle=_formStyle3.selectStyle,inputWithIconStyle=(_formStyle3.selectPlaceholderStyle,_formStyle3.inputWithIconStyle),inputIconStyle=_formStyle3.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent"],_contentStyle=null,cityList=[];_isLimitCountry&&(_contentClass.push("has-country"),cityList.push(_react2["default"].createElement("div",{className:"fbc_mlItem fbc_select hasValue country is-limitCountry",key:"limitCountry",style:selectStyle},_react2["default"].createElement("p",{className:"fbc_selectValue hasImage",style:{backgroundImage:"url(images/nationalFlag/"+limitCountry+".gif)"}},(_utils2["default"].getGeoInfo(limitCountry)||{}).name))));var cpWidthPre=10*(data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"}),2===data.componentType?!function(){2===+data.cpLayout&&itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100),_contentClass.push("fbc_widthCp"),_contentStyle={width:cpWidthPre+"%"};var searchResult=_this4.state.searchResult,searchResOptions=[];searchResult&&(fill||{}).content&&_lodash2["default"].forEach(searchResult,function(info){searchResOptions.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:+info.id===+(fill||{}).struct}),key:"opt"+info.id,onClick:_this4.handleSelectPosition.bind(_this4,info)},_react2["default"].createElement("p",null,info.name),info.alias?_react2["default"].createElement("p",{className:"fbc_selectAlia"},info.alias):null))}),(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&(_contentClass.push("has-city"),cityList.push(_react2["default"].createElement(_FCInputSearch2["default"],{ref:"input",key:"city",inputClassName:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),className:"fbc_mlItem fbc_inputSelect city",icon:"location"!==type||_isLimitCountry?null:String.fromCharCode(59082),themeColor:style.themeColor,style:"location"!==type||_isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,value:(fill||{}).content||null,onChange:_this4.handleChangeLocationInput,onBlur:_this4.handleSetDefaultLocation},searchResOptions)))}():(2===+data.cpLayout&&itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%"),cityList=cityList.concat(this.renderSelector())),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:_contentClass.join(" "),style:_contentStyle},cityList,_react2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"FCInputSearch",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return{isOpen:!1,currentFocus:-1}},componentWillUpdate:function(nextProps,nextState){},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){"$$resize"===action.type&&this.doClose()},isOpen:function(){return this.state.isOpen},doClose:function(){this.refs.focusContent&&this.refs.focusContent.getContent().blur()},handleMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault()},handleDropDownMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault(),e.stopPropagation()},handleToggleSelector:function(e){e.preventDefault(),e.stopPropagation();var focusContent=this.refs.focusContent,open=this.currentIsOpen;if(focusContent){var $focusContent=_reactDom2["default"].findDOMNode(focusContent);open?$focusContent.blur():$focusContent.focus()}},handleExpandDropDown:function(e){this.props.onExpand&&this.props.onExpand(),this.setState({isOpen:!0,currentFocus:0})},handleCondenseDropDown:function(e){this.setState({isOpen:!1,currentFocus:-1})},handleDropDownOperate:function(e){this.state.isOpen&&[13,38,40].indexOf(e.keyCode)>-1&&(13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.state.isOpen&&this.state.currentFocus>-1&&this.handleItemSelect(e)):38===e.keyCode?(e.preventDefault(),e.stopPropagation(),0===this.state.currentFocus?this.setState({currentFocus:_react2["default"].Children.count(this.props.children)-1}):this.setState({currentFocus:this.state.currentFocus-1})):40===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.state.currentFocus===_react2["default"].Children.count(this.props.children)-1?this.setState({currentFocus:0}):this.setState({currentFocus:this.state.currentFocus+1})))},handleItemSelect:function(e){var _this=this;_react2["default"].Children.forEach(this.props.children,function(child,idx){if(idx===_this.state.currentFocus)return child.props.onClick&&child.props.onClick(e),!1})},handleItemMouseEnter:function(idx){this.state.isOpen&&this.setState({currentFocus:idx})},handleItemMouseLeave:function(){this.setState({currentFocus:-1})},render:function(){var _this2=this,_props=this.props,value=_props.value,children=_props.children,inputClassName=_props.inputClassName,onChange=_props.onChange,icon=_props.icon,style=_props.style,iconStyle=_props.iconStyle,themeColor=_props.themeColor,props=_objectWithoutProperties(_props,["value","children","inputClassName","onChange","icon","style","iconStyle","themeColor"]),open=this.state.isOpen,currentFocus=this.state.currentFocus;return _react2["default"].createElement("div",props,_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_selectValue",inputClassName),value:value,type:"text",spellCheck:!1,ref:"focusContent",icon:icon,themeColor:themeColor,style:style,iconStyle:iconStyle,onFocus:this.handleExpandDropDown,onBlur:this.handleCondenseDropDown,onKeyDown:this.handleDropDownOperate,onChange:onChange}),_react2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_selectList",{fbc_showList:open&&_lodash2["default"].isArray(children)&&children.length>0
}),onMouseDown:this.handleDropDownMouseDown},_react2["default"].Children.map(children,function(child,idx){return _react2["default"].cloneElement(child,{className:(0,_classnames2["default"])(child.props.className,{fbl_hover:idx===currentFocus}),onMouseEnter:_this2.handleItemMouseEnter.bind(_this2,idx),onMouseLeave:_this2.handleItemMouseLeave})})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_EMPTY_SEARCH_RES=[];exports["default"]=_react2["default"].createClass({displayName:"Component(CityLocationMobile)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill,_currentSelected=[];return this.processedList=[],data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&2!==data.componentType&&(fill.struct&&!_lodash2["default"].isEmpty(fill.struct)&&(this.isSelected=!0),_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:_EMPTY_SEARCH_RES}},componentDidMount:function(){var _this=this;this.handlePreGetDropDownContent(this.props,this.state),this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this.handleCheckDropDownContent(id)})},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},componentDidUpdate:function(){var _this2=this;if(this.updateSelector){if(this.refs[this.updateSelector]){var domElm=_reactDom2["default"].findDOMNode(this.refs[this.updateSelector]);domElm.focus()}this.updateSelector=!1}this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this2.handleCheckDropDownContent(id)})},handlePreGetDropDownContent:function(props,state){var _this3=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this3.processedList.indexOf(id)===-1&&(_this3.isSelected=!0,_this3.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId);var data=this.props.data;_formStore2["default"].getLocationInfo(pId,data.minLevel||3,"",this.handleUpdateCurrentLocationInfo,!0)},handleCheckDropDownContent:function(pId,needFocus){this.state.currentLocationInfo[pId]||(needFocus&&(this.focusElm="dp"+pId),this.handleGetNextLevelData(pId))},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.focusElm&&(this.updateSelector=this.focusElm,this.focusElm=null),this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},handleSelectOption:function(lvl,e){var data=this.props.data,newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(+e.target.value),this.setState({currentSelected:newSelected});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3,this.isSelected=!0,_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:newSelected.slice(data.isLimitCountry?1:0)}),this.handleGetNextLevelData(+e.target.value)},handleChangeLocationInput:function(e){var data=this.props.data;this.hasContentChange=!0;var processedValue=_lodash2["default"].trim(e.target.value)||"";_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:processedValue})},handleSetDefaultLocation:function(e){var _this4=this,data=this.props.data,processedValue=_lodash2["default"].trim(e.target.value)||"";processedValue&&_formStore2["default"].getLocationInfoByTyping(processedValue,data.isLimitCountry?+data.limitCountry:null,data.minLevel).done(function(res){if(0===res.r&&res.d){_this4.checkSetDefault=!0;var value=res.d[0];_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[value.i]}),value.i&&_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:value.t})}else _formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[null]})})},renderSelector:function(){var _this5=this;this.needGetId=[];var data=this.props.data,state=this.state,selectedValue=state.currentSelected,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectedLvl=(_formStyle.selectStyle,_formStyle.selectPlaceholderStyle,void 0);selectedLvl=data.minLevel?+data.minLevel:3;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null;if(state.currentLocationInfo[pId])options=[],options.push(_react2["default"].createElement("option",{value:"",key:"default"},_config.lang.cSelectorPlaceholder)),_lodash2["default"].forEach(state.currentLocationInfo[pId],function(locationData){locationData.name&&options.push(_react2["default"].createElement("option",{value:""+locationData.id,key:"lcid"+locationData.id},(_utils._EMOJI_FLAGS_MAPPING[locationData.id]?_utils._EMOJI_FLAGS_MAPPING[locationData.id]+"   ":"")+((locationData||{}).name||"")))});else if(null===_this5.state.currentLocationInfo[pId])return"break";return _this5.isSelected&&!currentValue?"break":(null===options&&_this5.needGetId.push(pId),res.push(_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_locItem","fbc_select",{hasValue:currentValue}),key:"fbSelect"+pId+i,onClick:null===options?_this5.handleCheckDropDownContent.bind(_this5,pId,!0):null},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),options?_react2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),ref:"dp"+pId,onChange:_this5.handleSelectOption.bind(_this5,i),value:""+currentValue,style:inputStyle},options):_react2["default"].createElement("p",{className:"fbc_selectValue fbc_innerSelect",style:_lodash2["default"].assign({},inputStyle,{lineHeight:"38px",padding:"0 5px"})},_config.lang.cSelectorPlaceholder))),currentValue?void 0:"break")},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret=_loop(i);if("break"===_ret)break}return res},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,type=data.type,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputWithIconStyle=(_formStyle2.selectStyle,_formStyle2.selectPlaceholderStyle,_formStyle2.inputWithIconStyle),inputIconStyle=_formStyle2.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent","fbc_widthCp"],_contentStyle=null,cityList=[];return _isLimitCountry&&(_contentClass.push("has-country"),cityList.push(_react2["default"].createElement("div",{className:"fbc_locItem fbc_select hasValue country",key:"limitCountry",style:inputStyle},_react2["default"].createElement("p",{className:"fbc_selectValue hasImage"},(_utils._EMOJI_FLAGS_MAPPING[limitCountry]?_utils._EMOJI_FLAGS_MAPPING[limitCountry]+"   ":"")+(_utils2["default"].getGeoInfo(limitCountry)||{}).name)))),2===data.componentType?(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&cityList.push(_react2["default"].createElement(_FCTextBox2["default"],{component:"input",key:"inputCity",className:(0,_classnames2["default"])("fbc_locItem","fbc_inputSelect","fbc_input","city",{error:valid&&valid.length>0}),value:(fill||{}).content||null,icon:"location"!==type||_isLimitCountry?null:String.fromCharCode(59082),themeColor:style.themeColor,style:"location"!==type||_isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,spellCheck:!1,autoComplete:"off",onChange:this.handleChangeLocationInput,onBlur:this.handleSetDefaultLocation})):cityList=cityList.concat(this.renderSelector()),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("div",{className:_contentClass.join(" "),style:_contentStyle},cityList,_react2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_MGString=__webpack_require__(29),_MGString2=_interopRequireDefault(_MGString),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Address)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill,_currentSelected=[];return this.processedList=[],data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&fill.struct&&(this.isSelected=!0,_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:[]}},componentWillReceiveProps:function(nextProps){var data=nextProps.data,fill=nextProps.fill,_currentSelected=[];fill&&fill.struct&&!_lodash2["default"].isEmpty(fill.struct)&&(data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),_currentSelected=_currentSelected.concat(fill.struct),this.setState({currentSelected:_currentSelected}))},componentDidMount:function(){this.handlePreGetDropDownContent(this.props,this.state)},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},handlePreGetDropDownContent:function(props,state){var _this=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this.processedList.indexOf(id)===-1&&(_this.isSelected=!0,_this.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId);var isMobile=(this.props.data,this.props.isMobile),_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle;_formStore2["default"].getLocationInfo(pId,4,inputStyle.fontSize,this.handleUpdateCurrentLocationInfo,isMobile)},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},_handleProcessNextLvl:function(list){var data=this.props.data;this.setState({currentSelected:list});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:4,this.isSelected=!0,_formStore2["default"].dispatch({type:"setAddressSelector",id:data.id,value:list.slice(data.isLimitCountry?1:0)}),selectedLvl>list.length&&this.handleGetNextLevelData(list[list.length-1])},handleSelectOption:function(lvl,info){var newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(info.id),this._handleProcessNextLvl(newSelected)},handleMouseDownOption:function(lvl,info,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(lvl,info,e))},handleCheckDropDownContent:function(pId){this.state.currentLocationInfo[pId]||this.handleGetNextLevelData(pId)},renderSelector:function(){var _this2=this,data=this.props.data,selectedValue=this.state.currentSelected,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,selectStyle=_formStyle2.selectStyle,selectPlaceholderStyle=_formStyle2.selectPlaceholderStyle,selectArrowStyle=_formStyle2.selectArrowStyle,selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:4;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null,optionsWidth=0;if(_this2.state.currentLocationInfo[pId])options=[],_lodash2["default"].forEach(_this2.state.currentLocationInfo[pId],function(locationData){locationData.name&&(locationData.width>optionsWidth&&(optionsWidth=locationData.width),options.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{hasImage:0===i,fbc_currentSelected:+locationData.id===+currentValue}),key:"opt"+locationData.id,style:{backgroundImage:0===i?"url(images/nationalFlag/"+locationData.id+".gif)":""},onMouseDown:_this2.handleMouseDownOption.bind(_this2,i,locationData),onClick:_this2.handleSelectOption.bind(_this2,i,locationData)},locationData.name)))});else if(null===_this2.state.currentLocationInfo[pId])return"break";if(_this2.isSelected&&!currentValue)return"break";options&&!_lodash2["default"].isEmpty(options)||!currentValue||(optionsWidth=_MGString2["default"].getWidth((_utils2["default"].getGeoInfo(currentValue)||{}).name||_config.lang.cOptionLoading,(inputStyle.fontSize||14)+"px/1 "+_utils2["default"]._FONT));var defaultWidth=80;return null===pId?defaultWidth=244:1===pId&&(defaultWidth=93),optionsWidth=Math.round(Math.max(defaultWidth,optionsWidth+37+(0===i?25:0))),res.push(_react2["default"].createElement(_FCDropDown2["default"],{key:"lvl"+(i+1),className:(0,_classnames2["default"])("fbc_mlItem","fbc_select",{hasValue:currentValue}),display:currentValue?(_utils2["default"].getGeoInfo(currentValue)||{}).name||_config.lang.cOptionLoading:_config.lang.cSelectorPlaceholder,imageUri:!(!currentValue||0!==i)&&"url("+window.rootPath("images/nationalFlag/"+currentValue+".gif")+")",selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({width:optionsWidth},currentValue?selectStyle:selectPlaceholderStyle),onExpand:_this2.handleCheckDropDownContent.bind(_this2,pId)},options)),currentValue?void 0:"break"},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret=_loop(i);if("break"===_ret)break}return res},handleChangeAddressDetail:function(e){var _this3=this,data=this.props.data;_formStore2["default"].dispatch({type:"setAddressInput",id:data.id,value:e.target.value});var fill=this.props.fill;fill&&(!fill||fill.struct&&!_lodash2["default"].isEmpty(fill.struct))&&2!==data.componentType||_formStore2["default"].getRawLocationInfo(e.target.value,data.isLimitCountry?+data.limitCountry:null,2===data.componentType?0:1).done(function(res){0===res.r&&res.d&&!function(){var LVL=["I","II","III","IV"],locationSelected=[];LVL.forEach(function(key,idx){if(res.d[key]){var _id=res.d[key];return locationSelected.push(_id),void(res.d.mpLoc&&_utils2["default"].addGeoInfo(_id,res.d[LVL[idx-1]],res.d.mpLoc[_id]))}return!1}),locationSelected[0]===data.limitCountry&&_this3._handleProcessNextLvl(locationSelected)}()})},handleChangeZipCode:function(e){var data=this.props.data;_formStore2["default"].dispatch({type:"setAddressZipCode",id:data.id,value:e.target.value})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,itemNum=_props.itemNum,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle3=this.formStyle(),selectStyle=_formStyle3.selectStyle,inputStyle=(_formStyle3.selectPlaceholderStyle,_formStyle3.inputStyle),inputWithIconStyle=_formStyle3.inputWithIconStyle,inputIconStyle=_formStyle3.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent","fbc_widthCp"],cityList=[],_countryWidth=0;_isLimitCountry&&cityList.push(_react2["default"].createElement("div",{className:"fbc_mlItem fbc_select hasValue country is-limitCountry",key:"limitCountry",style:selectStyle},_react2["default"].createElement("p",{className:"fbc_selectValue hasImage",style:{backgroundImage:"url(images/nationalFlag/"+limitCountry+".gif)"}},(_utils2["default"].getGeoInfo(limitCountry)||{}).name))),2===data.componentType?(isLimitCountry&&(_contentClass.push("has-country"),_countryWidth="1"===minLevel?99:24),(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&(_contentClass.push("has-city"),cityList.push(_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_mlItem fbc_input city",key:"city",value:fill?fill.content:"",icon:isLimitCountry?null:String.fromCharCode(59083),themeColor:style.themeColor,style:isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,placeholder:_config.lang.cAddressDetailsPlaceholder,onChange:this.handleChangeAddressDetail})))):(cityList=cityList.concat(this.renderSelector()),cityList.push(_react2["default"].createElement("div",{className:"clearB",key:"clearB"})),cityList.push(_react2["default"].createElement("div",{className:"fbc_addressDetails",key:"details"},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_mlItem","fbc_input","address",{error:valid&&valid.indexOf("required")>-1}),value:fill?fill.content:"",style:inputStyle,placeholder:_config.lang.cAddressDetailsPlaceholder,onChange:this.handleChangeAddressDetail}),_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_mlItem fbc_input zipCode",value:fill?fill.zipCode:"",style:inputStyle,placeholder:_config.lang.cAddressCodePlaceholder,onChange:this.handleChangeZipCode}),_react2["default"].createElement("div",{className:"clearB"}))));var cpWidthPre=10*(data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:_contentClass.join(" "),style:{width:cpWidthPre+"%"}},cityList,_react2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox);exports["default"]=_react2["default"].createClass({displayName:"Component(AddressMobile)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill,_currentSelected=[];return this.processedList=[],data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&fill.struct&&(this.isSelected=!0,_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:[]}},componentDidMount:function(){var _this=this;this.handlePreGetDropDownContent(this.props,this.state),this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this.handleCheckDropDownContent(id)})},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},componentDidUpdate:function(){var _this2=this;if(this.updateSelector){if(this.refs[this.updateSelector]){var domElm=_reactDom2["default"].findDOMNode(this.refs[this.updateSelector]);domElm.focus()}this.updateSelector=!1}this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this2.handleCheckDropDownContent(id)})},handlePreGetDropDownContent:function(props,state){var _this3=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this3.processedList.indexOf(id)===-1&&(_this3.isSelected=!0,_this3.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId),_formStore2["default"].getLocationInfo(pId,4,"",this.handleUpdateCurrentLocationInfo,!0)},handleCheckDropDownContent:function(pId,needFocus){this.state.currentLocationInfo[pId]||(needFocus&&(this.focusElm="dp"+pId),this.handleGetNextLevelData(pId))},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.focusElm&&(this.updateSelector=this.focusElm,this.focusElm=null),this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},handleSelectOption:function(lvl,e){var data=this.props.data,newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(+e.target.value),this.setState({currentSelected:newSelected});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:4,this.isSelected=!0,_formStore2["default"].dispatch({type:"setAddressSelector",id:data.id,value:newSelected.slice(data.isLimitCountry?1:0)}),this.handleGetNextLevelData(+e.target.value)},handleChangeAddressDetail:function(e){var data=this.props.data;_formStore2["default"].dispatch({type:"setAddressInput",id:data.id,value:e.target.value})},handleBlurAddressDetail:function(e){var _this4=this,data=this.props.data;_formStore2["default"].dispatch({type:"setAddressInput",id:data.id,value:e.target.value});var fill=this.props.fill;fill&&(!fill||fill.struct&&!_lodash2["default"].isEmpty(fill.struct))&&2!==data.componentType||_formStore2["default"].getRawLocationInfo(e.target.value,data.isLimitCountry?+data.limitCountry:null,2===data.componentType?0:1).done(function(res){0===res.r&&res.d&&!function(){var LVL=["I","II","III","IV"],locationSelected=[];LVL.forEach(function(key,idx){if(res.d[key]){var _id=res.d[key];return locationSelected.push(_id),void(res.d.mpLoc&&_utils2["default"].addGeoInfo(_id,res.d[LVL[idx-1]],res.d.mpLoc[_id]))}return!1}),locationSelected[0]===data.limitCountry&&_this4._handleProcessNextLvl(locationSelected)}()})},handleChangeZipCode:function(e){var data=this.props.data;_formStore2["default"].dispatch({type:"setAddressZipCode",id:data.id,value:e.target.value})},renderSelector:function(){var _this5=this;this.needGetId=[];var data=this.props.data,state=this.state,selectedValue=state.currentSelected,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectedLvl=(_formStyle.selectStyle,_formStyle.selectPlaceholderStyle,void 0);selectedLvl=data.minLevel?+data.minLevel:4;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null;if(state.currentLocationInfo[pId])options=[],options.push(_react2["default"].createElement("option",{value:"",key:"default"},_config.lang.cSelectorPlaceholder)),_lodash2["default"].forEach(state.currentLocationInfo[pId],function(locationData){locationData.name&&options.push(_react2["default"].createElement("option",{value:""+locationData.id,key:"lcid"+locationData.id},(_utils._EMOJI_FLAGS_MAPPING[locationData.id]?_utils._EMOJI_FLAGS_MAPPING[locationData.id]+"   ":"")+locationData.name))});else if(null===_this5.state.currentLocationInfo[pId])return"break";return _this5.isSelected&&!currentValue?"break":(null===options&&_this5.needGetId.push(pId),res.push(_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_locItem","fbc_select",{hasValue:currentValue}),key:"fbSelect"+pId+i,onClick:null===options?_this5.handleCheckDropDownContent.bind(_this5,pId,!0):null},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),options?_react2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),ref:"dp"+pId,onChange:_this5.handleSelectOption.bind(_this5,i),value:""+currentValue,style:inputStyle},options):_react2["default"].createElement("p",{className:"fbc_selectValue fbc_innerSelect",style:_lodash2["default"].assign({},inputStyle,{lineHeight:"38px",padding:"0 5px"})},_config.lang.cSelectorPlaceholder))),currentValue?void 0:"break")},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret2=_loop(i);if("break"===_ret2)break}return res},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle2=this.formStyle(),inputStyle=(_formStyle2.selectStyle,_formStyle2.selectPlaceholderStyle,_formStyle2.inputStyle),inputWithIconStyle=_formStyle2.inputWithIconStyle,inputIconStyle=_formStyle2.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent","fbc_widthCp"],_contentStyle=null,cityList=[];return _isLimitCountry&&cityList.push(_react2["default"].createElement("div",{className:"fbc_locItem fbc_select hasValue country",key:"limitCountry"},_react2["default"].createElement("p",{className:"fbc_selectValue hasImage"},(_utils._EMOJI_FLAGS_MAPPING[limitCountry]?_utils._EMOJI_FLAGS_MAPPING[limitCountry]+"   ":"")+((_utils2["default"].getGeoInfo(limitCountry)||{}).name||"")))),2===data.componentType?(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&cityList.push(_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_locItem fbc_input city",key:"city",value:fill?fill.content:"",icon:isLimitCountry?null:String.fromCharCode(59083),themeColor:style.themeColor,style:isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,placeholder:_config.lang.cAddressDetailsPlaceholder,spellCheck:!1,autoComplete:"off",onChange:this.handleChangeAddressDetail,onBlur:this.handleBlurAddressDetail})):cityList=cityList.concat(this.renderSelector(),[_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_locItem fbc_input address",key:"addressInput",placeholder:_config.lang.cAddressDetailsPlaceholder,style:inputStyle,spellCheck:!1,onChange:this.handleChangeAddressDetail,onBlur:this.handleBlurAddressDetail,value:fill?fill.content||"":""}),_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_locItem fbc_input zipCode",key:"zipCodeInput",style:inputStyle,placeholder:_config.lang.cAddressCodePlaceholder,spellCheck:!1,onChange:this.handleChangeZipCode,value:fill?fill.zipCode||"":""})]),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("div",{className:_contentClass.join(" "),style:_contentStyle},cityList,_react2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_tools=__webpack_require__(33),_MGString=__webpack_require__(29),_LegoCountPicker=(_interopRequireDefault(_MGString),__webpack_require__(105)),_LegoCountPicker2=_interopRequireDefault(_LegoCountPicker),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_FCPreview=__webpack_require__(107),_FCPreview2=_interopRequireDefault(_FCPreview),_MGIntl=__webpack_require__(12),_MGIntl2=_interopRequireDefault(_MGIntl),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),EXAMPLE_BG="images/form/form_picExample_bg.png";exports["default"]=_react2["default"].createClass({displayName:"Component(Commodity)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],componentDidMount:function(){this.popElem=document.getElementById("popwin")},handleImgError:function(e){this.isHandleError&&(this.isHandleError=!0,e.target.src=window.rootPath(EXAMPLE_BG))},handleShowPreview:function(image,e){e.preventDefault(),e.stopPropagation();var $target=(0,_jquery2["default"])(e.target).next(),scrollTop=document.body.scrollTop,scrollLeft=document.body.scrollLeft;_reactDom2["default"].render(_react2["default"].createElement(_FCPreview2["default"],{img:image,from:{x:$target.offset().left-scrollLeft,y:$target.offset().top-scrollTop,width:$target.width(),height:$target.height()},duration:200}),this.popElem)},handleCountChange:function(id,e,num){_formStore2["default"].dispatch({type:"setCommodityValue",id:this.props.data.id,cId:id,value:num})},renderCommodities:function(){var _props=this.props,data=_props.data,fill=_props.fill,cartValid=(_props.valid,_props.cartValid),isMobile=_props.isMobile,mode=_props.mode,_formStyle=this.formStyle(),optionTipsStyle=_formStyle.optionTipsStyle,commodityNameStyle=_formStyle.commodityNameStyle,commodityDescribeStyle=_formStyle.commodityDescribeStyle,settings=_utils2["default"].getSettings(),commodities=data.commodities||[],_commodities=[],_temp=null,_num=0,_optionsLayout=data.optionsLayout;
isMobile&&(_optionsLayout=Math.min(2,_optionsLayout||0));for(var i=0,len=commodities.length;i<len;i++)if(_temp=commodities[i],1!==mode||_temp.sId&&null!=_temp.price){var _remain=null,_hide=!1,maxValue=null,remain=null;if(data.isLimitStock&&data.isLimitOptions&&data.optionsQuotaInfo&&data.optionsQuotaInfo[_temp.sId]){var quotaInfo=data.optionsQuotaInfo[_temp.sId];if(_lodash2["default"].isNumber(quotaInfo[2])&&quotaInfo[2]>=0&&(maxValue=quotaInfo[2]),_lodash2["default"].isNumber(quotaInfo[1])&&(remain=quotaInfo[1]-quotaInfo[0]>=0?quotaInfo[1]-quotaInfo[0]:0),data.isHideFullOption&&0===remain){_hide=!0;continue}if(data.isShowOptionLimit){var _c=null,_setRemain=!1;_lodash2["default"].isNumber(remain)&&(_setRemain=!0,_c=_config.lang.cQuotaRemainingFunc({remaining:Math.max(remain,0)})),_lodash2["default"].isNumber(maxValue)&&(_c=_setRemain?_config.lang.cCommodityRemainMaxTips({max:Math.max(Math.min(remain,maxValue),0),remain:Math.max(remain,0)}):_config.lang.cCommodityMaxTips({max:Math.max(maxValue,0)})),_remain=_react2["default"].createElement("p",{className:"fbc_commodityTips",style:optionTipsStyle},_c)}}var _pickerMax=null;data.isLimitStock&&data.isLimitOptions&&(_lodash2["default"].isNumber(maxValue)&&(_pickerMax=maxValue),_lodash2["default"].isNumber(remain)&&(_pickerMax=_pickerMax?Math.min(_pickerMax,remain):remain)),data.isLimitStock&&data.setMaxBuyNum&&data.setMaxBuyNum[_temp.id]&&(_pickerMax=null!==_pickerMax&&void 0!==_pickerMax?Math.min(+data.setMaxBuyNum[_temp.id],_pickerMax):+data.setMaxBuyNum[_temp.id]),null===_pickerMax&&(_pickerMax=1/0);var imageInfo=_temp.image||{},image=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageUri,imageFull=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageFullUri;1===data.optionsLayout&&(image=imageFull);var _image=null;image&&(_image=_react2["default"].createElement("div",{className:"fbc_commodityImage",key:"prImg"},_react2["default"].createElement("span",{className:"fbc_imgPreview iconfont",onClick:this.handleShowPreview.bind(this,imageFull)},String.fromCharCode(59010)),_react2["default"].createElement("img",{className:"fbc_commodityImg",src:window.rootPath(image||EXAMPLE_BG),onError:this.handleImgError,onClick:_pickerMax>(fill?fill[_temp.sId]||0:0)?this.handleCountChange.bind(this,_temp.sId,null,(fill?fill[_temp.sId]||0:0)+1):null})));var symbol="￥";""+settings.cartSymbol=="0"?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var intlNumberProps=_MGIntl2["default"].getProperties(),_price=(""+_MGIntl2["default"].localeStringToNumber(_temp.price)).split(".");isMobile||(_price=_MGIntl2["default"].localeStringToNumber(_temp.price).toFixed(2).split("."));var link="javascript:void(0)";if(_temp.isJumpTo&&_temp.jumpTo){var _tempLink=(0,_tools.linkify)(_temp.jumpTo);_tempLink&&(link=_tempLink)}var _describe=null;_lodash2["default"].isArray(_temp.describe)?!function(){var infoLen=_temp.describe.length;_describe=_lodash2["default"].map(_temp.describe,function(content,idx){var _content=content,_wrap=idx+1===infoLen?null:_react2["default"].createElement("br",null);return!content&&infoLen>1?_react2["default"].createElement("br",{key:"emptyLine"+idx}):_react2["default"].createElement("span",{key:"line"+idx},_content,_wrap)})}():_describe=_react2["default"].createElement("p",null,_temp.describe||""),_num++,_commodities.push(_react2["default"].createElement("li",{key:"item"+i,className:(0,_classnames2["default"])("fbc_commodityLi",{clearB:_num%_optionsLayout===1})},_image,_react2["default"].createElement("p",{className:"fbc_commodityName",style:commodityNameStyle},_temp.isJumpTo&&_temp.jumpTo?_react2["default"].createElement("a",{className:"fbc_commodityNameJump",target:"_blank",href:link},_temp.name||""):_temp.name||""),_temp.describe?_react2["default"].createElement("p",{className:"fbc_commodityDescribe",style:commodityDescribeStyle},_describe):null,_remain,_react2["default"].createElement("div",{className:"fbc_purchaseInfo"},data.isHidePrice?null:_react2["default"].createElement("p",{className:"fbc_commodityPrice"},symbol+" "+_price[0],_price[1]?_react2["default"].createElement("span",{className:"decimalPart"},intlNumberProps.decimal+_price[1]):null),_react2["default"].createElement(_LegoCountPicker2["default"],{className:"cp_iCountPicker fbc_commodityCount",name:"count",maxDisabled:cartValid&&(cartValid.indexOf("quantityOver")>-1||cartValid.indexOf("amountOver")>-1),inputDisable:!1,maxValue:_pickerMax,value:fill?fill[_temp.sId]||0:0,minValue:0,onChange:this.handleCountChange.bind(this,_temp.sId)}))))}else console.error("commodity component ID LOST ->."+_temp.id+" : "+_temp.name);return data.isLimitStock&&data.isLimitOptions&&data.isShowOptionLimit&&0===_commodities.length&&commodities.length>0&&_commodities.push(_react2["default"].createElement("li",{className:"fbc_emptyTip"},_config.lang.cOptionNull)),_commodities},render:function(){var _props2=this.props,data=_props2.data,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,_optionsLayout=data.optionsLayout;return isMobile&&(_optionsLayout=Math.min(2,_optionsLayout||0)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_react2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_content","commodity",_optionsLayout?"layout-"+_optionsLayout:"")},this.renderCommodities(),_react2["default"].createElement("li",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_MGSelectionManager=__webpack_require__(106),_MGSelectionManager2=_interopRequireDefault(_MGSelectionManager),_MGUtil=__webpack_require__(26),_MGUtil2=_interopRequireDefault(_MGUtil),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"LegoCountPicker.react",mixins:[_reactAddonsPureRenderMixin2["default"]],propTypes:{className:_react2["default"].PropTypes.string,name:_react2["default"].PropTypes.string,style:_react2["default"].PropTypes.object,hasInput:_react2["default"].PropTypes.bool,inputDisable:_react2["default"].PropTypes.bool,value:_react2["default"].PropTypes.number,maxValue:_react2["default"].PropTypes.number,minValue:_react2["default"].PropTypes.number,stepValue:_react2["default"].PropTypes.number,disabled:_react2["default"].PropTypes.bool,maxDisabled:_react2["default"].PropTypes.bool,minDisabled:_react2["default"].PropTypes.bool,onChange:_react2["default"].PropTypes.func},getDefaultProps:function(){return{btnTitle:[],hasInput:!0,maxValue:1/0,minValue:0,stepValue:1,value:0}},getInitialState:function(){return{value:this._returnValueValid(this.props.value),defaultValue:this._returnValueValid(this.props.value),focus:!1}},componentWillReceiveProps:function(nextProps){this.setState({value:this._returnValueValid(nextProps.value,nextProps),defaultValue:this._returnValueValid(nextProps.value,nextProps)})},_returnValueValid:function(v,props){return props||(props=this.props),v-=0,isNaN(v)||Math.floor(v)!==v?props.minValue:Math.min(Math.max(props.minValue,v),props.maxValue)},handleReduce:function(e){e.stopPropagation(),this.props.disabled||this.state.value<this.props.minValue||this.props.minDisabled||this.handleValueChange(e,this.state.value-this.props.stepValue)},handleIncrease:function(e){e.stopPropagation(),this.props.disabled||this.state.value>this.props.maxValue||this.props.maxDisabled||this.handleValueChange(e,this.state.value+this.props.stepValue)},handleKeyDown:function(e){e=e||window.event;var keyCode=e.keyCode||e.which,value=_reactDom2["default"].findDOMNode(this.refs.countpickerInput).value;38===keyCode?(e.stopPropagation(),e.preventDefault(),this.handleReduce(e)):40===keyCode?(e.stopPropagation(),e.preventDefault(),this.handleIncrease(e)):13===keyCode&&this.handleValueChange(e,value)},handleUnitMouseDown:function(e){e.stopPropagation(),e.preventDefault(),this.props.disabled||(this.setState({focus:!0}),_MGSelectionManager2["default"].focusEnd(_reactDom2["default"].findDOMNode(this.refs.countpickerInput),!0))},handleFocus:function(e){this.props.disabled||this.setState({focus:!0})},handleBlur:function(e){var value=_reactDom2["default"].findDOMNode(this.refs.countpickerInput).value;this.handleValueChange(e,value),this.setState({focus:!1})},handleChange:function(e){var value=_reactDom2["default"].findDOMNode(this.refs.countpickerInput).value;this.setState({defaultValue:value})},handleValueChange:function(e,v){var props=this.props,value=this._returnValueValid(v-0);this.setState({value:value,defaultValue:value}),props.onChange&&props.onChange(e,value)},render:function(){var state=this.state,value=state.value,props=this.props,_reduceClass={"lg-countpicker-reduce":!0,disabled:props.disabled||value==props.minValue||value<props.minValue||props.minDisabled},_increaseClass={"lg-countpicker-increase":!0,disabled:props.disabled||value==props.maxValue||value>props.maxValue||props.maxDisabled},_class={"lg-countpicker":!0,"no-input":!props.hasInput};props.className&&props.className.split(" ").forEach(function(v){v&&(_class[v]=!0)});var _inputProps={ref:"countpickerInput",className:(0,_classnames2["default"])({"lg-countpicker-input":!0,"lg-countpicker-focus":state.focus}),type:_MGUtil2["default"].fuzzyDeviceCheck?"number":"text",value:state.defaultValue,autoComplete:"off",onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,disabled:props.disabled||props.inputDisable,style:{pointerEvents:props.disabled||props.inputDisable?"none":"visible"},tabIndex:0},_input=null,_unit=null;return props.hasInput&&(_input=_react2["default"].createElement("input",_inputProps),props.unit&&(_unit=_react2["default"].createElement("i",{className:"iconfont lg-countpicker-unit",onMouseDown:this.handleUnitMouseDown},props.unit))),_react2["default"].createElement("div",{className:(0,_classnames2["default"])(_class)},_react2["default"].createElement("a",{className:(0,_classnames2["default"])(_reduceClass,"iconfont"),tabIndex:-1,title:props.btnTitle[0]||"",onMouseDown:this.handleReduce},props.hasInput?String.fromCharCode(58980):""),_input,_unit,_react2["default"].createElement("a",{className:(0,_classnames2["default"])(_increaseClass,"iconfont"),tabIndex:-1,title:props.btnTitle[1]||"",onMouseDown:this.handleIncrease},props.hasInput?String.fromCharCode(58979):""),_react2["default"].createElement("div",{className:"clearB"}))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function clear(str){return(str||"").replace(REGEX_CR,"").replace(REGEX_LF,"").replace(REGEX_NBSP,SPACE).replace(REGEX_CARRIAGE,"").replace(REGEX_ZWS,"")}function _getLine(node,isBlock){for(var line=isBlock?1:0,child=node.firstChild;child;){var isBr=!1;child.nodeName in blockHTMLNode?line+=_getLine(child,!0):"BR"!==child.nodeName||child.getAttribute("data-empty")||(isBr=!0),child=child.nextSibling,!isBr||!child&&isBlock||line++}return line}function _countLine(node,isBlock,extInfo){if(!node)return{lineNum:0,strLength:0};for(var currentPrevLength=extInfo.strLen,lineContent=extInfo.lineContent,currentLineStr=extInfo.currentLineStr,prev=node.previousSibling,lineNum=0,prevStrLength=extInfo.currentStrLength,lastIsBlock=isBlock;prev;)!lastIsBlock||"BR"===prev.nodeName||prev.nodeName in blockHTMLNode||(currentPrevLength+=prevStrLength,prevStrLength=0,lineContent.push(currentLineStr),currentLineStr="",lineNum++),lastIsBlock=!1,3===prev.nodeType?(currentLineStr+=clear(prev.nodeValue||""),prevStrLength+=clear(prev.nodeValue||"").length):"BR"!==prev.nodeName&&(currentLineStr+=clear(prev.textContent||prev.innerText||""),prevStrLength+=clear(prev.textContent||prev.innerText||"").length),"BR"!==prev.nodeName||prev.getAttribute("data-empty")?prev.nodeName in blockHTMLNode&&(lineNum+=_getLine(prev,!0),currentPrevLength+=prevStrLength,prevStrLength=0,lineContent.push(currentLineStr),currentLineStr="",lastIsBlock=!0):(currentPrevLength+=prevStrLength,prevStrLength=0,lineContent.push(currentLineStr),currentLineStr="",lineNum++),prev=prev.previousSibling;return{lineNum:lineNum,strLength:currentPrevLength,currentStrLength:prevStrLength}}function _getCaretPositionIE(node){var endRange,len,normalizedValue,pos,range,textInputRange,_doc=node.ownerDocument||node.document;return range=_doc.selection.createRange(),pos=0,range&&range.parentElement()===node&&(normalizedValue=node.value.replace(/\r\n/g,"\n"),len=normalizedValue.length,textInputRange=node.createTextRange(),textInputRange.moveToBookmark(range.getBookmark()),endRange=node.createTextRange(),endRange.collapse(!1),pos=textInputRange.compareEndPoints("StartToEnd",endRange)>-1?len:-textInputRange.moveStart("character",-len)),pos}function getCaretPosition(node){var caretOffset=!1;if(!node)return caretOffset;var _doc=node.ownerDocument||node.document;if("undefined"!=typeof window.getSelection){var range=null;try{range=window.getSelection().getRangeAt(0)}catch(e){return caretOffset}var preCaretRange=range.cloneRange();preCaretRange.selectNodeContents(node),preCaretRange.setEnd(range.endContainer,Math.min(range.endContainer.length,range.endOffset));var prev=range.commonAncestorContainer,lineContent=[],currentLineStr="",lineNum=0,prevStrLength=0,currentLineStrLength=0,findParent=!1;if(prev===node&&(prev=prev.childNodes[prev.childNodes.length-1]),!prev)return{strPos:0,lineNumEnd:0,linePosEnd:0};var _lowerLineInfo=_countLine(prev,prev.nodeName in blockHTMLNode,{strLen:prevStrLength,currentStrLength:currentLineStrLength,lineContent:lineContent,currentLineStr:currentLineStr});lineNum+=_lowerLineInfo.lineNum,prevStrLength=_lowerLineInfo.strLength,currentLineStrLength=_lowerLineInfo.currentStrLength,3!==prev.nodeType&&prev.nodeName in blockHTMLNode||(findParent=!0);for(;findParent&&prev.parentNode!==node;){prev=prev.parentNode;var inBlock=prev.nodeName in blockHTMLNode,_higherLineInfo=_countLine(prev,inBlock,{strLen:prevStrLength,currentStrLength:currentLineStrLength,lineContent:lineContent,currentLineStr:currentLineStr});lineNum+=_higherLineInfo.lineNum,prevStrLength=_higherLineInfo.strLength,currentLineStrLength=_higherLineInfo.currentStrLength,findParent=3===prev.nodeType||!inBlock}var prevInfoLen=lineContent.length<1?prevStrLength:_lodash2["default"].reduce(_lodash2["default"].map(lineContent,function(v){return v.length}),_lodash2["default"].add),pureRangePos=preCaretRange.toString().length;caretOffset={strPos:pureRangePos,lineNumEnd:lineNum,linePosEnd:0===lineNum?pureRangePos:pureRangePos-prevInfoLen}}else"undefined"!=typeof _doc.selection&&"Control"!=_doc.selection.type&&(caretOffset={strPos:_getCaretPositionIE(node),linePosEnd:null,lineNumEnd:null});return caretOffset}function _focusLine(node,position,currentInfo){var children=node.childNodes,_currentLine=currentInfo.line,_currentPositionStr=Math.max(currentInfo.pos,0),_prevStr=currentInfo.prevStr,_doc=node.ownerDocument||node.document,found=!1;return _lodash2["default"].forEach(children,function(child,idx){var childName=child.nodeName;if(3===child.nodeType){var _str=clear(child.nodeValue||"");if(_currentLine===position.lineNumEnd&&_currentPositionStr+_str.length>=position.strPos){var selection=window.getSelection(),range=_doc.createRange();return range.setStart(child,position.strPos-_currentPositionStr),selection.removeAllRanges(),selection.addRange(range),found=!0,!1}_currentPositionStr+=_str.length}else if("BR"===childName){if(idx===children.length-1&&currentInfo.isBlock||_currentLine++,_currentLine===position.lineNumEnd&&_currentPositionStr>=position.strPos){var _selection=window.getSelection(),_range=_doc.createRange();return _range.setStart(node,0),_selection.removeAllRanges(),_selection.addRange(_range),found=!0,!1}}else{childName in blockHTMLNode&&0!==idx&&_currentLine++;var _blockInfo=_focusLine(child,position,{line:_currentLine,pos:_currentPositionStr,isBlock:childName in blockHTMLNode,prevStr:_prevStr});if(!_blockInfo)return found=!0,!1;_currentLine=_blockInfo.line,_currentPositionStr=_blockInfo.pos}}),!found&&{line:_currentLine,pos:_currentPositionStr,prevStr:_prevStr}}function focusPosition(node,position){if(node){if(node&&0===node.childNodes.length)return void node.focus();var _doc=node.ownerDocument||node.document;_doc.createRange&&window.getSelection&&_focusLine(node,position,{line:0,pos:0,isBlock:!1,prevStr:null})}}function focusInputPosition(node,position){if("INPUT"!==node.nodeName&&focusLine(node,node.childNodes.length),0===node.value.length)return void node.focus();if(document.createRange&&window.getSelection&&node.setSelectionRange){var selection=window.getSelection();selection.removeAllRanges(),node.focus();var _position=Math.min(node.value.length,position);node.setSelectionRange(_position,_position)}else node.focus()}function focusEnd(node){"INPUT"===node.nodeName?focusInputPosition(node,node.value.length):focusLine(node,node.childNodes.length)}function focusLine(node,lineNum){if(0===node.childNodes.length)return void node.focus();if(document.createRange&&window.getSelection){var selection=window.getSelection();selection.removeAllRanges();var range=document.createRange();range.selectNodeContents(node),range.setStart(node,Math.min(node.childNodes.length,lineNum)),range.collapse(!0),selection.addRange(range)}node.focus()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.blockHTMLNode=void 0;var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_MGDebugger=__webpack_require__(32),blockHTMLNode=(_interopRequireDefault(_MGDebugger),exports.blockHTMLNode={ADDRESS:!1,ARTICLE:!0,ASIDE:!0,AUDIO:!0,BLOCKQUOTE:!1,CANVAS:!0,DD:!1,DIV:!1,DL:!1,FIELDSET:!1,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!1,H1:!1,H2:!1,H3:!1,H4:!1,H5:!1,H6:!1,HEADER:!0,HGROUP:!0,HR:!1,NOSCRIPT:!1,OL:!1,OUTPUT:!0,P:!1,PRE:!1,SECTION:!0,TABLE:!1,TFOOT:!1,UL:!1,VIDEO:!0}),NBSP="&nbsp;",SPACE=" ",REGEX_CR=new RegExp("\r","g"),REGEX_LF=new RegExp("\n","g"),REGEX_NBSP=new RegExp(NBSP,"g"),REGEX_CARRIAGE=new RegExp("&#13;?","g"),REGEX_ZWS=new RegExp("&#8203;?","g");exports["default"]={focusPosition:focusPosition,focusEnd:focusEnd,getCaretPosition:getCaretPosition}},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_MGReactTouchEventBinder=__webpack_require__(108),_MGReactTouchEventBinder2=_interopRequireDefault(_MGReactTouchEventBinder);exports["default"]=_react2["default"].createClass({displayName:"FCImagePreview",getInitialState:function(){return this.time=+new Date,{position:this.props.from,showClose:!1}},componentDidMount:function(){this.popElem=document.getElementById("popwin"),_tools2["default"].getImageSize(this.props.img).then(this.handleImageLoad),this.$image=$(_reactDom2["default"].findDOMNode(this.refs.img)),$(".ie8").length>0?$("html").addClass("ie8noscroll"):$("html").addClass("noscroll")},componentWillUnmount:function(){$(_reactDom2["default"].findDOMNode(this.refs.img)).unbind("load.imgLoader")},doClose:function(){this.props.onClose&&this.props.onClose(),$("html").removeClass("noscroll").removeClass("ie8noscroll"),_reactDom2["default"].unmountComponentAtNode(this.popElem)},handleClose:function(){this.props.isCantClose||this.doClose()},handleImageLoad:function(size){var _this=this,props=this.props,windowSize=_tools2["default"].getWindowSize(),scale=1;if(!size)return void this.setState({position:{x:(windowSize.width-Math.ceil(e.target.width))/2,y:(windowSize.height-Math.ceil(e.target.height))/2,width:Math.ceil(e.target.width),height:Math.ceil(e.target.height)},showClose:!0});size.width>.8*windowSize.width&&(scale=Math.min(scale,.8*windowSize.width/size.width)),size.height>.8*windowSize.height&&(scale=Math.min(scale,.8*windowSize.height/size.height));var left=(windowSize.width-Math.ceil(size.width*scale))/2,top=(windowSize.height-Math.ceil(size.height*scale))/2;setTimeout(function(){_this.setState({position:{x:left,y:top,width:Math.ceil(size.width*scale),height:Math.ceil(size.height*scale)},showClose:!0})},props.duration||500)},handlePinchStart:function(e){this.defaultScale=this._getScale(this.$image),this.defaultPosition=this.$image.position()},handlePinchPicture:function(e,data){this.$image.css({transform:"scale("+Math.min(Math.max(.3,this.defaultScale.x*data.scale),2)+")"})},handleZoomPicture:function(e){this.defaultScale=this._getScale(this.$image),this.defaultScale.x>1?this.$image.css({transform:"scale(1)"}):this.$image.css({transform:"scale(1.3)"})},handleWheelZoomPicture:function(e){this.defaultScale=this._getScale(this.$image),this.$image.css({transform:"scale("+Math.min(Math.max(.3,this.defaultScale.x+.05*(e.deltaY>0?-1:1)),2)+")"})},_getScale:function($dom){var transformMatrix=$dom.css("-webkit-transform")||$dom.css("-moz-transform")||$dom.css("-ms-transform")||$dom.css("-o-transform")||$dom.css("transform"),scale={x:1,y:1};if(transformMatrix){var matrix=transformMatrix.replace(/[^0-9\-.,]/g,"").split(",");scale.x=parseFloat(matrix[0])||1,scale.y=parseFloat(matrix[3])||1}return scale},handleTouchMove:function(e,data){var _this2=this;e.preventDefault(),e.stopPropagation(),e.touches&&e.touches.length>1&&!function(){var _x=0,_xNum=0,_y=0,_yNum=0;_lodash2["default"].forEach(data.start,function(info,i){data.move[i]&&(_xNum++,_x+=data.move[i].x-info.x,_yNum++,_y+=data.move[i].y-info.y)}),_x=Math.ceil(_x/_xNum),_y=Math.ceil(_y/_yNum),_this2.$image.css({left:Math.min(120,Math.max(-120,_this2.defaultPosition.left+_x)),top:Math.min(120,Math.max(-120,_this2.defaultPosition.top+_y))})}()},handlePreventDefault:function(e){e.stopPropagation(),e.preventDefault()},render:function(){var from=this.state.position,showClose=this.state.showClose,_props=this.props,className=_props.className,title=_props.title,img=_props.img,_header=null;title&&(_header=_react2["default"].createElement("div",{className:"pop_header"},_react2["default"].createElement("p",{className:"pop_title"},title)));var _close=showClose?_react2["default"].createElement("a",{className:"iconfont pop_close",onClick:this.doClose},String.fromCharCode(58982)):null,touchPinch=(0,_MGReactTouchEventBinder2["default"])({pinchStart:this.handlePinchStart,pinch:this.handlePinchPicture,onTouchMove:this.handleTouchMove,doubleTap:this.handleZoomPicture});return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("pop_wrapper",className),onScroll:this.handlePreventDefault,onWheel:this.handlePreventDefault},_react2["default"].createElement("div",{className:"pop_mask",onClick:this.handleClose}),_react2["default"].createElement("div",{className:"pop_imgPreview",style:{top:from.y,left:from.x,width:from.width,height:from.height}},_react2["default"].createElement("image",_extends({className:"pop_image",ref:"img",src:window.rootPath(img),width:"100%",height:"100%"},touchPinch,{onWheel:this.handleWheelZoomPicture})),_close))}}),module.exports=exports["default"]}).call(exports,__webpack_require__(22))},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_config=__webpack_require__(9),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_formValid=__webpack_require__(43),_MGIntl=__webpack_require__(12),_MGIntl2=_interopRequireDefault(_MGIntl),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Cart",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return _formStore2["default"].getState()},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(){this.setState(_formStore2["default"].getState())},handleChoosePayment:function(id){_formStore2["default"].dispatch({type:"paymentType",data:id})},renderCartItem:function(info,symbol){return _react2["default"].createElement("li",{className:"fb_cartCommodity",key:info.sId},_react2["default"].createElement("span",{className:"fb_cartTd name"},info.name),_react2["default"].createElement("span",{className:"fb_cartTd quantity"},"× "+Math.ceil(info.num)),_react2["default"].createElement("span",{className:"fb_cartTd subTotal"},info.noPrice?"-":symbol+" "+_MGIntl2["default"].localeNumberFormatter(info.total,2,2)))},renderError:function(valid){if(!valid)return null;var _shownValid=_lodash2["default"].without(valid,"tip","tipHint");return _react2["default"].createElement("p",{className:"fb_cartError"},(0,_formValid.getErrorContent)(_shownValid[0],null))},render:function(){var _this=this,fillInfo=this.state.data,paymentInfo=this.state.payment,settings=_utils2["default"].getSettings();if(!_utils2["default"].hasSale())return null;var symbol="￥";""+settings.cartSymbol=="0"?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var _cartInfo=_utils2["default"].processCart(fillInfo);if(0===_cartInfo.length)return this.props.valid&&!_lodash2["default"].isEmpty(this.props.valid)?_react2["default"].createElement("div",null,this.renderError(this.props.valid)):null;var isPay=_utils2["default"].isInnerFormPay(),totalObj={price:symbol+" "+_MGIntl2["default"].localeNumberFormatter(_lodash2["default"].reduce(_cartInfo,function(a,b){return a+100*b.total},0)/100,2,2),priceClass:{className:"price"}},supportPayType=_utils2["default"].getInnerFormPayInfo().payOnlineMethod||[1,2,4];return _react2["default"].createElement("div",null,_react2["default"].createElement("div",{className:"fb_cart"},_react2["default"].createElement("p",{className:"fb_cartTitle"},isPay?_config.lang.cCommodityPayTitle:_config.lang.cCommodityNoPayTitle),_react2["default"].createElement("div",{className:"fb_cartTable"},_react2["default"].createElement("p",{className:"fb_cartTh"},_react2["default"].createElement("span",{className:"fb_cartTd name"},_config.lang.cCommodityName),_react2["default"].createElement("span",{className:"fb_cartTd quantity"},_config.lang.cCommodityQuantity),_react2["default"].createElement("span",{className:"fb_cartTd subTotal"},_config.lang.cCommoditySubTotal)),_react2["default"].createElement("ul",{className:"fb_cartCommodities"},_lodash2["default"].map(_cartInfo,function(info){return _this.renderCartItem(info,symbol)}))),_react2["default"].createElement("p",{className:"fb_cartTotal"},isPay?_config.lang.cCommodityPayTotal(totalObj):_config.lang.cCommodityNoPayTotal(totalObj)),isPay?_react2["default"].createElement("ul",{className:"fb_paymentMethod"},_lodash2["default"].map(_utils2["default"].SUPPORT_PAYMENT_METHOD,function(info){if(_tools2["default"].inIframe()&&1===+info.id)return null;if(supportPayType.indexOf(+info.id)===-1)return null;var _active=paymentInfo&&paymentInfo.type===+info.id;return _react2["default"].createElement("li",{className:(0,_classnames2["default"])("fb_pmItem","fb_pmItemNum"+supportPayType.length,{active:_active}),onClick:_this.handleChoosePayment.bind(_this,+info.id),key:"pay"+info.id},_react2["default"].createElement("div",{className:"fb_pmImg",style:{backgroundPosition:info.bgPosition}}),_react2["default"].createElement("p",{className:"fb_pmTitle"},info.name),_active?_react2["default"].createElement("div",{className:"fb_pmChosenImg"}):null)})):null),this.renderError(this.props.valid))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_MGCoordinateTransform=__webpack_require__(111),_MGCoordinateTransform2=_interopRequireDefault(_MGCoordinateTransform),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),WEB="//api.map.baidu.com/marker",MOBILE="baidumap://map/marker";exports["default"]=_react2["default"].createClass({displayName:"Component(Map)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],componentDidMount:function(){this.visibilityChange=function(){var tag=document.hidden||document.webkitHidden;tag&&clearTimeout(this.appCheckTimer)},this.iosVisibilityChange=function(){clearTimeout(this.appCheckTimer)}},componentWillUnmount:function(){window.clearTimeout(this.fallbackTimer),window.clearTimeout(this.appCheckTimer)},handleOpenInMap:function(data){var self=this,T=1e3;if(!self.inProgress){if(self.inProgress=!0,!_tools2["default"].deviceCheck.isMobile)return self.inProgress=!1,void window.open(WEB+"?"+data,"_blank");var hasApp=!0,t1=+new Date;this.fallbackTimer=window.setTimeout(function(){self.inProgress=!1,hasApp||(window.location.href=WEB+"?"+data),document.removeEventListener("visibilitychange",self.visibilityChange,!1),document.removeEventListener("webkitvisibilitychange",self.visibilityChange,!1),window.removeEventListener("pagehide",self.iosVisibilityChange,!1),window.removeEventListener("blur",self.iosVisibilityChange,!1)},2*T),document.addEventListener("visibilitychange",self.visibilityChange,!1),document.addEventListener("webkitvisibilitychange",self.visibilityChange,!1),window.addEventListener("pagehide",self.iosVisibilityChange,!1),window.addEventListener("blur",self.iosVisibilityChange,!1);try{window.location.href=MOBILE+"?"+data}catch(e){hasApp=!1}this.appCheckTimer=window.setTimeout(function(){var t2=+new Date;(!t1||t2-t1<1.6*T+28)&&(hasApp=!1)},1.6*T)}},render:function(){var _props=this.props,data=_props.data,componentStyle=_props.componentStyle,fw=_props.fw,itemNum=_props.itemNum,isMobile=_props.isMobile,bdCoordinate=[];bdCoordinate=data.coordinate?_MGCoordinateTransform2["default"].outChina.apply(null,data.coordinate)?data.coordinate:_MGCoordinateTransform2["default"].gcj02tobd09.apply(null,_MGCoordinateTransform2["default"].wgs84togcj02.apply(null,data.coordinate)):[104.09289837961923,30.653808371337494];
var imgWidth=Math.ceil(fw-64);itemNum&&!isMobile&&(imgWidth=Math.ceil((fw-64*itemNum)/itemNum)),imgWidth=Math.min(1024,imgWidth)*(isMobile?1.5:1);var _mapLabel="";return data.isShowInfoBox&&bdCoordinate&&data.mapInfoContent&&(_mapLabel="&labels="+[bdCoordinate[0]+2e-4,bdCoordinate[1]+3e-4]+"&labelStyles="+[data.mapInfoContent,1,14,"0x333333","0xffffff",0]),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fbc_staticMap"},_react2["default"].createElement("a",{className:"fbc_smLocation",target:"_blank",href:"javascript:void(0)",onClick:this.handleOpenInMap.bind(this,"location="+(bdCoordinate[1]+","+bdCoordinate[0])+"&title="+(data.mapLocation||"")+"&content="+(data.mapInfoContent||data.mapLocation||"")+"&output=html&src=mikecrm")},_react2["default"].createElement("img",{width:"100%",src:location.protocol+"//api.map.baidu.com/staticimage/v2?ak=EDb798da5e9a45ddd62246439064d449&center="+bdCoordinate+"&width="+imgWidth+"&height="+300*(isMobile?1.5:1)+"&zoom="+(+(data.mapScale||9)+2)+"&markers="+bdCoordinate+"&markerStyles=m,,0xff0000"+_mapLabel}))))}}),module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var x_PI=52.35987755982988,PI=3.141592653589793,a=6378245,ee=.006693421622965943,bd09togcj02=function(bd_lon,bd_lat){var x=bd_lon-.0065,y=bd_lat-.006,z=Math.sqrt(x*x+y*y)-2e-5*Math.sin(y*x_PI),theta=Math.atan2(y,x)-3e-6*Math.cos(x*x_PI),gg_lng=z*Math.cos(theta),gg_lat=z*Math.sin(theta);return[gg_lng,gg_lat]},gcj02tobd09=function(lng,lat){var z=Math.sqrt(lng*lng+lat*lat)+2e-5*Math.sin(lat*x_PI),theta=Math.atan2(lat,lng)+3e-6*Math.cos(lng*x_PI),bd_lng=z*Math.cos(theta)+.0065,bd_lat=z*Math.sin(theta)+.006;return[bd_lng,bd_lat]},wgs84togcj02=function(lng,lat){if(out_of_china(lng,lat))return[lng,lat];var dlat=transformlat(lng-105,lat-35),dlng=transformlng(lng-105,lat-35),radlat=lat/180*PI,magic=Math.sin(radlat);magic=1-ee*magic*magic;var sqrtmagic=Math.sqrt(magic);dlat=180*dlat/(a*(1-ee)/(magic*sqrtmagic)*PI),dlng=180*dlng/(a/sqrtmagic*Math.cos(radlat)*PI);var mglat=lat+dlat,mglng=lng+dlng;return[mglng,mglat]},gcj02towgs84=function(lng,lat){if(out_of_china(lng,lat))return[lng,lat];var dlat=transformlat(lng-105,lat-35),dlng=transformlng(lng-105,lat-35),radlat=lat/180*PI,magic=Math.sin(radlat);magic=1-ee*magic*magic;var sqrtmagic=Math.sqrt(magic);return dlat=180*dlat/(a*(1-ee)/(magic*sqrtmagic)*PI),dlng=180*dlng/(a/sqrtmagic*Math.cos(radlat)*PI),mglat=lat+dlat,mglng=lng+dlng,[2*lng-mglng,2*lat-mglat]},transformlat=function(lng,lat){var ret=-100+2*lng+3*lat+.2*lat*lat+.1*lng*lat+.2*Math.sqrt(Math.abs(lng));return ret+=2*(20*Math.sin(6*lng*PI)+20*Math.sin(2*lng*PI))/3,ret+=2*(20*Math.sin(lat*PI)+40*Math.sin(lat/3*PI))/3,ret+=2*(160*Math.sin(lat/12*PI)+320*Math.sin(lat*PI/30))/3},transformlng=function(lng,lat){var ret=300+lng+2*lat+.1*lng*lng+.1*lng*lat+.1*Math.sqrt(Math.abs(lng));return ret+=2*(20*Math.sin(6*lng*PI)+20*Math.sin(2*lng*PI))/3,ret+=2*(20*Math.sin(lng*PI)+40*Math.sin(lng/3*PI))/3,ret+=2*(150*Math.sin(lng/12*PI)+300*Math.sin(lng/30*PI))/3},out_of_china=function(lng,lat){return lng<72.004||lng>137.8347||lat<.8293||lat>55.8271||!1};exports["default"]={bd09togcj02:bd09togcj02,gcj02tobd09:gcj02tobd09,wgs84togcj02:wgs84togcj02,gcj02towgs84:gcj02towgs84,outChina:out_of_china},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(59),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FormGeneratorUtil=__webpack_require__(56),_FCPreview=__webpack_require__(107),_FCPreview2=_interopRequireDefault(_FCPreview),_jquery=(__webpack_require__(43),__webpack_require__(22)),_jquery2=_interopRequireDefault(_jquery),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),EXAMPLE_BG="images/form/form_picExample_bg.png",optionsLayoutMapping=[null,1,.495,.327,.2425];exports["default"]=_react2["default"].createClass({displayName:"Component(PictureRadio&Checkbox)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],componentDidMount:function(){this.popElem=document.getElementById("popwin")},isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},handleSelectOption:function(id){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelector",id:data.id,value:id,isCheckbox:"picCheckbox"===data.type})},handleImgError:function(e){this.isHandleError&&(this.isHandleError=!0,e.target.src=EXAMPLE_BG)},handleShowPreview:function(image,e){e.preventDefault(),e.stopPropagation();var $target=(0,_jquery2["default"])(e.target);"IMG"===e.target.nodeName||($target=$target.next());var scrollTop=document.body.scrollTop,scrollLeft=document.body.scrollLeft;_reactDom2["default"].render(_react2["default"].createElement(_FCPreview2["default"],{img:image,from:{x:$target.offset().left-scrollLeft,y:$target.offset().top-scrollTop,width:$target.width(),height:$target.height()},duration:200}),this.popElem)},renderOptions:function(){var _props=this.props,data=_props.data,fill=_props.fill,fw=_props.fw,itemNum=_props.itemNum,isMobile=_props.isMobile,mode=_props.mode,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,optionTipsStyle=_formStyle.optionTipsStyle,options=data.options||[],_opts=[],_temp=null,_num=0,_optionsLayout=data.optionsLayout;isMobile&&(_optionsLayout=Math.min(2,_optionsLayout||0),3!=data.picLayout&&4!=data.picLayout||(_optionsLayout=1));var _innerPadding=isMobile?0:15,_padding=isMobile?20:60,maxImgHeight=null,groupItem=itemNum||1,itemWidth=(fw/groupItem-_padding-_innerPadding)*optionsLayoutMapping[_optionsLayout]-4,_full=!1;"picCheckbox"===data.type&&1===data.isLimitChooseNum&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&fill&&fill.length>=data.chooseNumTo&&(_full=!0);for(var i=0,len=options.length;i<len;i++)if(_temp=options[i],1!==mode||_temp.sId){var _isFill=this.isFill(fill||[],_temp.sId),_limitInfo=null,_remainingFull=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainingFull=!0),data.isShowOptionLimit?_limitInfo=_react2["default"].createElement("span",{className:"fbc_optionTips",style:optionTipsStyle},_config.lang.cQuotaRemainingFunc({remaining:_remaining>0?_remaining:0})):_remainingFull&&(_limitInfo=_react2["default"].createElement("span",{className:"fbc_optionTips",style:_lodash2["default"].assign({},optionTipsStyle,{color:"#ccc"})},_config.lang.cQuotaRemainingFull))}_num++,1===+_optionsLayout||_num%_optionsLayout!==1||1!==data.picLayout&&data.picLayout||(maxImgHeight=0,_lodash2["default"].forEach(options.slice(i,i+_optionsLayout),function(item){if(item.image&&item.image.height&&item.image.width){var _scale=1;itemWidth<item.image.width&&(_scale=itemWidth/item.image.width),maxImgHeight<item.image.height*_scale&&(maxImgHeight=item.image.height*_scale)}}));var imageInfo=_temp.image||{},image=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageUri,imageFull=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageFullUri;1===data.optionsLayout&&(image=imageFull);var _image=_react2["default"].createElement("div",{className:"fbc_picOptionImage",key:"prImg",style:{minHeight:maxImgHeight}},image?[_react2["default"].createElement("span",{className:"fbc_imgPreview iconfont",key:"preview",onClick:this.handleShowPreview.bind(this,imageFull)},String.fromCharCode(59010)),_react2["default"].createElement("image",{className:"fbc_picOptionImg",key:"img",src:window.rootPath(image||EXAMPLE_BG),onError:this.handleImgError})]:null),CommonDom="picCheckbox"===data.type?_svgBasicComponent.CommonCheckbox:_svgBasicComponent.CommonRadio,_content=_react2["default"].createElement("p",{key:"prContent",style:optionStyle,className:(0,_classnames2["default"])("fbc_optionVal",data.type,{checked:_isFill,disabled:!_isFill&&(_full||_remainingFull),isFull:!_isFill&&_remainingFull})},_react2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_isFill,disabled:!_isFill&&(_full||_remainingFull),style:{padding:1,paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}),_react2["default"].createElement("span",{className:"fbc_optionLabel"},(data.isAutoNo?_optionNum(data.autoNo,_num):"")+_temp.value,_limitInfo)),_itemMain=[_image,_content];2!=data.picLayout&&4!=data.picLayout||(_itemMain=[_content,_image]),_opts.push(_react2["default"].createElement("li",{key:"item"+i,className:(0,_classnames2["default"])("fbc_picOptionsLi",{clearB:_num%_optionsLayout===1,fbc_picOptionsChecked:_isFill}),onClick:!_full&&!_remainingFull||_isFill?this.handleSelectOption.bind(this,_temp.sId):null},_itemMain))}else console.error("component ID LOST ->."+_temp.id+" : "+_temp.value);return data.isLimitOptions&&data.optionsQuotaInfo&&0===_opts.length&&options.length>0&&_opts.push(_react2["default"].createElement("li",{className:"fbc_emptyTip"},_config.lang.cOptionNull)),_opts},renderTips:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),_formStyle2=this.formStyle(),tipsStyle=_formStyle2.tipsStyle;if("picCheckbox"!==data.type)return null;if(1!==data.isLimitChooseNum)return null;var _tipContent="";return void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo?_tipContent+=data.chooseNumFrom==data.chooseNumTo?_config.lang.cOptionsLimitEqualFunc({num:data.chooseNumFrom}):_config.lang.cOptionsLimitRangeFunc({numForm:data.chooseNumFrom,numTo:data.chooseNumTo}):void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom?_tipContent+=_config.lang.cOptionsMoreThanNumFunc({numForm:data.chooseNumFrom}):void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&(_tipContent+=_config.lang.cOptionsLessThanNumFunc({numTo:data.chooseNumTo})),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:(valid||[]).indexOf("tip")>-1}),style:tipsStyle},_tipContent)},render:function(){var _props3=this.props,data=_props3.data,valid=_props3.valid,componentStyle=_props3.componentStyle,isMobile=_props3.isMobile,_optionsLayout=data.optionsLayout;return isMobile&&(_optionsLayout=Math.min(2,_optionsLayout||0),3!=data.picLayout&&4!=data.picLayout||(_optionsLayout=1)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid),_react2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_content",_optionsLayout?"layout-"+_optionsLayout:"",{fbc_picOptionContent_half:3==data.picLayout||4==data.picLayout})},this.renderOptions(),_react2["default"].createElement("li",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_MGString=__webpack_require__(29),_FCPreview=(_interopRequireDefault(_MGString),__webpack_require__(107)),_FCPreview2=_interopRequireDefault(_FCPreview),_MGDebugger=__webpack_require__(32),_jquery=(_interopRequireDefault(_MGDebugger),__webpack_require__(22)),_jquery2=_interopRequireDefault(_jquery),_FormImagesGroupLayout=__webpack_require__(114),_FormImagesGroupLayout2=_interopRequireDefault(_FormImagesGroupLayout),_queue=Promise.resolve(!0),_EMPTY_SRC="images/form/picStatic_imgPlaceholder.png",LazyImg=_react2["default"].createClass({displayName:"LazyImg",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return{}},componentDidMount:function(){var self=this,_srcImage=this.props.src;_queue=_queue.then(function(){return new Promise(function(resolve){var _img=new Image;_img.onload=function(){self.setState({src:_srcImage}),resolve(!0)},_img.onerror=function(){resolve(!1)},_img.src=_srcImage})})},render:function(){var _props=this.props,width=(_props.src,_props.onError,_props.width),props=_objectWithoutProperties(_props,["src","onError","width"]);return _react2["default"].createElement("image",_extends({src:window.rootPath(this.state.src?this.state.src:_EMPTY_SRC)},props,{width:this.state.src?width:null}))}});exports["default"]=_react2["default"].createClass({displayName:"Component(Pictures)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return this.popElem=document.getElementById("popwin"),this.debouceCalc=_lodash2["default"].debounce(this.handleCalcSize,200),this.picturesInfo={},{isOpen:!1}},componentDidMount:function(){this.handleCalcSize()},componentDidUpdate:function(){this.handleCalcSize()},handleCalcSize:function(){var _this=this,_props2=this.props,data=_props2.data,fw=_props2.fw,itemNum=_props2.itemNum,isMobile=_props2.isMobile,_PADDING_COMPONENT=isMobile?10:30,trueWidth=Math.floor((fw-(itemNum>1?2*_PADDING_COMPONENT:0))/(itemNum||1));1!==data.picPaddingLRNone&&(trueWidth-=2*_PADDING_COMPONENT);var picGap=data.picPadding||5,pictures=data.pictures,_d=[],_hasPicture=!1;if(_lodash2["default"].forEach(pictures,function(pic){if(pic)return _hasPicture=!0,!1}),pictures&&_hasPicture){for(var process=_FormImagesGroupLayout2["default"]._getSingleImageSize,_loop=function(i){if(pictures[i]){var pic=pictures[i];pic.width&&pic.height||(_this.picturesInfo[i]?pic=_lodash2["default"].assign({},pictures[i],{width:_this.picturesInfo[i].width,height:_this.picturesInfo[i].height}):pic.imageUri||pic.linkUri?_tools2["default"].getImageSize(pic.imageUri||pic.linkUri).done(function(info){_this.picturesInfo[i]={width:info.width,height:info.height},_this.debouceCalc()}):_this.picturesInfo[i]={width:"auto",height:"auto"}),_d.push(_lodash2["default"].assign({id:i},pic))}else _d.push({width:"auto",height:"auto",id:i})},i=0;i<(+data.picNumber||1);i++)_loop(i);var _rows=null;+data.picNumber>=2&&(process=_FormImagesGroupLayout2["default"]._getImagesColumnLayoutSize,+data.picNumber>2&&data.picLayout&&1!==data.picLayout&&(process=_FormImagesGroupLayout2["default"]._getImagesMultiOneLayoutSize,_rows=[[0,1,2],[0,[1,2]],[[0,1],2]],4===+data.picNumber&&(_rows=[[0,1,2,3],[0,[1,2,3]],[[0,1,2],3]]),_rows=_rows[(data.picLayout||1)-1]));var calcRes=process(_d,{width:trueWidth,gap:picGap,layout:_rows});if(calcRes){_lodash2["default"].forEach(calcRes.imgSize,function(info){if(_this.refs["pic"+info.id]){var dom=_reactDom2["default"].findDOMNode(_this.refs["pic"+info.id]);(0,_jquery2["default"])(dom).css({width:info.width,height:info.height})}});var _paddingInfo={paddingLeft:1===data.picPaddingLRNone?0:_PADDING_COMPONENT,paddingRight:1===data.picPaddingLRNone?0:_PADDING_COMPONENT};"picNumber"in data&&1!==+data.picNumber||!pictures[0]||!pictures[0].picAlign||2===pictures[0].picAlign?(_paddingInfo.paddingLeft+=calcRes.imgRLPadding,_paddingInfo.paddingRight+=calcRes.imgRLPadding):_paddingInfo[1===pictures[0].picAlign?"paddingRight":"paddingLeft"]+=2*calcRes.imgRLPadding,(0,_jquery2["default"])(_reactDom2["default"].findDOMNode(this.refs.staticPic)).css(_paddingInfo)}}},_linkProcess:function(jumpTo){return(0,_tools.linkify)(jumpTo)||""},handleToggleFoldText:function(){this.setState({isOpen:!this.state.isOpen})},handleShowPreview:function(image,e){var $target=(0,_jquery2["default"])(e.target),scrollTop=document.body.scrollTop,scrollLeft=document.body.scrollLeft;_reactDom2["default"].render(_react2["default"].createElement(_FCPreview2["default"],{img:image,from:{x:$target.offset().left-scrollLeft,y:$target.offset().top-scrollTop,width:$target.width(),height:$target.height()},duration:200}),this.popElem)},handleOpenLinkInPage:function(link,e){if(link){var win=window.open(link,"_blank");win.focus()}else this.handleShowPreview(e)},renderPictures:function(){for(var data=this.props.data,picNum=+data.picNumber||1,picLayout=data.picLayout||1,pictures=data.pictures||[],picPaddingHalf=(data.picPadding||5)/2,items=[],i=0;i<picNum;i++){var style={};picPaddingHalf&&(2==picNum?0==i?style={paddingRight:picPaddingHalf}:1==i&&(style={paddingLeft:picPaddingHalf}):3==picNum?0==i?(style={paddingRight:picPaddingHalf},3==picLayout&&(style.paddingBottom=picPaddingHalf)):1==i?1==picLayout?style={paddingLeft:picPaddingHalf,paddingRight:picPaddingHalf}:2==picLayout?style={paddingLeft:picPaddingHalf,paddingBottom:picPaddingHalf}:3==picLayout&&(style={paddingRight:picPaddingHalf,paddingTop:picPaddingHalf}):2==i&&(style={paddingLeft:picPaddingHalf},2==picLayout&&(style.paddingTop=picPaddingHalf)):4==picNum&&(0==i?(style={paddingRight:picPaddingHalf},3==picLayout&&(style.paddingBottom=picPaddingHalf)):1==i?1==picLayout?style={paddingLeft:picPaddingHalf,paddingRight:picPaddingHalf}:2==picLayout?style={paddingLeft:picPaddingHalf,paddingBottom:picPaddingHalf}:3==picLayout&&(style={paddingRight:picPaddingHalf,paddingTop:picPaddingHalf,paddingBottom:picPaddingHalf}):2==i?1==picLayout?style={paddingLeft:picPaddingHalf,paddingRight:picPaddingHalf}:2==picLayout?style={paddingTop:picPaddingHalf,paddingLeft:picPaddingHalf,paddingBottom:picPaddingHalf}:3==picLayout&&(style={paddingRight:picPaddingHalf,paddingTop:picPaddingHalf}):3==i&&(style={paddingLeft:picPaddingHalf},2==picLayout&&(style.paddingTop=picPaddingHalf))));var image=pictures[i]?pictures[i].isLink?pictures[i].linkUri:pictures[i].imageUri:null,_noImgStyle={};picPaddingHalf&&!image&&3==picNum&&(2==picLayout&&0==i||3==picLayout&&2==i)&&(_noImgStyle={paddingTop:60+picPaddingHalf,paddingBottom:60+picPaddingHalf}),picPaddingHalf&&!image&&4==picNum&&(2==picLayout&&0==i||3==picLayout&&3==i)&&(_noImgStyle={paddingTop:110+2*picPaddingHalf,paddingBottom:110+2*picPaddingHalf});var jumpLink=null;pictures[i]&&pictures[i].isJumpTo&&(jumpLink=this._linkProcess(pictures[i].jumpTo)),items.push(_react2["default"].createElement("div",{className:"fbc_pictureImage",key:"pic"+i,style:style,ref:"pic"+i},_react2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_piWrapper:!0,"no-image":!image}),style:_noImgStyle},_react2["default"].createElement(LazyImg,{className:"fbc_piImg",style:{cursor:jumpLink?"pointer":"default"},src:window.rootPath(image||_EMPTY_SRC),onClick:jumpLink?this.handleOpenLinkInPage.bind(this,jumpLink):null,onError:this.handleImgError,width:"100%"}))))}var _items=items;3==picNum&&2==picLayout?_items=[_react2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup0"},items[0]),_react2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup1"},items[1],items[2])]:3==picNum&&3==picLayout?_items=[_react2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup0"},items[0],items[1]),_react2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup1"},items[2])]:4==picNum&&2==picLayout?_items=[_react2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup0"},items[0]),_react2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup1"},items[1],items[2],items[3])]:4==picNum&&3==picLayout&&(_items=[_react2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup0"},items[0],items[1],items[2]),_react2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup1"},items[3])]);var _optionClass={fbc_pictureWrapper:!0};return _optionClass["images-"+picNum]=!0,picLayout&&(_optionClass["layout-"+picLayout]=!0),_react2["default"].createElement("div",{className:(0,_classnames2["default"])(_optionClass),ref:"staticPic"},_items,_react2["default"].createElement("div",{className:"clearB"}))},render:function(){var _props3=this.props,data=_props3.data,componentStyle=_props3.componentStyle,isOpen=this.state.isOpen,_hasPicture=!1;_lodash2["default"].forEach(data.pictures,function(pic){if(pic)return _hasPicture=!0,!1});var _formStyle=this.formStyle(),describeStyle=_formStyle.describeStyle;componentStyle||(componentStyle={}),componentStyle.paddingTop=data.picPaddingTB||5,componentStyle.paddingBottom=data.picPaddingTB||5;var _describe=null;if(data.isAddDescribe)if(describeStyle=_lodash2["default"].assign(describeStyle,{textAlign:["","left","center","right"][data.picSubTitleAlign]}),data.isDescribeTextFold){var _foldText=null;isOpen?_foldText=this.renderRichContent(data.picDescribe||"",data.picDescribe_style||null):data.describeFoldText&&(_foldText=_react2["default"].createElement("span",{className:"fbc_foldTips"},this.renderRichContent(data.describeFoldText||"",data.describeFoldText_style||null))),_describe=_react2["default"].createElement("p",{className:(0,_classnames2["default"])({fbc_foldContent:!0,hasFoldText:_foldText,"is-open":isOpen}),style:describeStyle},_foldText,_react2["default"].createElement("a",{className:"fbc_foldBtn",onClick:this.handleToggleFoldText},isOpen?_config.lang.cFoldText:_config.lang.cUnFoldText,_react2["default"].createElement("i",{className:"iconfont fbc_foldIcon"},isOpen?String.fromCharCode(58984):String.fromCharCode(58983))))}else _describe=_react2["default"].createElement("p",{className:"fbc_picDescribe",style:describeStyle},this.renderRichContent(data.picDescribe||"",data.picDescribe_style||null));return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type,{fb_picture_none:!data.pictures||!_hasPicture,fb_staticPicPaddingNone:1===data.picPaddingLRNone}),id:data.id,style:componentStyle},this.renderPictures(),_describe)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _getSingleImageSize(imgSize,_ref){var width=_ref.width,_imageRLPadding=(_ref.gap,0),singleImg=imgSize[0],_resSize=[];return"auto"!==singleImg.width&&(singleImg.width<width?(_resSize[0]=_lodash2["default"].assign({},singleImg),_imageRLPadding=Math.floor((width-singleImg.width)/2)):_resSize[0]={width:width,height:Math.floor(singleImg.height/singleImg.width*width)},{imgSize:_resSize,imgRLPadding:Math.max(_imageRLPadding,0),isSingle:!0})}function widthTotal(pre,info){return pre+info.width}function _getImagesColumnLayoutSize(imgSize,_ref2){var width=_ref2.width,gap=_ref2.gap,_res=imgSize.slice(),_hasAutoHeight=!1,maxHeight=Math.max.apply(null,_lodash2["default"].map(imgSize,function(si){return"auto"===si.height&&(_hasAutoHeight=!0),"auto"===si.height?0:si.height})),_hasAutoItem=[];_res=_lodash2["default"].map(_res,function(info,i){return maxHeight===info.height?info:"auto"===info.height?(_hasAutoItem.push(i),info):_lodash2["default"].assign({},info,{width:info.width/info.height*maxHeight,height:maxHeight})});var _totalWidth=null,_autoContentWidth=120;if(_hasAutoItem.length>0){var _trueWidth=width-gap*(imgSize.length-1),currentWidth=_lodash2["default"].reduce(_res,function(pre,a){var d=a.width;return"auto"===a.width&&(d=0),pre+d},0);currentWidth>=_trueWidth?(_totalWidth=currentWidth,_lodash2["default"].forEach(_hasAutoItem,function(id){_totalWidth+=_autoContentWidth,_res[id]=_lodash2["default"].assign({},_res[id],{width:_autoContentWidth,height:maxHeight})})):!function(){_totalWidth=_trueWidth;var preWidth=Math.floor((_totalWidth-currentWidth)/_hasAutoItem.length),_deltaWidth=0;preWidth<_autoContentWidth&&(_deltaWidth=_autoContentWidth-preWidth),_lodash2["default"].forEach(_hasAutoItem,function(id){_totalWidth+=_deltaWidth,_res[id]=_lodash2["default"].assign({},_res[id],{width:preWidth,height:maxHeight||(_hasAutoHeight?"auto":maxHeight)})})}()}else _totalWidth=_lodash2["default"].reduce(_res,widthTotal,0);var _scale=1,_imageRLPadding=void 0;return _totalWidth>=width-gap*(imgSize.length-1)?(_scale=(width-gap*(imgSize.length-1))/_totalWidth,_res=_lodash2["default"].map(_res,function(info){return _lodash2["default"].assign({},info,{width:Math.floor(info.width*_scale),height:Math.floor(info.height*_scale)})})):_res=_lodash2["default"].map(_res,function(info){return _lodash2["default"].assign({},info,{width:Math.floor(info.width),height:Math.floor(info.height)})}),_imageRLPadding=(width-(_lodash2["default"].reduce(_res,widthTotal,0)+gap*(imgSize.length-1))-2)/2,{imgSize:_res,imgRLPadding:Math.max(_imageRLPadding,0),totalWidth:_totalWidth}}function _getImagesMultiOneLayoutSize(imgSize,_ref3){var width=_ref3.width,gap=_ref3.gap,layout=_ref3.layout,_multiIdx=-1,_hasSingleAutoItem=null,_hasMultiAutoItem=[],_hasAutoSize=!1,componentColumn=_lodash2["default"].map(layout,function(info,idx){if(_lodash2["default"].isArray(info))return _multiIdx=idx,_lodash2["default"].map(info,function(id){var data=_lodash2["default"].find(imgSize,{id:id});return"auto"===data.width&&(_hasAutoSize=!0,_hasMultiAutoItem.push(id)),data});var data=_lodash2["default"].find(imgSize,{id:info});return"auto"===data.width&&(_hasAutoSize=!0,_hasSingleAutoItem=info),data});if(_multiIdx>-1){var _ret2=function(){var _multiImages=componentColumn[_multiIdx],_oneImage=componentColumn[1-_multiIdx],_total=_lodash2["default"].reduce(_multiImages,function(pre,a){var b=a.width;return"auto"===b&&(_hasAutoSize=!0,b=0),pre+b},0),_avgWidth=0;_multiImages.length-_hasMultiAutoItem.length>0?(_avgWidth=_total/(_multiImages.length-_hasMultiAutoItem.length),_avgWidth>width-gap&&(_avgWidth=width-gap)):_hasMultiAutoItem.length===_multiImages.length&&(_avgWidth="auto"),_multiImages=_lodash2["default"].map(_multiImages,function(info){return"auto"===info.height?(_hasAutoSize=!0,info):_lodash2["default"].assign({},info,{height:Math.floor(info.height/info.width*_avgWidth),width:Math.floor(_avgWidth)})});var _multiTotalHeight=_lodash2["default"].reduce(_multiImages,function(pre,a){var b=a.height;return"auto"===b&&(_hasAutoSize=!0,b=0),pre+b},0)||0;0===_multiTotalHeight&&_hasMultiAutoItem.length===_multiImages.length&&(_multiTotalHeight="auto");var _maxHeight=null;if(null!==_hasSingleAutoItem)_maxHeight="auto"===_multiTotalHeight?0:_multiTotalHeight+gap*(_multiImages.length-1),_oneImage="auto"===_avgWidth?_lodash2["default"].assign({},_oneImage,{width:"auto",height:"auto"}):width-gap<_avgWidth?_lodash2["default"].assign({},_oneImage,{width:0,height:0}):_lodash2["default"].assign({},_oneImage,{width:Math.floor(width-gap-_avgWidth),height:Math.floor(_maxHeight)});else if("auto"===_multiTotalHeight){var _remainWidth=width-gap-("auto"===_avgWidth?0:_avgWidth);_remainWidth<_oneImage.width&&(_oneImage=_lodash2["default"].assign({},_oneImage,{width:_remainWidth,height:_oneImage.height/_oneImage.width*_remainWidth})),_maxHeight=_oneImage.height}else _maxHeight=Math.max(_oneImage.height,_multiTotalHeight+gap*(_multiImages.length-1));_hasMultiAutoItem&&_hasMultiAutoItem.length>0&&("auto"===_multiTotalHeight?("auto"===_avgWidth&&(_avgWidth=width-gap-_oneImage.width),_lodash2["default"].forEach(_hasMultiAutoItem,function(info){var idx=_lodash2["default"].findIndex(_multiImages,{id:info});_multiImages[idx]=_lodash2["default"].assign({},_multiImages[idx],{width:_avgWidth,height:(_maxHeight-gap*(_multiImages.length-1))/_hasMultiAutoItem.length})})):_maxHeight<=_multiTotalHeight?_lodash2["default"].forEach(_hasMultiAutoItem,function(info){_multiImages[info]=_lodash2["default"].assign({},_multiImages[info],{width:0,height:0})}):(0===_avgWidth&&(_avgWidth=width-gap-("auto"===_oneImage.width?0:_oneImage.width)),_lodash2["default"].forEach(_hasMultiAutoItem,function(info){var idx=_lodash2["default"].findIndex(_multiImages,{id:info});_multiImages[idx]=_lodash2["default"].assign({},_multiImages[idx],{width:_avgWidth,height:(_maxHeight-gap*(_multiImages.length-1)-_multiTotalHeight)/_hasMultiAutoItem.length})}),_multiTotalHeight=_oneImage.height-gap*(_multiImages.length-1)));var _multiScale=1;"auto"!==_multiTotalHeight&&0!==_multiTotalHeight&&(_multiScale=(_maxHeight-gap*(_multiImages.length-1))/_multiTotalHeight);var _oneScale=1;"auto"!==_oneImage.height&&0!==_oneImage.height&&(_oneScale=_maxHeight/_oneImage.height),_multiImages=_lodash2["default"].map(_multiImages,function(info){return _lodash2["default"].assign({},info,{height:Math.floor(info.height*_multiScale),width:Math.floor(info.width*_multiScale)})}),_oneImage=_lodash2["default"].assign({},_oneImage,{height:Math.floor(_oneImage.height*_oneScale),width:Math.floor(_oneImage.width*_oneScale)});var _multiWidth=0;"auto"!==_avgWidth&&(_avgWidth*=_multiScale,_multiWidth=Math.floor(_avgWidth));for(var _totalWidth=_oneImage.width+_multiWidth,_scale=1,_imageRLPadding=void 0;_totalWidth>width-gap;){if(_scale=(width-gap)/_totalWidth,_multiImages=_lodash2["default"].map(_multiImages,function(info){return"auto"===info.height?info:_lodash2["default"].assign({},info,{height:Math.floor(info.height*_scale),width:Math.floor(info.width*_scale)})}),"auto"!==_oneImage.height&&(_oneImage=_lodash2["default"].assign({},_oneImage,{height:Math.floor(_oneImage.height*_scale),width:Math.floor(_oneImage.width*_scale)}),"auto"!==_multiTotalHeight&&(_multiTotalHeight=_lodash2["default"].reduce(_multiImages,function(pre,a){var b=a.height;return"auto"===b&&(_hasAutoSize=!0,b=0),pre+b},0)||0,_maxHeight=Math.max(_oneImage.height,_multiTotalHeight+gap*(_multiImages.length-1)),_oneImage.height!==_maxHeight))){var _fixedHeight=_maxHeight/_oneImage.height;_oneImage=_lodash2["default"].assign({},_oneImage,{height:Math.floor(_oneImage.height*_fixedHeight),width:Math.floor(_oneImage.width*_fixedHeight)})}_avgWidth*=_scale,_multiWidth=Math.floor(_avgWidth),_totalWidth=("auto"===_oneImage.width?0:_oneImage.width)+_multiWidth}return _imageRLPadding=Math.floor((width-_totalWidth-gap-2)/2),
{v:{imgSize:1===_multiIdx?[_oneImage].concat(_multiImages):_multiImages.concat(_oneImage),imgRLPadding:Math.max(_imageRLPadding,0),totalWidth:_totalWidth}}}();if("object"===("undefined"==typeof _ret2?"undefined":_typeof(_ret2)))return _ret2.v}return!1}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash);exports["default"]={_getSingleImageSize:_getSingleImageSize,_getImagesColumnLayoutSize:_getImagesColumnLayoutSize,_getImagesMultiOneLayoutSize:_getImagesMultiOneLayoutSize},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(33),_MGString=(_interopRequireDefault(_tools),__webpack_require__(29)),_MGReactTouchEventBinder=(_interopRequireDefault(_MGString),__webpack_require__(108)),_MGReactTouchEventBinder2=_interopRequireDefault(_MGReactTouchEventBinder),_LegoAnimationGroup=__webpack_require__(69),_LegoAnimationGroup2=_interopRequireDefault(_LegoAnimationGroup),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(PicCarousel)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return this._initMobileEvent&&this._initMobileEvent(),{isHover:!1,currentIdx:0,pccLeft:0}},componentWillUpdate:function(){setTimeout(function(){(0,_jquery2["default"])(".fbc_pcImage").offset()},300)},componentDidMount:function(){var data=this.props.data;data.carouselPictures&&data.carouselPictures.length>0&&this._autoScroll()},componentWillUnmount:function(){this._stopAutoScroll()},_autoScroll:function(){var _this=this;this.autoScroll=window.setTimeout(function(){_this.handleSwitchToNext()},1e3*(this.props.data.speed||2)+400)},_stopAutoScroll:function(){window.clearTimeout(this.autoScroll)},_calculatePccPosition:function(idx){var pccLeft=0,_props=this.props,isMobile=_props.isMobile,fw=_props.fw,data=_props.data,itemNum=_props.itemNum;if(fw=(fw-(isMobile?40:80)*(itemNum||1))/(isMobile?1:itemNum||1),2===data.picCarouselType){for(var pccImgWidth=0,i=0;i<idx+1;i++){var pictureInfo=data.carouselPictures[i];pccImgWidth+=pictureInfo&&pictureInfo.width&&pictureInfo.height?Math.min(100,pictureInfo.width*Math.min(1,40/pictureInfo.height))+4:44}pccImgWidth+10*idx>fw&&(pccLeft=pccImgWidth+10*idx-(fw-20))}else 8*(idx+1)+10*idx>fw&&(pccLeft=8*(idx+1)+10*idx-fw);return pccLeft},handleMouseEnter:function(){this.setState({isHover:!0}),this._stopAutoScroll()},handleMouseLeave:function(){this.setState({isHover:!1}),this._autoScroll()},handleSwitchTo:function(idx){this._stopAutoScroll();var currentIdx=this.state.currentIdx;this.switchTo=idx>currentIdx?"Next":"Prev",this.setState({currentIdx:idx,pccLeft:this._calculatePccPosition(idx)}),this.state.isHover||this._autoScroll()},handleSwitchToPrev:function(){this._stopAutoScroll(),this.switchTo="Prev";var currentIdx=this.state.currentIdx,_newIdx=currentIdx-1;0===currentIdx&&(_newIdx=this.props.data.carouselPictures.length-1),this.setState({currentIdx:_newIdx,pccLeft:this._calculatePccPosition(_newIdx)}),this.state.isHover||this._autoScroll()},handleSwitchToNext:function(){this._stopAutoScroll(),this.switchTo="Next";var currentIdx=this.state.currentIdx,_newIdx=currentIdx+1;currentIdx===this.props.data.carouselPictures.length-1&&(_newIdx=0),this.setState({currentIdx:_newIdx,pccLeft:this._calculatePccPosition(_newIdx)}),this.state.isHover||this._autoScroll()},handleClick:function(){var currentIdx=this.state.currentIdx,data=this.props.data,currentPicture=data.carouselPictures[currentIdx]||{};if(currentPicture.isJumpTo&&currentPicture.jumpTo){var link=currentPicture.jumpTo;window.open((0,_tools.linkify)(link)||"http://"+link)}},handleSwipe:function(e,info){"left"===info.direction?this.handleSwitchToNext(e):"right"===info.direction&&this.handleSwitchToPrev(e)},_initMobileEvent:function(){this.touchEvent=(0,_MGReactTouchEventBinder2["default"])({swipe:this.handleSwipe})},renderPictureCarouselOriginal:function(){var currentIdx=this.state.currentIdx,_props2=this.props,data=_props2.data,fw=_props2.fw,isMobile=_props2.isMobile,picHeight=Math.floor(Math.min(1,(fw-(isMobile?20:60))/(_utils2["default"].getFormWidth()-60))*(data.picHeight||200)),currentPicture=data.carouselPictures[currentIdx]||{},currentImageUrl=currentPicture.isLink?currentPicture.linkUri:currentPicture.imageUri;return _react2["default"].createElement("div",_extends({className:"fbc_pcMain original"},this.touchEvent,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),_react2["default"].createElement("div",{className:"fbc_pcPictures",style:{height:picHeight}},_react2["default"].createElement(_LegoAnimationGroup2["default"],{key:"pcPicture",component:"div",className:"fbc_pcImageWrapper",transitionName:"pcSwitch-an"+(data.animation||1)+"-"+this.switchTo,enterTimeout:400,leaveTimeout:400},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_pcImage",{"no-image":!currentImageUrl}),key:"pic"+(currentPicture.id||currentIdx)},_react2["default"].createElement("img",{className:(0,_classnames2["default"])("fbc_pcImg",{isJumpTo:currentPicture.isJumpTo&&currentPicture.jumpTo}),src:window.rootPath(currentImageUrl||"images/form/carousels_imgPlaceholder.png"),onClick:this.handleClick}),currentPicture.name?_react2["default"].createElement("p",{className:"fbc_pcName"},currentPicture.name):null)),data.carouselPictures.length>1?[_react2["default"].createElement("a",{key:"prev",className:"iconfont fbc_pcPrev",onClick:this.handleSwitchToPrev},String.fromCharCode(58989)),_react2["default"].createElement("a",{key:"next",className:"iconfont fbc_pcNext",onClick:this.handleSwitchToNext},String.fromCharCode(58990))]:null))},renderPictureCarouselSlide:function(){var currentIdx=this.state.currentIdx,_props3=this.props,data=_props3.data,fw=_props3.fw,isMobile=_props3.isMobile,itemNum=_props3.itemNum;fw-=isMobile?20:60;var picHeight=Math.floor(Math.min(1,fw/(_utils2["default"].getFormWidth()-60))*(data.picHeight||200)),curInfo=data.carouselPictures[currentIdx]||{},curImageUrl=curInfo.isLink?curInfo.linkUri:curInfo.imageUri,prevIdx=currentIdx-1;0===currentIdx&&(prevIdx=data.carouselPictures.length-1);var prevInfo=data.carouselPictures[prevIdx]||{},prevImageUrl=prevInfo.isLink?prevInfo.linkUri:prevInfo.imageUri,nextIdx=currentIdx+1;currentIdx===data.carouselPictures.length-1&&(nextIdx=0);var nextInfo=data.carouselPictures[nextIdx]||{},nextImageUrl=nextInfo.isLink?nextInfo.linkUri:nextInfo.imageUri,_curNameStyle={};if(curInfo.name&&curInfo.width&&curInfo.height){fw=(fw-(isMobile?20:60)*((itemNum||1)-1))/(isMobile?1:itemNum||1);var curPercent=Math.min(1,picHeight/curInfo.height);if(.9*fw<curInfo.width*curPercent)curPercent=Math.min(1,.9*fw/curInfo.width),_curNameStyle.bottom=(picHeight-curInfo.height*curPercent)/2;else{var curLeft=(.9*fw-curInfo.width*curPercent)/2;_curNameStyle.left=curLeft,_curNameStyle.right=curLeft,_curNameStyle.bottom=(picHeight-curInfo.height*curPercent)/2}}return _react2["default"].createElement("div",_extends({className:"fbc_pcMain slide"},this.touchEvent,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),_react2["default"].createElement("div",{className:"fbc_pcPictures",style:{height:picHeight}},_react2["default"].createElement(_LegoAnimationGroup2["default"],{key:"pcPicture",component:"div",className:"fbc_pcImageWrapper",transitionName:"pcSlide-"+this.switchTo,enterTimeout:400,leaveTimeout:400},_react2["default"].createElement("div",{key:"prev"+prevIdx,className:(0,_classnames2["default"])("fbc_pcImage","prev",{"no-image":!prevImageUrl}),onClick:this.handleSwitchToPrev},_react2["default"].createElement("img",{className:"fbc_pcImg",src:window.rootPath(prevImageUrl||"images/form/carousels_imgPlaceholder.png")})),_react2["default"].createElement("div",{key:"cur"+currentIdx,className:(0,_classnames2["default"])("fbc_pcImage","current",{"no-image":!curImageUrl})},_react2["default"].createElement("img",{className:(0,_classnames2["default"])("fbc_pcImg",{isJumpTo:curInfo.isJumpTo&&curInfo.jumpTo}),onClick:this.handleClick,src:window.rootPath(curImageUrl||"images/form/carousels_imgPlaceholder.png")}),curInfo.name?_react2["default"].createElement("p",{className:"fbc_pcName",style:_curNameStyle},curInfo.name):null),_react2["default"].createElement("div",{key:"next"+nextIdx,className:(0,_classnames2["default"])("fbc_pcImage","next",{"no-image":!nextImageUrl}),onClick:this.handleSwitchToNext},_react2["default"].createElement("img",{className:"fbc_pcImg",src:window.rootPath(nextImageUrl||"images/form/carousels_imgPlaceholder.png")})))))},renderPictureCarouselControlPanel:function(){var _this2=this,_state=this.state,currentIdx=_state.currentIdx,pccLeft=_state.pccLeft,data=this.props.data,controlPanelWidth=8*data.carouselPictures.length+10*(data.carouselPictures.length-1);return 2===data.picCarouselType&&(controlPanelWidth=10*(data.carouselPictures.length-1),_lodash2["default"].map(data.carouselPictures,function(item){controlPanelWidth+=item&&item.width&&item.height?Math.min(100,item.width*Math.min(1,40/item.height))+4:44})),_react2["default"].createElement("div",{className:"fbc_pcControlPanel"},_react2["default"].createElement("div",{className:"fbc_pccWrapper"},_react2["default"].createElement("ul",{className:"fbc_pccList",style:{width:Math.ceil(controlPanelWidth),marginLeft:-(pccLeft||0)}},_lodash2["default"].map(data.carouselPictures,function(item,idx){if(2===data.picCarouselType){var image=item||{},imageUrl=image.isLink?image.linkUri:image.imageUri;return _react2["default"].createElement("li",{key:"pcc"+idx,className:(0,_classnames2["default"])("fbc_pccImage",{active:idx===currentIdx}),onClick:_this2.handleSwitchTo.bind(_this2,idx)},_react2["default"].createElement("img",{className:"fbc_pccImg",src:window.rootPath(imageUrl||"images/form/carousels_imgPlaceholder.png")}))}return _react2["default"].createElement("li",{key:"pcc"+idx,className:(0,_classnames2["default"])("fbc_pccDot",{active:idx===currentIdx}),onClick:_this2.handleSwitchTo.bind(_this2,idx)})}))))},render:function(){var _props4=this.props,data=_props4.data,componentStyle=_props4.componentStyle;return data.carouselPictures&&data.carouselPictures.length>0?_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_picCarousel","fbc_pct_"+(data.picCarouselType||1))},3===data.picCarouselType?this.renderPictureCarouselSlide():this.renderPictureCarouselOriginal(),this.renderPictureCarouselControlPanel())):null}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(StaticText)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return{isOpen:!1}},componentDidUpdate:function(){this.needFocus&&(this.refs.foldContent.focus(),this.needFocus=!1)},handleToggleFoldText:function(){this.setState({isOpen:!this.state.isOpen})},handleARIA_ToggleFoldText:function(e){13!==e.keyCode&&32!==e.keyCode||(this.needFocus=!0,this.handleToggleFoldText())},render:function(){var _props=this.props,data=_props.data,componentStyle=_props.componentStyle,isOpen=this.state.isOpen,_formStyle=this.formStyle(),describeStyle=_formStyle.describeStyle,_text=null,_rawText="";if(data.isFoldText){var _foldText=null;isOpen?(_rawText=this.getRawContent(data.title||""),_foldText=this.renderRichContent(data.title||"",data.title_style||null)):data.foldContent&&(_rawText=this.getRawContent(data.foldContent||""),_foldText=_react2["default"].createElement("span",{className:"fbc_foldTips"},this.renderRichContent(data.foldContent||"",data.foldContent_style||null))),_text=_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_foldContent","aria-content",{hasFoldText:_foldText,"is-open":isOpen}),ref:"foldContent",tabIndex:1,role:"article","aria-label":_rawText,style:describeStyle},_foldText,_react2["default"].createElement("a",{className:"fbc_foldBtn aria-content",tabIndex:1,role:"button",onClick:this.handleToggleFoldText,onKeyDown:this.handleARIA_ToggleFoldText},isOpen?_config.lang.cFoldText:_config.lang.cUnFoldText,_react2["default"].createElement("i",{className:"iconfont fbc_foldIcon","aria-hidden":!0},isOpen?String.fromCharCode(58984):String.fromCharCode(58983))))}else _rawText=this.getRawContent(data.title||""),_text=_react2["default"].createElement("p",{className:"fbc_staticText aria-content",ref:"foldContent",tabIndex:1,"aria-label":_rawText,role:"article",style:describeStyle},this.renderRichContent(data.title||"",data.title_style||null));return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentBorder"}),_text)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Separator)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],render:function(){var _props=this.props,data=_props.data,componentStyle=_props.componentStyle,hrClass=["","dotted","dashed","solid","double"],hrStyle={};return data.isNoPadding&&(hrStyle={marginLeft:0,marginRight:0}),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentBorder"}),this.renderTitle(data),_react2["default"].createElement("hr",{className:"fbc_separatorHr "+hrClass[data.borderType],style:hrStyle}),this.renderSubtitle(data))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(AuthCode)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(e){formStore.dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){formStore.dispatch({type:"inputBlur",id:this.props.data.id,value:e.target.value})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,inputStyle=_formStyle.inputStyle;return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentBorder"}),this.renderTitle(data),this.renderSubtitle(data),_react2["default"].createElement("p",{className:"fbc_tips",style:tipsStyle},_config.lang.cAuthCodeTips),_react2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:10*(data.cpWidth||8)+"%"}},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,style:inputStyle,onChange:this.handleChange,onBlur:this.handleBlur,value:fill||""}),_react2["default"].createElement("span",{className:"fbc_acImg"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger),_MGVideoParser=__webpack_require__(120),_MGVideoParser2=_interopRequireDefault(_MGVideoParser),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Video)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],renderIframe:function(url,data){if(!url)return null;var info=(0,_MGVideoParser2["default"])(url);if(!info)return null;var link=null;switch(info.type){case"youtube":link="https://www.youtube.com/embed/"+info.id;break;case"vimeo":link="https://player.vimeo.com/video/"+info.id;break;case"youku":link="//player.youku.com/embed/"+info.id;break;case"tudou":if(3===info.playType)link="//player.youku.com/embed/"+info.id;else{var _playType="";info.playType&&(_playType="type="+info.playType+"&lcode="+info.lid+"&"),link="//www.tudou.com/programs/view/html5embed.action?"+_playType+"code="+info.id+"&autoPlay=false&playType=AUTO"}break;case"qq":link=data&&data.vid?"//v.qq.com/iframe/player.html?vid="+data.vid+"&tiny=0&auto=0":"//v.qq.com/iframe/player.html?vid="+info.vid+"&tiny=0&auto=0";break;case"iqiyi":data&&data.vid&&data.tvid&&(link="//open.iqiyi.com/developer/player_js/coopPlayerIndex.html?vid="+data.vid+"&tvId="+data.tvid+"&accessToken=2.f22860a2479ad60d8da7697274de9346&appKey=3955c3425820435e86d0f4cdfe56f5e7&appId=1368&height=100%&width=100%");break;case"bilibili":data&&data.aid&&data.cid&&(link="//player.bilibili.com/player.html?aid="+data.aid+"&cid="+data.cid+"&page=1")}var _props=this.props,fw=_props.fw,itemNum=_props.itemNum,isMobile=_props.isMobile,iFrameHeight=400;return iFrameHeight=!itemNum||isMobile?Math.ceil(9*(fw-60)/16+30):Math.ceil((fw-60*itemNum)/itemNum*9/16+18),null===link?(_MGDebugger2["default"].log(info),"letv"===info.type?_react2["default"].createElement("div",{dangerouslySetInnerHTML:{__html:'<object width="100%" height="'+iFrameHeight+"\">\n\t\t\t\t\t\t\t<param name='allowFullScreen' value='true'>\n\t\t\t\t\t\t\t\t<param name='movie' value=\"//img1.c0.letv.com/ptv/player/swfPlayer.swf?autoPlay=0&id="+info.id+"\"/>\n\t\t\t\t\t\t\t\t<embed allowFullScreen='true' type='application/x-shockwave-flash'\n\t\t\t\t\t\t\t\t       src=\"//img1.c0.letv.com/ptv/player/swfPlayer.swf?autoPlay=0&id="+info.id+'"\n\t\t\t\t\t\t\t\t       width="100%" height="'+iFrameHeight+'" />\n\t\t\t\t\t\t\t</param>\n\t\t\t\t\t\t</object>'}}):"taobao"===info.type?_react2["default"].createElement("video",{style:{width:"100%",height:iFrameHeight},controls:!0,autoPlay:!1},_react2["default"].createElement("source",{type:"video/mp4",src:"//cloud.video.taobao.com//play"+info.data})):null):_react2["default"].createElement("iframe",{width:"100%",height:iFrameHeight,src:link,frameBorder:"0",allowFullScreen:!0,webkitAllowFullScreen:!0,MozAllowFullscreen:!0,scrolling:"no"})},render:function(){var _props2=this.props,data=_props2.data,componentStyle=_props2.componentStyle;return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type),id:data.id,style:componentStyle},this.renderIframe(data.staticVideoUrl,data.videoInfo))}}),module.exports=exports["default"]},function(module,exports){"use strict";function getVideoInfo(str){return youkuParser.isMatch(str)?youkuParser.getInfo(str):tudouParser.isMatch(str)?tudouParser.getInfo(str):youtubeParser.isMatch(str)?youtubeParser.getInfo(str):vimeoParser.isMatch(str)?vimeoParser.getInfo(str):qqParser.isMatch(str)?qqParser.getInfo(str):bilibiliParser.isMatch(str)?bilibiliParser.getInfo(str):leTVParser.isMatch(str)?leTVParser.getInfo(str):iqiyiParser.isMatch(str)?iqiyiParser.getInfo(str):iqiyiIframeParser.isMatch(str)?iqiyiIframeParser.getInfo(str):taobaoVideoParser.isMatch(str)?taobaoVideoParser.getInfo(str):null}Object.defineProperty(exports,"__esModule",{value:!0});var youtubeParser=function(){var _REG_YOUTUBE_MATCH=/^(https?:\/{2})?(w{3}\.)?youtube|youtu\.be/;return{isMatch:function(str){return str.match(_REG_YOUTUBE_MATCH)},getInfo:function(str){var youtubeId=null;return youtubeId=str.match("embed")?str.split(/embed\//)[1].split('"')[0]:str.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],{type:"youtube",id:youtubeId.split("#")[0]}}}}(),vimeoParser=function(){var _REG_VIMEO_MATCH=/^(https?:\/{2})?(w{3}\.)?vimeo\.com/;return{isMatch:function(str){return str.match(_REG_VIMEO_MATCH)},getInfo:function(str){var temp=str.split("/"),vimeoId=temp[temp.length-1];return{type:"vimeo",id:vimeoId}}}}(),youkuParser=function(){var _REG_YOUKU_MATCH=/^(https?:\/{2})?((w{3}|v)\.)?youku\.com/,_REG_YOUKU_ID=/id_(\w+)/;return{isMatch:function(str){return str.match(_REG_YOUKU_MATCH)},getInfo:function(str){var temp=_REG_YOUKU_ID.exec(str),youkuId=temp[1];return{type:"youku",id:youkuId}}}}(),tudouParser=function(){var _REG_TUDOU_MATCH=/^(https?:\/{2})?((w{3}|video)\.)?tudou\.com/;return{isMatch:function(str){return str.match(_REG_TUDOU_MATCH)},getInfo:function(str){var urlInfo=str.split("?")[0],temp=str.split("?")[0].split("/").filter(function(v){return v}),isList=urlInfo.match(/\/listplay\//),isAlbum=urlInfo.match(/\/albumplay\//),isNewYKId=urlInfo.match(/\/v\//),tudouId=temp[temp.length-1],extId=null,playType=null;return isList||isAlbum||!isNewYKId?(isList||isAlbum)&&(tudouId=tudouId.split(".")[0],extId=temp[temp.length-2],playType=isAlbum?2:isList?1:null):(tudouId=tudouId.replace(".html",""),playType=3),{type:"tudou",id:tudouId,lid:extId,playType:playType}}}}(),qqParser=function(){var _REG_QQ_MATCH=/^(https?:\/{2})?v\.qq\.com/;return{isMatch:function(str){return str.match(_REG_QQ_MATCH)},getInfo:function(str){var isStatic=str.indexOf("?vid=")===-1,vid=null,qqId=null;if(isStatic){var temp=str.split("/");vid=temp[temp.length-1],vid=vid.split(".")[0]}else{var _temp=str.split("vid=");qqId=_temp[_temp.length-1]}return{type:"qq",id:qqId?qqId.split(/&|#/)[0]:null,vid:vid,"static":isStatic}}}}(),bilibiliParser=function(){var _REG_BILIBILI=/^(https?:\/{2})?(w{3}\.)?bilibili\.(com|tv)/;return{isMatch:function(str){return str.match(_REG_BILIBILI)},getInfo:function(str){var temp=str.split("/"),bilibiliId=null;return temp.forEach(function(val){if(val.match(/^av(\d)+$/))return bilibiliId=val.replace("av",""),!1}),{type:"bilibili",id:bilibiliId}}}}(),leTVParser=function(){var _REG_LeTV=/^(https?:\/{2})?(w{3}\.)?le\.com/;return{isMatch:function(str){return str.match(_REG_LeTV)},getInfo:function(str){var temp=str.split(/[\/\?]/g),leVid=null;return temp.forEach(function(val){if(val.match(/^(\d+)\.html$/))return leVid=val.replace(".html",""),!1}),{type:"letv",id:leVid}}}}(),iqiyiParser=function(){var _REG_IQiYi=/^(https?:\/{2})?(w{3}\.)?iqiyi\.com/;return{isMatch:function(str){return str.match(_REG_IQiYi)},getInfo:function(str){return{type:"iqiyi",tvid:null,vid:null}}}}(),iqiyiIframeParser=function(){var _REG_IQiYi=/open\.iqiyi\.com/;return{isMatch:function(str){return str.match(_REG_IQiYi)},getInfo:function(str){var vidInfo=str.match(/vid=((.*?)&)/),tvidInfo=str.match(/tvId=((.*?)&)/);return{type:"iqiyi",tvid:tvidInfo[2],vid:vidInfo[2],"static":tvidInfo&&vidInfo}}}}(),taobaoVideoParser=function(){var _REG_TAOBAO=/^(https?:\/{2})?cloud\.video\.taobao\.com\/(\/)?play/;return{isMatch:function(str){return str.match(_REG_TAOBAO)&&str.match(/\.mp4$/)},getInfo:function(str){var _str=str.replace(_REG_TAOBAO,"");return _str=_str.match(/[a-zA-z0-9\/\.]+/)[0],{type:"taobao",data:_str}}}}();exports["default"]=getVideoInfo,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_FormMetaInfoMappingUtil=__webpack_require__(35),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_FORM_COMPONENTS_NAME_DETAILS=(0,_FormMetaInfoMappingUtil.FORM_COMPONENTS_NAME_DETAILS)({np:_config.lang.cnamePrefix,nf:_config.lang.cnameFirst,nm:_config.lang.cnameMiddle,nl:_config.lang.cnameLast,ns:_config.lang.cnameSuffix,nn:_config.lang.cnameNick});exports["default"]=_react2["default"].createClass({displayName:"Component(Name)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(e){var value={};value[e.target.name]=e.target.value,_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:value})},handleBlur:function(e){var value={};value[e.target.name]=e.target.value,_formStore2["default"].dispatch({type:"inputBlur",id:this.props.data.id,value:value})},render:function(){var _this=this,_props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum;fill=fill||{};var _formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,_ariaLabelOrder=[];_ariaLabelOrder=valid&&valid.length>0?["err"+data.id,"title"+data.id,"subtitle"+data.id,"placehoder"+data.id]:["title"+data.id,"subtitle"+data.id,"placehoder"+data.id];var _content=_react2["default"].createElement(_FCTextBox2["default"],{component:"input",key:"name",name:"n",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),type:"text",spellCheck:!1,tabIndex:1,"aria-labelledby":_ariaLabelOrder.join(" "),icon:String.fromCharCode(59073),themeColor:style.themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill.n||""}),openDetails=data.detailsItem||[2,4];data.isOpenDetails&&!_lodash2["default"].isEmpty(openDetails)&&!function(){var itemW=101/openDetails.length-1,_singleLine=!1;isMobile&&(2===openDetails.length?(_singleLine=!0,itemW=50):itemW=100);var _isStart=!0;_content=[];var _ariaContent=[];_lodash2["default"].forEach(_FORM_COMPONENTS_NAME_DETAILS,function(nameInfo){var id=nameInfo.id,name=nameInfo.name,title=nameInfo.title;if(_lodash2["default"].indexOf(openDetails,id)!==-1){var _valid=!1;valid&&valid.indexOf("required")>-1&&(_valid=!fill[name]);var _item_aria_order=_isStart?_ariaLabelOrder:[];_isStart&&(_ariaContent.push(_react2["default"].createElement("span",{className:"aria-name-struct-des",id:"nameStruct"+data.id,"aria-label":_config.lang.ariaNameStruct+"."})),_item_aria_order.push("nameStruct"+data.id),_isStart=!1),_item_aria_order.push("nameStruct"+name+data.id),_ariaContent.push(_react2["default"].createElement("span",{className:"aria-name-struct-hint",id:"nameStruct"+name+data.id,"aria-label":title+"."})),_content.push(_react2["default"].createElement(_FCTextBox2["default"],{component:"input",key:"name"+id,name:name,type:"text",spellCheck:!1,className:(0,_classnames2["default"])("fbc_input nameItem",{name_singleLine:_singleLine,error:_valid}),tabIndex:1,"aria-labelledby":_item_aria_order.join(" "),style:_lodash2["default"].assign({width:itemW+"%"},inputStyle),onChange:_this.handleChange,onBlur:_this.handleBlur,placeholder:title,value:fill[name]||""}))}}),_content=_content.concat(_ariaContent)}();var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:"fb_component name",id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_react2["default"].createElement("span",{className:"aria-placeholder",id:"placehoder"+data.id,"aria-label":(data.placeholder||"")+"."}),_content,_react2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(30),_MGMoment=__webpack_require__(34),_MGMoment2=_interopRequireDefault(_MGMoment),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_MGString=__webpack_require__(29),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_config=__webpack_require__(9),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),INPUT_LOCK_TIMER=30;
exports["default"]=_react2["default"].createClass({displayName:"Component(MobileVerification)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){return this.validMobile=!1,this.getVerificationCode=!1,{isLock:!1,timer:INPUT_LOCK_TIMER,codeValid:null}},componentWillUpdate:function(nextProps,nextState){var _this=this;!this.state.isLock&&nextState.isLock&&!function(){var timer=function timer(){var currentTime=(0,_MGMoment2["default"])().time();startTime>=currentTime?(self.setState({timer:Math.floor((startTime-currentTime)/1e3),isLock:!0}),timerId=_tools2["default"].rAF(timer)):(self.setState({timer:0,isLock:!1}),_tools2["default"].cAF(timerId))},self=_this,startTime=(0,_MGMoment2["default"])().time()+1e3*INPUT_LOCK_TIMER,timerId=void 0;timer()}()},componentWillReceiveProps:function(nextProps){var _this2=this;!this.validMobile||nextProps.valid&&!_lodash2["default"].isEmpty(nextProps.valid)||(this.getVerificationCode=!0,this.validMobile=!1,this.setState({isLock:!0}),_formStore2["default"].getPhoneVerificationCode(this.props.data.id).done(function(res){0===res.r?_this2.setState({isLock:!0}):(_this2.validMobile=!0,_this2.setState({isLock:!0,codeValid:!1,lockValidCode:!1}))}).always(function(){_this2.getVerificationCode=!1}))},handleGetPhoneVerificationCode:function(){var _props=this.props,fill=_props.fill,data=_props.data;fill&&fill.mobile&&!this.state.isLock&&!this.validMobile&&(fill.verificationToken&&!fill.verificationMobileToken||(this._clearValidState(),this.validMobile=!0,_formStore2["default"].dispatch({type:"validMobile",id:data.id})))},_clearValidState:function(){this.setState({codeValid:null,lockValidCode:!1})},handleVerificationCodeChange:function(e){this.state.lockValidCode||(_formStore2["default"].dispatch({type:"setVerificationCode",id:this.props.data.id,value:e.target.value}),this.setState({codeValid:null}),4===e.target.value.length&&(this.setState({lockValidCode:!0}),_formStore2["default"].validVerificationCode(this.props.data.id,this.handleValidVerificationCode)))},handleValidVerificationCode:function(isTrue){this.validVerificationCode=!1,this.setState({codeValid:isTrue,lockValidCode:!1})},handleMobileChange:function(e){this.getVerificationCode=!1,this.validMobile=!1,this._clearValidState(),_formStore2["default"].dispatch({type:"setMobileValue",id:this.props.data.id,value:e.target.value})},render:function(){var _state=this.state,isLock=_state.isLock,timer=_state.timer,codeValid=_state.codeValid,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,style=_props2.style,itemNum=_props2.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputBtnStyle=_formStyle.inputBtnStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,btnWidth=(0,_MGString.getWidth)(_config.lang.cMobileGetCode,(inputBtnStyle.fontSize||14)+"px/1 "+_utils._FONT)+30,btnStyle=_lodash2["default"].assign(inputBtnStyle,{width:btnWidth}),canUseBtn=!1;!isLock&&fill&&fill.mobile&&!this.validMobile&&(fill.verificationToken&&!fill.verificationMobileToken||(canUseBtn=!0)),canUseBtn?btnStyle.borderColor=btnStyle.backgroundColor:(btnStyle.cursor="default",btnStyle.color="#999999",btnStyle.backgroundColor="#F9FAFB",btnStyle.borderColor="#D9D9D9");var _btnVerification=_react2["default"].createElement("a",{className:"fbc_sendMsgAuth",style:btnStyle,onClick:this.handleGetPhoneVerificationCode},isLock?_config.lang.cMobileHasSendCode({timer:timer}):_config.lang.cMobileGetCode),_noQuotaTips=null;fill&&fill.verificationToken&&!fill.verificationMobileToken&&(_noQuotaTips=_react2["default"].createElement("p",{className:"fbc_noQuotaTips"},_config.lang.cMobileNoQuotaTips),_btnVerification=_react2["default"].createElement("a",{className:"fbc_sendMsgAuth",style:btnStyle},_react2["default"].createElement("i",{className:"iconfont"},String.fromCharCode(59173)),_config.lang.cMobileCodeSucceed));var _authInput=null;if(fill&&fill.verificationToken&&fill.verificationMobileToken){var verificationCodeError=valid&&(valid.indexOf("errMobileVCRequired")>-1||valid.indexOf("errMobileVCError")>-1),authTitleWidth=(0,_MGString.getWidth)(_config.lang.cMobileCodeInput+"*",(inputBtnStyle.fontSize||14)+"px/1 "+_utils._FONT)+30;_authInput=_react2["default"].createElement("div",{className:"fbc_authInput"},_react2["default"].createElement("p",{className:"fbc_aiTitle",style:{width:authTitleWidth,lineHeight:inputStyle.lineHeight,fontSize:inputStyle.fontSize}},_config.lang.cMobileCodeInput,_react2["default"].createElement("span",{className:"fbc_required"},"*")),_react2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_input",{error:verificationCodeError}),style:_lodash2["default"].assign({},inputStyle,{paddingLeft:authTitleWidth+6}),value:fill.verificationCode||"",disabled:!!this.validVerificationCode&&"disabled",onChange:this.handleVerificationCodeChange}),_react2["default"].createElement("span",{className:(0,_classnames2["default"])("iconfont fbc_aiStatus",{isLoading:this.validVerificationCode,isTrue:codeValid===!0,isFalse:codeValid===!1}),style:{lineHeight:inputStyle.height-2+"px"}},null===codeValid?"":codeValid?String.fromCharCode(58988):String.fromCharCode(58938)))}var _mobileNumberError=valid&&(valid.indexOf("mobileRequired")>-1||valid.indexOf("errMobileExtResourceUnavailable")>-1||valid.indexOf("errMobileAreaUnavailable")>-1||valid.indexOf("required")>-1),cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:"fb_component contactMobile",id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_react2["default"].createElement("div",{className:"fbc_imItem isSendMsgAuth",style:{marginRight:btnWidth?btnWidth+7:null}},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:_mobileNumberError}),type:isMobile?"tel":"text",spellCheck:!1,autoComplete:"off",icon:String.fromCharCode(59074),themeColor:style.themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,disabled:!!isLock&&"disabled",onChange:this.handleMobileChange,placeholder:data.placeholder||"",value:fill?fill.mobile||"":""}),_btnVerification),_noQuotaTips,_authInput)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formMetaUtil=__webpack_require__(57),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),InputItem=_react2["default"].createClass({displayName:"MultiItem",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setMultiValue",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputMultiBlur",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleAdd:function(){_formStore2["default"].dispatch({type:"inputMultiAdd",id:this.props.data.id})},handleRemove:function(){_formStore2["default"].dispatch({type:"inputMultiRemove",id:this.props.data.id,idx:this.props.idx})},render:function(){var _props=this.props,isMobile=_props.isMobile,length=_props.length,idx=_props.idx,fill=_props.fill,data=_props.data,inputStyle=_props.inputStyle,themeColor=_props.themeColor,inputWithIconStyle=_props.inputWithIconStyle,inputIconStyle=_props.inputIconStyle,componentStyle=_props.componentStyle,inputType=_props.inputType,valid=_props.valid,mode=_props.mode,ariaLabelledBy=_props.ariaLabelledBy,_operate=null;if(data.isAcceptMulti){var _remove=null,_add=null;isMobile||idx!==length-1||(_add=_react2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,style:inputStyle,onClick:this.handleAdd},String.fromCharCode(58979))),1!==length&&(_remove=_react2["default"].createElement("a",{className:"iconfont fbc_removeIcon",title:_config.lang.cMultiInputRemove,style:inputStyle,onClick:this.handleRemove},String.fromCharCode(58980))),_operate=_react2["default"].createElement("div",{className:"fbc_imOperate"},_remove,_add)}return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_imItem",{"is-multi":data.isAcceptMulti}),style:componentStyle},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid}),type:isMobile&&1===mode?_config.INPUT_TYPING_TYPE[inputType]||"text":"text",spellCheck:!1,autoComplete:"off",tabIndex:1,"aria-labelledby":ariaLabelledBy,icon:_formMetaUtil.FIELD_INFO_MAPPING[inputType].icon,themeColor:themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill||""}),_operate)}});exports["default"]=_react2["default"].createClass({displayName:"Component(InputMulti)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,type=_props2.type,style=_props2.style,mode=_props2.mode,itemNum=_props2.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,len=(fill||[""]).length,_ariaLabelOrder=[];_ariaLabelOrder=valid&&valid.length>0?["err"+data.id,"title"+data.id,"subtitle"+data.id,"hint"+data.id,"placehoder"+data.id]:["title"+data.id,"subtitle"+data.id,"hint"+data.id,"placehoder"+data.id];var _content=_lodash2["default"].map(fill||[""],function(info,idx){var _valid=!1;return valid&&valid.indexOf("required")>-1&&(_valid=!info),_react2["default"].createElement(InputItem,{key:"im"+idx,isMobile:isMobile,valid:_valid,length:len,idx:idx,mode:mode,fill:info,data:data,inputType:type,themeColor:style.themeColor,inputStyle:inputStyle,ariaLabelledBy:_ariaLabelOrder.join(" "),inputWithIconStyle:inputWithIconStyle,inputIconStyle:inputIconStyle})}),cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:"fb_component inputMulti",id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data,isMobile&&data.isAcceptMulti&&(!data.subtitle||0===data.subtitle.length)),this.renderSubtitle(data,isMobile&&data.isAcceptMulti),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_react2["default"].createElement("span",{className:"aria-placeholder",id:"placehoder"+data.id,"aria-label":(data.placeholder||"")+"."}),data.isAcceptMulti?_react2["default"].createElement("span",{className:"aria-placeholder",id:"hint"+data.id,"aria-label":_config.lang.ariaAcceptMultiItem+"."}):null,_content)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_tools=__webpack_require__(33),_utils=__webpack_require__(30),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_MGString=__webpack_require__(29),_config=__webpack_require__(9),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),InputItem=_react2["default"].createClass({displayName:"MultiWxItem",getInitialState:function(){return{succeedAuth:!1}},componentDidUpdate:function(){var _this=this;window.clearTimeout(this.resetTimer),this.state.succeedAuth&&(this.resetTimer=window.setTimeout(function(){_this.setState({succeedAuth:!1})},2e3))},componentWillUnmount:function(){window.clearTimeout(this.resetTimer)},handleChange:function(e){_formStore2["default"].dispatch({type:"setMultiValue",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputMultiBlur",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleAdd:function(){_formStore2["default"].dispatch({type:"inputMultiAdd",id:this.props.data.id})},handleRemove:function(){_formStore2["default"].dispatch({type:"inputMultiRemove",id:this.props.data.id,idx:this.props.idx})},handleGetWxInfo:function(e){var _this2=this;e.preventDefault(),e.stopPropagation(),_formStore2["default"].wxAuth().done(function(res){_this2.setState({succeedAuth:!0})})},render:function(){var _props=this.props,isMobile=_props.isMobile,length=_props.length,idx=_props.idx,fill=_props.fill,data=_props.data,inputStyle=_props.inputStyle,inputWithIconStyle=_props.inputWithIconStyle,inputIconStyle=_props.inputIconStyle,componentStyle=_props.componentStyle,inputButtonStyle=_props.inputButtonStyle,themeColor=_props.themeColor,_operate=null;if(data.isAcceptMulti){var _remove=null,_add=null;isMobile||idx!==length-1||(_add=_react2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,style:inputStyle,onClick:this.handleAdd},String.fromCharCode(58979))),1!==length&&(_remove=_react2["default"].createElement("a",{className:"iconfont fbc_removeIcon",title:_config.lang.cMultiInputRemove,style:inputStyle,onClick:this.handleRemove},String.fromCharCode(58980))),_operate=_react2["default"].createElement("div",{className:"fbc_imOperate"},_remove,_add)}var _btnWxInfoGetter=null,btnWidth=0;if(0===idx&&!(0,_tools.inIframe)()){var _content=(0,_utils.isAuthorizedWx)()?_config.lang.cRefreshWxAuth:_config.lang.cWxAuth;btnWidth=(0,_MGString.getWidth)(_content,inputButtonStyle.fontSize+"px/1 "+_utils._FONT)+30;var btnStyle=_lodash2["default"].assign(inputButtonStyle,{width:btnWidth});_btnWxInfoGetter=_react2["default"].createElement("a",{className:"fbc_sendMsgAuth",style:btnStyle,onClick:this.handleGetWxInfo},this.state.succeedAuth?_react2["default"].createElement("i",{className:"iconfont"},String.fromCharCode(58988)):_content)}return _react2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_imItem:!0,hasAuthBtn:_btnWxInfoGetter,"is-multi":data.isAcceptMulti}),style:_lodash2["default"].assign({},componentStyle,{marginRight:btnWidth?btnWidth+5:null})},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_input",type:"text",spellCheck:!1,icon:String.fromCharCode(59094),themeColor:themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill||""}),_btnWxInfoGetter,_operate)}});exports["default"]=_react2["default"].createClass({displayName:"Component(WxMulti)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,style=_props2.style,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,inputBtnStyle=_formStyle.inputBtnStyle,_content=(fill||[""]).map(function(info,idx){return _react2["default"].createElement(InputItem,{key:"im"+idx,isMobile:isMobile,length:(fill||[""]).length,idx:idx,fill:info,data:data,themeColor:style.themeColor,inputStyle:inputStyle,inputWithIconStyle:inputWithIconStyle,inputIconStyle:inputIconStyle,inputButtonStyle:inputBtnStyle})}),_widthPre=isMobile?10:data.cpWidth||8;return _react2["default"].createElement("div",{className:"fb_component inputMulti",id:data.id,style:componentStyle},this.renderTitle(data,!(!isMobile||!data.isAcceptMulti||data.subtitle&&0!==data.subtitle.length)),this.renderSubtitle(data,!(!isMobile||!data.isAcceptMulti)),this.renderError(valid),_react2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:10*_widthPre+"%"}},_content))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_utils=__webpack_require__(30),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),FORM_COMPONENTS_IMSNS_INFO_TYPES=[{id:36,value:_config.lang.cWechat},{id:35,value:_config.lang.cQQ},{id:41,value:_config.lang.cSkype},{id:38,value:_config.lang.cWhatsApp},{id:39,value:_config.lang.cMessenger},{id:42,value:_config.lang.cViber},{id:37,value:_config.lang.cLine},{id:40,value:_config.lang.cTelegram},{id:49,value:_config.lang.cWeibo},{id:47,value:_config.lang.cLinkedIn},{id:48,value:_config.lang.cTwitter},{id:44,value:_config.lang.cFacebook},{id:46,value:_config.lang.cInstagram},{id:45,value:_config.lang.cGooglePlus}];exports["default"]=_react2["default"].createClass({displayName:"Component(IMSNSGroup)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],getInitialState:function(){this.props.data.infoTypes||[];return null},handleMouseDownType:function(idx,type,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleChangeType(idx,type,e))},handleChangeType:function(idx,type){_formStore2["default"].dispatch({type:"setGroupType",id:this.props.data.id,value:type,index:idx})},handleDropChangeType:function(idx,e){var _type=+e.target.value;_formStore2["default"].dispatch({type:"setGroupType",id:this.props.data.id,value:_type,index:idx})},handleChangeContent:function(idx,type,e){_formStore2["default"].dispatch({type:"setGroupInfo",id:this.props.data.id,index:idx,value:e.target.value,contentType:type})},handleBlur:function(e){},handleAdd:function(){_formStore2["default"].dispatch({type:"addContactInfoGroup",id:this.props.data.id})},handleRemove:function(idx){_formStore2["default"].dispatch({type:"removeContactInfoGroup",id:this.props.data.id,index:idx})},renderOptions:function(selected,idx){for(var _props=this.props,isMobile=_props.isMobile,data=_props.data,infoTypes=data.infoTypes||[],_infoTypes=[],i=0,len=infoTypes.length;i<len;i++){var info=_lodash2["default"].find(FORM_COMPONENTS_IMSNS_INFO_TYPES,{id:infoTypes[i]});info&&(isMobile?_infoTypes.push(_react2["default"].createElement("option",{className:"fbc_selectLi",key:"infoType"+info.id,value:info.id},info.value)):_infoTypes.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:selected===info.id}),key:"infoType"+info.id,onMouseDown:this.handleMouseDownType.bind(this,idx,info.id),onClick:this.handleChangeType.bind(this,idx,info.id)},info.value)))}return _infoTypes},renderItem:function(fillData,idx,extInfo){var _props2=this.props,isMobile=_props2.isMobile,data=_props2.data,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,selectPlaceholderStyle=_formStyle.selectPlaceholderStyle,selectArrowStyle=_formStyle.selectArrowStyle,_infoTypes=data.infoTypes;if(!_infoTypes||_lodash2["default"].isEmpty(_infoTypes))return null;var _fillingType=+(fillData.type||_infoTypes[0]),_fillData=fillData.info||"",_selectValue=(_lodash2["default"].find(FORM_COMPONENTS_IMSNS_INFO_TYPES,{id:_fillingType})||{}).value,_c=[],operateWidth=null,_operate=null;if(!("isAcceptMulti"in data)||data.isAcceptMulti){operateWidth=(inputStyle.fontSize+4)*(isMobile?1:2)+2;var _remove=null,_add=null;isMobile||idx!==extInfo.len-1||(_add=_react2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,style:inputStyle,onClick:this.handleAdd},String.fromCharCode(58979))),1!==extInfo.len&&(_remove=_react2["default"].createElement("a",{className:"iconfont fbc_removeIcon",title:_config.lang.cMultiInputRemove,style:inputStyle,onClick:this.handleRemove.bind(this,idx)},String.fromCharCode(58980))),_operate=_react2["default"].createElement("div",{className:"fbc_imOperate"},_remove,_add)}if(1===_infoTypes.length)_c.push(_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:extInfo.valid}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",key:"contentInput",placeholder:_selectValue,value:_fillData,style:_lodash2["default"].assign({},inputStyle,{paddingRight:operateWidth?operateWidth:5}),onChange:this.handleChangeContent.bind(this,idx,_fillingType)}));else{var _typeSelect=null;_typeSelect=isMobile?_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select","combineItem",{hasValue:_selectValue}),ref:"dropdown",key:"typeSelect"},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_react2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),value:_fillingType,style:inputStyle,onChange:this.handleDropChangeType.bind(this,idx)},this.renderOptions(_fillingType,idx))):_react2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select","combineItem",{hasValue:_selectValue}),display:_selectValue,ref:"dropdown",key:"typeSelect",selectArrowStyle:selectArrowStyle,style:_selectValue?selectStyle:selectPlaceholderStyle},this.renderOptions(_fillingType,idx)),_c=_c.concat([_typeSelect,_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input combineItem",{error:extInfo.valid}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",key:"contentInput",style:_lodash2["default"].assign({},inputStyle,{paddingRight:operateWidth?operateWidth:5}),onChange:this.handleChangeContent.bind(this,idx,_fillingType),value:_fillData})])}return _react2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_imItem:!0,"is-multi":data.isAcceptMulti}),key:"infoGroup"+idx},_c,_react2["default"].createElement("div",{className:"clearB"}),_operate)},render:function(){var _this=this,_props3=this.props,data=_props3.data,fill=_props3.fill,valid=_props3.valid,componentStyle=_props3.componentStyle,isMobile=_props3.isMobile,style=_props3.style,itemNum=_props3.itemNum,_component=[],len=(fill||[{}]).length;_lodash2["default"].forEach(fill||[{}],function(d,idx){var extInfo={len:len};valid&&valid.indexOf("required")>-1&&(extInfo.valid=!d.info),_component.push(_this.renderItem(d,idx,extInfo))});var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data,!(!isMobile||!data.isAcceptMulti||data.subtitle&&0!==data.subtitle.length)),this.renderSubtitle(data,!(!isMobile||!data.isAcceptMulti)),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp",{fbc_combineComponent:data.infoTypes.length>1}),style:{width:cpWidthPre+"%"}},_component)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_MGString=__webpack_require__(29),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_utils=__webpack_require__(30),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Input)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChangeSymbol:function(type){_formStore2["default"].dispatch({type:"setCurrencySymbol",id:this.props.data.id,value:type})},handleMouseDownSymbol:function(type,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleChangeSymbol(type,e))},handleDropChangeSymbol:function(e){var _type=+e.target.value;_formStore2["default"].dispatch({type:"setCurrencySymbol",id:this.props.data.id,value:_type})},handleChangeContent:function(e){_formStore2["default"].dispatch({type:"setCurrencyVal",id:this.props.data.id,value:e.target.value})},handleBlurContent:function(e){_formStore2["default"].dispatch({type:"blurCurrencyVal",id:this.props.data.id,value:e.target.value})},renderOptions:function(selected){var _this=this,isMobile=this.props.isMobile,_infoTypes=[];return _lodash2["default"].forEach(_config.lang.cCurrencySymbolArray,function(info,idx){isMobile?_infoTypes.push(_react2["default"].createElement("option",{className:"fbc_selectLi",key:"infoType"+idx,value:idx+1},info)):_infoTypes.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:selected===idx+1}),key:"infoType"+idx,onMouseDown:_this.handleMouseDownSymbol.bind(_this,idx+1),onClick:_this.handleChangeSymbol.bind(_this,idx+1)},info))}),_infoTypes},render:function(){var _props=this.props,fw=_props.fw,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputUnitStyle=_formStyle.inputUnitStyle,selectStyle=_formStyle.selectStyle,selectPlaceholderStyle=_formStyle.selectPlaceholderStyle,selectArrowStyle=_formStyle.selectArrowStyle,cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100));var _symbol=fill?fill[0]||data.cfDefaultSymbol:data.cfDefaultSymbol,_value=(fill?fill[1]:null)||"",_symbolValue=_config.lang.cCurrencySymbolArray[_symbol-1];_symbol=_symbol?+_symbol:0;var _symbolSelect=null;_symbolSelect=isMobile?_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select fbc_cfCurrencySymbol",{hasValue:_symbolValue}),ref:"dropdown",key:"symbol"},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_react2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),value:_symbol,style:inputStyle,onChange:this.handleDropChangeSymbol},this.renderOptions(_symbol))):_react2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select vpType",{hasValue:_symbolValue}),display:_symbolValue,ref:"dropdown",key:"symbol",selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({},_symbolValue?selectStyle:selectPlaceholderStyle)},this.renderOptions(_symbol));var unitWidth=null;return data.unit&&(unitWidth=Math.ceil(Math.min((0,_MGString.getWidth)(data.unit,inputUnitStyle.fontSize+"px/1 "+_utils._FONT),((fw/(itemNum||1)-60)*(cpWidthPre/10)-(isMobile?10:25))/50))),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_cfCurrency",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%",height:inputStyle.height}},_symbolSelect,_react2["default"].createElement("div",{className:"fbc_cfCurrencyVal"},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",style:_lodash2["default"].assign({},inputStyle,{
paddingRight:unitWidth?unitWidth+8:null}),key:"value",onChange:this.handleChangeContent,onBlur:this.handleBlurContent,value:_value})),data.unit?_react2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_unit"),style:inputUnitStyle},data.unit):null)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Input)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputBlur",id:this.props.data.id,value:e.target.value})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum,cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_cfCnId",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp")},_react2["default"].createElement(_FCTextBox2["default"],{component:"input",style:{},className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",themeColor:style.themeColor,onChange:this.handleChange,onBlur:this.handleBlur,value:fill||""}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_FCDropDown=__webpack_require__(61),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(52),_FCTextBox2=_interopRequireDefault(_FCTextBox),_utils=__webpack_require__(30),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Input)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],handleChangeType:function(type){_formStore2["default"].dispatch({type:"setVehicleType",id:this.props.data.id,value:type})},handleMouseDownType:function(type,e){isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleChangeType(type,e))},handleDropChangeType:function(e){var _type=+e.target.value;_formStore2["default"].dispatch({type:"setVehicleType",id:this.props.data.id,value:_type})},handleChangeContent:function(e){_formStore2["default"].dispatch({type:"setVehicleVal",id:this.props.data.id,value:e.target.value})},handleBlurContent:function(e){_formStore2["default"].dispatch({type:"blurVehicleVal",id:this.props.data.id,value:e.target.value})},renderOptions:function(selected){var _this=this,isMobile=this.props.isMobile,_infoTypes=[];return _lodash2["default"].forEach(_utils.FORM_SETTINGS_CF_VEHICLE_TYPE_SELECT,function(info){isMobile?_infoTypes.push(_react2["default"].createElement("option",{className:"fbc_selectLi",key:"infoType"+info.id,value:info.id},info.title)):_infoTypes.push(_react2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:selected===info.id}),key:"infoType"+info.id,onMouseDown:_this.handleMouseDownType.bind(_this,info.id),onClick:_this.handleChangeType.bind(_this,info.id)},info.title))}),_infoTypes},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum,cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100));var _fillingType=+((fill||{}).vpType||data.defaultVpLocation||1),_fillData=(fill||{}).vpVal||"",_selectValue=(_lodash2["default"].find(_utils.FORM_SETTINGS_CF_VEHICLE_TYPE_SELECT,{id:_fillingType})||{}).title,_typeSelect=null;_typeSelect=isMobile?_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_mlItem fbc_select vpType",{hasValue:_selectValue}),ref:"dropdown",key:"vpType"},_react2["default"].createElement("i",{className:"iconfont fbc_selectArrow"},String.fromCharCode(58983)),_react2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),value:_fillingType,onChange:this.handleDropChangeType},this.renderOptions(_fillingType))):_react2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_mlItem fbc_select vpType",{hasValue:_selectValue}),display:_selectValue,ref:"dropdown",key:"vpType"},this.renderOptions(_fillingType));var _len=6;"F"!==_fillData.charAt(1).toUpperCase()&&"D"!==_fillData.charAt(1).toUpperCase()&&(7!==_fillData.length||"F"!==_fillData.charAt(6).toUpperCase()&&"D"!==_fillData.charAt(6).toUpperCase())||(_len=7);var _content=[_typeSelect,_react2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_mlItem fbc_input vpNo vpExt","length"+_len,{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",key:"vpNo",style:{},onChange:this.handleChangeContent,onBlur:this.handleBlurContent,value:_fillData}),_react2["default"].createElement("div",{key:"clear",className:"clearB"})];if(2===data.componentType){var isLength8=_lodash2["default"].trim(_fillData).match(/^WJ['京津冀晋蒙辽吉黑沪苏浙皖闽赣鲁豫鄂湘粤桂琼渝川贵云藏陕甘青宁新']/);_fillData&&_fillData.match(/^[京津冀晋蒙辽吉黑沪苏浙皖闽赣鲁豫鄂湘粤桂琼渝川贵云藏陕甘青宁新]/)&&("F"===_fillData.charAt(2).toUpperCase()||"D"===_fillData.charAt(2).toUpperCase()||8===_fillData.length&&("F"===_fillData.charAt(7).toUpperCase()||"D"===_fillData.charAt(7).toUpperCase()))&&(isLength8=!0),_content=_react2["default"].createElement(_FCTextBox2["default"],{key:"vpNo",component:"input",className:(0,_classnames2["default"])("fbc_input vpNo",{length7:!isLength8,length8:isLength8,error:valid&&valid.length>0}),style:{},ref:"input",type:"text",spellCheck:!1,autoComplete:"off",themeColor:style.themeColor,onChange:this.handleChangeContent,onBlur:this.handleBlurContent,value:_fillData||""})}return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_cfCnVehiclePlate",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_react2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp")},_content)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function inject(injection){isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode}function render($c,drakBg){isDarkBG=drakBg;var SHARE_PADDING=0!==_utils2["default"].getSettings().isShowShare?100:20;FORM_WIDTH_PADDING=isMobile()?0:SHARE_PADDING,_reactDom2["default"].render(_react2["default"].createElement(Copyright,null),$c[0])}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_extensions=__webpack_require__(40),_extensions2=_interopRequireDefault(_extensions),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),FORM_WIDTH_PADDING=20,isMobile=void 0,isDarkBG=!1,getCurrentWidth=void 0,getMode=void 0,Copyright=_react2["default"].createClass({displayName:"Copyright",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());return _lodash2["default"].assign({formWidth:formWidth,updateCounter:0},_formStore2["default"].getState())},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){if("$$resize"===action.type){var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth()),newState={updateCounter:(this.state.updateCounter+1)%100};formWidth!==this.state.formWidth&&(newState.formWidth=formWidth),this.setState(newState)}},render:function(){var width=this.state.formWidth,tail=_utils2["default"].getTail()||{},orgName=_utils2["default"].getOrgName(),isNoLogo=_extensions2["default"].getExt("nologo"),hasCopyrightLogo=_extensions2["default"].getExt("copyrightLogo"),poweredBy=_config.lang.gPoweredBy;2===tail.copyrightType&&orgName&&(poweredBy=_config.lang.gPoweredByWithCompanyFunc({company:orgName||""}));var _poweredByNormal=_react2["default"].createElement("a",{className:"poweredBy",target:"_blank",href:"http://www.mikecrm.com/indexForm.php?ref=form"},_react2["default"].createElement("span",{className:(0,_classnames2["default"])("poweredBy_logo",{poweredBy_light:isDarkBG})}),_react2["default"].createElement("span",{className:"poweredBy_title",style:{maxWidth:width-100,color:isDarkBG?"#fff":null}},poweredBy)),_poweredBy=null;if(hasCopyrightLogo&&3===tail.copyrightType){var selfLogoStyle={};isMobile()||(selfLogoStyle={width:width}),_poweredBy=_react2["default"].createElement("div",{className:"pb_hasSelfLogo",style:selfLogoStyle},_react2["default"].createElement("div",{key:"company",className:"pb_companyInfo"},tail.companyLogo?_react2["default"].createElement("a",{className:"pb_companyLogoWrapper",target:"_blank",href:tail.companyLink},_react2["default"].createElement("img",{className:"pb_companyLogo",src:tail.companyLogo})):null,tail.companyName?_react2["default"].createElement("p",{className:"pb_companyName"},_react2["default"].createElement("a",{className:"pb_caLink",target:"_blank",href:tail.companyLink,style:{color:isDarkBG?"#fff":null}},tail.companyName||"")):null),isNoLogo?null:isMobile()?_poweredByNormal:_react2["default"].createElement("a",{key:"mike",className:"pb_mikeLogo",target:"_blank",href:"http://www.mikecrm.com/indexForm.php?ref=form"}))}else isNoLogo||(_poweredBy=_poweredByNormal);return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("c_main",{"is-noLogo":isNoLogo})},_poweredBy)}});exports["default"]={inject:inject,render:render},module.exports=exports["default"]},,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _setPageMode(){var _mode=+window._VT;return isNaN(_mode)?1:_mode<0||_mode>5?1:_mode||1}function _containerBinder(utils){return _U=utils,$window=(0,_jquery2["default"])(window),$form=(0,_jquery2["default"])(".main"),$body=$form.find(".body"),$submit=$form.find(".submitWrapper"),$copyright=(0,_jquery2["default"])(".copyright"),$wrapper=(0,_jquery2["default"])("body"),$container=(0,_jquery2["default"])(".wrapper"),$scrollContainer=(0,_jquery2["default"])("html, body, .handleForm"),$submitForm=(0,_jquery2["default"])(".handleForm"),{$form:$form,$body:$body,$submit:$submit,$copyright:$copyright,$wrapper:$wrapper,$container:$container,$scrollContainer:$scrollContainer,$submitForm:$submitForm,$window:$window}}function _setRawInfo(){return{raw:_rawInfo,vst:_vst,JHR:_jhr,token:_token,OQ:_OQ}}function _updateRawInfo(){var _m_token=window.SOUL&&window.SOUL._m?window.SOUL._m.T:null;_rawInfo=window.SOUL,_vst=window.VST,_jhr=window.JHR,_token=window._T||_m_token,_OQ=window.OQ}function _isMobile(){return _tools2["default"].deviceCheck.isMobile}function _getCurrentWidth(){return _tools2["default"].getWindowSize().width}function _getStaticPath(relativePath){return _MGString2["default"].isUrl(relativePath)?relativePath:"cn"===window._SLD&&"./images/form/wechat_default.jpg"===relativePath?location.protocol+_config3["default"].CDN_PATH_WITHOUT_PROTOCOL+"images/form/wechat_default.jpg":null!=window._LFP&&!window._CDN&&window._LFP<.5?location.protocol+"//pcdn.mikecrm.com/"+relativePath.replace(/^(\.)?\//g,""):location.protocol+"//"+location.host+"/"+relativePath.replace(/^(\.)?\//g,"")}function _setWechat(){var urlInfo=_tools2["default"].parseURL(location.href);if(urlInfo.params&&urlInfo.params.WCT){var _WCT=urlInfo.params.WCT,date=new Date;date.setTime(date.getTime()+3456e7);var expires="expires="+date.toGMTString();document.cookie="WCT="+_WCT+"; path=/; "+expires+"; domain="+location.host.replace(/^(cn|hk|sv|va|sg|jp)\./,"")+";",document.cookie="WCT="+_WCT+"; path=/; "+expires+"; domain="+location.host+";"}if(!window.IN_WECHAT||!window.WC_JSAPI_PARAMS)return!1;var _WC_JSAPI_LIST=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","openLocation","getLocation","showOptionMenu","scanQRCode"],_configWx={debug:!1,appId:WC_JSAPI_PARAMS.appId,timestamp:WC_JSAPI_PARAMS.timestamp,nonceStr:WC_JSAPI_PARAMS.nonceStr,signature:WC_JSAPI_PARAMS.signature,jsApiList:_WC_JSAPI_LIST};_jweixin2["default"].config(_configWx);var _U$getSettings=_U.getSettings(),weChatTitle=_U$getSettings.weChatTitle,weChatImage=_U$getSettings.weChatImage,weChatDescribe=_U$getSettings.weChatDescribe,_U$getHeader=_U.getHeader(),headline=_U$getHeader.headline,description=_U$getHeader.description;headline=(headline||[""]).join(""),description=(description||[""]).join("");var _shareInfo={title:void 0===weChatTitle?headline||_config.lang.gWeChatSetHeadlineDefault:weChatTitle||"",desc:void 0===weChatDescribe?description:weChatDescribe||"",link:location.origin+"/"+_U.token(),imgUrl:_getStaticPath(weChatImage||"./images/form/wechat_default.jpg")};_jweixin2["default"].ready(function(){_jweixin2["default"].checkJsApi({jsApiList:_WC_JSAPI_LIST,success:function(res){"checkJsApi:ok"===res.errMsg&&(_jweixin2["default"].onMenuShareTimeline(_shareInfo),_jweixin2["default"].onMenuShareAppMessage(_shareInfo),_jweixin2["default"].onMenuShareQQ(_shareInfo),_jweixin2["default"].onMenuShareWeibo(_shareInfo),_jweixin2["default"].showOptionMenu())}})})}function _setMessengerInIframe(cb){_tools2["default"].inIframe()&&window.addEventListener&&window.addEventListener("message",function(evt){if(evt.data){var _d={};try{_d=JSON.parse(evt.data)}catch(e){}_d.cif&&(_iframeMessageData={},_iframeMessageData.opacityBg=_d.atp,_iframeMessageData.topFrameLocationHref=_d.tl,_U.setInjectState(_d.cif),$wrapper.addClass("inframe"),_U.postMessage({height:$container.outerHeight(!0)+30}),cb&&cb(evt,_d))}})}function _getIframeSettings(){return _iframeMessageData||{}}function _eventBind(){}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_jquery=(_interopRequireDefault(_lodash),__webpack_require__(22)),_jquery2=_interopRequireDefault(_jquery),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_jweixin=__webpack_require__(135),_jweixin2=_interopRequireDefault(_jweixin),_config=__webpack_require__(9),_MGString=__webpack_require__(29),_MGString2=_interopRequireDefault(_MGString),_config2=__webpack_require__(6),_config3=_interopRequireDefault(_config2),$form=void 0,$body=void 0,$submit=void 0,$copyright=void 0,$wrapper=void 0,$container=void 0,$scrollContainer=void 0,$window=void 0,$submitForm=void 0,_U=null,_m_token=window.SOUL&&window.SOUL._m?window.SOUL._m.T:null,_rawInfo=window.SOUL,_vst=window.VST,_jhr=window.JHR,_token=window._T||_m_token,_OQ=window.OQ,_iframeMessageData={};exports["default"]={isMobile:_isMobile,setPageMode:_setPageMode,setRawInfo:_setRawInfo,updateRawInfo:_updateRawInfo,contentBinder:_containerBinder,setWechat:_setWechat,getStaticPath:_getStaticPath,setMessageIframe:_setMessengerInIframe,getPostSettings:_getIframeSettings,getCurrentWidth:_getCurrentWidth,eventBind:_eventBind},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _MGUtil=__webpack_require__(27),_MGUtil2=_interopRequireDefault(_MGUtil);!function(a,b){_MGUtil2["default"].browserCheck.msie&&parseInt(_MGUtil2["default"].browserCheck.version)<=11||document.documentMode&&document.documentMode<9?module.exports={}:module.exports=b(a,!0)}(window,function(a,b){function c(b,c,d){a.WeixinJSBridge?WeixinJSBridge.invoke(b,e(c),function(a){h(b,a,d)}):k(b,d)}function d(b,c,d){a.WeixinJSBridge?WeixinJSBridge.on(b,function(a){d&&d.trigger&&d.trigger(a),h(b,a,c)}):d?k(b,d):k(b,c)}function e(a){return a=a||{},a.appId=D.appId,a.verifyAppId=D.appId,a.verifySignType="sha1",a.verifyTimestamp=D.timestamp+"",a.verifyNonceStr=D.nonceStr,a.verifySignature=D.signature,a}function f(a){return{timeStamp:a.timestamp+"",nonceStr:a.nonceStr,"package":a["package"],paySign:a.paySign,signType:a.signType||"SHA1"}}function g(a){return a.postalCode=a.addressPostalCode,delete a.addressPostalCode,a.provinceName=a.proviceFirstStageName,delete a.proviceFirstStageName,a.cityName=a.addressCitySecondStageName,delete a.addressCitySecondStageName,a.countryName=a.addressCountiesThirdStageName,delete a.addressCountiesThirdStageName,a.detailInfo=a.addressDetailInfo,delete a.addressDetailInfo,a}function h(a,b,c){"openEnterpriseChat"==a&&(b.errCode=b.err_code),delete b.err_code,delete b.err_desc,delete b.err_detail;var d=b.errMsg;d||(d=b.err_msg,delete b.err_msg,d=i(a,d),b.errMsg=d),c=c||{},c._complete&&(c._complete(b),delete c._complete),d=b.errMsg||"",D.debug&&!c.isInnerInvoke&&alert(JSON.stringify(b));var e=d.indexOf(":"),f=d.substring(e+1);switch(f){case"ok":c.success&&c.success(b);break;case"cancel":c.cancel&&c.cancel(b);break;default:c.fail&&c.fail(b)}c.complete&&c.complete(b)}function i(a,b){var c=a,d=q[c];d&&(c=d);var e="ok";if(b){var f=b.indexOf(":");e=b.substring(f+1),"confirm"==e&&(e="ok"),"failed"==e&&(e="fail"),-1!=e.indexOf("failed_")&&(e=e.substring(7)),-1!=e.indexOf("fail_")&&(e=e.substring(5)),e=e.replace(/_/g," "),e=e.toLowerCase(),("access denied"==e||"no permission to execute"==e)&&(e="permission denied"),"config"==c&&"function not exist"==e&&(e="ok"),""==e&&(e="fail")}return b=c+":"+e}function j(a){if(a){for(var b=0,c=a.length;c>b;++b){var d=a[b],e=p[d];e&&(a[b]=e)}return a}}function k(a,b){if(!(!D.debug||b&&b.isInnerInvoke)){var c=q[a];c&&(a=c),b&&b._complete&&delete b._complete,console.log('"'+a+'",',b||"")}}function l(a){if(!(v||w||D.debug||"6.0.2">A||C.systemType<0)){var b=new Image;C.appId=D.appId,C.initTime=B.initEndTime-B.initStartTime,C.preVerifyTime=B.preVerifyEndTime-B.preVerifyStartTime,I.getNetworkType({isInnerInvoke:!0,success:function(a){C.networkType=a.networkType;var c="https://open.weixin.qq.com/sdk/report?v="+C.version+"&o="+C.isPreVerifyOk+"&s="+C.systemType+"&c="+C.clientVersion+"&a="+C.appId+"&n="+C.networkType+"&i="+C.initTime+"&p="+C.preVerifyTime+"&u="+C.url;b.src=c}})}}function m(){return(new Date).getTime()}function n(b){x&&(a.WeixinJSBridge?b():r.addEventListener&&r.addEventListener("WeixinJSBridgeReady",b,!1))}function o(){I.invoke||(I.invoke=function(b,c,d){a.WeixinJSBridge&&WeixinJSBridge.invoke(b,e(c),d)},I.on=function(b,c){a.WeixinJSBridge&&WeixinJSBridge.on(b,c)})}if(!a.jWeixin){var _I,p={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},q=function(){var a={};for(var b in p)a[p[b]]=b;return a}(),r=a.document,s=r.title,t=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase(),v=!(!u.match("mac")&&!u.match("win")),w=-1!=t.indexOf("wxdebugger"),x=-1!=t.indexOf("micromessenger"),y=-1!=t.indexOf("android"),z=-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad"),A=function(){var a=t.match(/micromessenger\/(\d+\.\d+\.\d+)/)||t.match(/micromessenger\/(\d+\.\d+)/);return a?a[1]:""}(),B={initStartTime:m(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},C={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:z?1:y?2:-1,clientVersion:A,url:encodeURIComponent(location.href)},D={},E={_completes:[]},F={state:0,data:{}};n(function(){B.initEndTime=m()});var G=!1,H=[],I=(_I={config:function(a){D=a,k("config",a);var b=D.check!==!1;n(function(){if(b)c(p.config,{verifyJsApiList:j(D.jsApiList)},function(){E._complete=function(a){B.preVerifyEndTime=m(),F.state=1,F.data=a},E.success=function(a){C.isPreVerifyOk=0},E.fail=function(a){E._fail?E._fail(a):F.state=-1};var a=E._completes;return a.push(function(){l()}),E.complete=function(b){for(var c=0,d=a.length;d>c;++c)a[c]();E._completes=[]},E}()),B.preVerifyStartTime=m();else{F.state=1;for(var a=E._completes,d=0,e=a.length;e>d;++d)a[d]();E._completes=[]}}),D.beta&&o()},ready:function(a){0!=F.state?a():(E._completes.push(a),!x&&D.debug&&a())},error:function(a){"6.0.2">A||(-1==F.state?a(F.data):E._fail=a)},checkJsApi:function(a){var b=function b(a){var b=a.checkResult;for(var c in b){var d=q[c];d&&(b[d]=b[c],delete b[c])}return a};c("checkJsApi",{jsApiList:j(a.jsApiList)},function(){return a._complete=function(a){if(y){var c=a.checkResult;c&&(a.checkResult=JSON.parse(c))}a=b(a)},a}())},onMenuShareTimeline:function(a){d(p.onMenuShareTimeline,{complete:function(){c("shareTimeline",{title:a.title||s,desc:a.title||s,img_url:a.imgUrl||"",link:a.link||location.href,type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareAppMessage:function(a){d(p.onMenuShareAppMessage,{complete:function(){c("sendAppMessage",{title:a.title||s,desc:a.desc||"",link:a.link||location.href,img_url:a.imgUrl||"",type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareQQ:function(a){d(p.onMenuShareQQ,{complete:function(){c("shareQQ",{title:a.title||s,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareWeibo:function(a){d(p.onMenuShareWeibo,{complete:function(){c("shareWeiboApp",{title:a.title||s,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareQZone:function(a){d(p.onMenuShareQZone,{complete:function(){c("shareQZone",{title:a.title||s,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},startRecord:function(a){c("startRecord",{},a)},stopRecord:function(a){c("stopRecord",{},a)},onVoiceRecordEnd:function(a){d("onVoiceRecordEnd",a)},playVoice:function(a){c("playVoice",{localId:a.localId},a)},pauseVoice:function(a){c("pauseVoice",{localId:a.localId},a)},stopVoice:function(a){c("stopVoice",{localId:a.localId},a)},onVoicePlayEnd:function(a){d("onVoicePlayEnd",a)},uploadVoice:function(a){c("uploadVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadVoice:function(a){c("downloadVoice",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},translateVoice:function(a){c("translateVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},chooseImage:function(a){c("chooseImage",{scene:"1|2",count:a.count||9,sizeType:a.sizeType||["original","compressed"],sourceType:a.sourceType||["album","camera"]},function(){return a._complete=function(a){if(y){var b=a.localIds;b&&(a.localIds=JSON.parse(b))}},a}())},getLocation:function(a){},previewImage:function(a){c(p.previewImage,{current:a.current,urls:a.urls},a)},uploadImage:function(a){c("uploadImage",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadImage:function(a){c("downloadImage",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},getLocalImgData:function(a){G===!1?(G=!0,c("getLocalImgData",{localId:a.localId},function(){return a._complete=function(a){if(G=!1,H.length>0){var b=H.shift();wx.getLocalImgData(b)}},a}())):H.push(a)},getNetworkType:function(a){var b=function b(a){var b=a.errMsg;a.errMsg="getNetworkType:ok";var c=a.subtype;if(delete a.subtype,c)a.networkType=c;else{var d=b.indexOf(":"),e=b.substring(d+1);switch(e){case"wifi":case"edge":case"wwan":a.networkType=e;break;default:a.errMsg="getNetworkType:fail"}}return a};c("getNetworkType",{},function(){return a._complete=function(a){a=b(a)},a}())},openLocation:function(a){c("openLocation",{latitude:a.latitude,longitude:a.longitude,name:a.name||"",address:a.address||"",scale:a.scale||28,infoUrl:a.infoUrl||""},a)}},_defineProperty(_I,"getLocation",function(a){a=a||{},c(p.getLocation,{type:a.type||"wgs84"},function(){return a._complete=function(a){delete a.type},a}())}),_defineProperty(_I,"hideOptionMenu",function(a){c("hideOptionMenu",{},a)}),_defineProperty(_I,"showOptionMenu",function(a){c("showOptionMenu",{},a)}),_defineProperty(_I,"closeWindow",function(a){a=a||{},c("closeWindow",{},a)}),_defineProperty(_I,"hideMenuItems",function(a){c("hideMenuItems",{menuList:a.menuList},a)}),_defineProperty(_I,"showMenuItems",function(a){c("showMenuItems",{menuList:a.menuList},a)}),_defineProperty(_I,"hideAllNonBaseMenuItem",function(a){c("hideAllNonBaseMenuItem",{},a)}),_defineProperty(_I,"showAllNonBaseMenuItem",function(a){c("showAllNonBaseMenuItem",{},a)}),_defineProperty(_I,"scanQRCode",function(a){a=a||{},c("scanQRCode",{needResult:a.needResult||0,scanType:a.scanType||["qrCode","barCode"]},function(){return a._complete=function(a){if(z){var b=a.resultStr;if(b){var c=JSON.parse(b);a.resultStr=c&&c.scan_code&&c.scan_code.scan_result}}},a}())}),_defineProperty(_I,"openAddress",function(a){c(p.openAddress,{},function(){return a._complete=function(a){a=g(a)},a}())}),_defineProperty(_I,"openProductSpecificView",function(a){c(p.openProductSpecificView,{pid:a.productId,view_type:a.viewType||0,ext_info:a.extInfo},a)}),_defineProperty(_I,"addCard",function(a){for(var b=a.cardList,d=[],e=0,f=b.length;f>e;++e){var g=b[e],h={card_id:g.cardId,card_ext:g.cardExt};d.push(h)}c(p.addCard,{card_list:d},function(){return a._complete=function(a){var b=a.card_list;if(b){b=JSON.parse(b);for(var c=0,d=b.length;d>c;++c){var e=b[c];e.cardId=e.card_id,e.cardExt=e.card_ext,e.isSuccess=!!e.is_succ,delete e.card_id,delete e.card_ext,delete e.is_succ}a.cardList=b,delete a.card_list}},a}())}),_defineProperty(_I,"chooseCard",function(a){c("chooseCard",{app_id:D.appId,location_id:a.shopId||"",sign_type:a.signType||"SHA1",card_id:a.cardId||"",card_type:a.cardType||"",card_sign:a.cardSign,time_stamp:a.timestamp+"",nonce_str:a.nonceStr},function(){return a._complete=function(a){a.cardList=a.choose_card_info,delete a.choose_card_info},a}())}),_defineProperty(_I,"openCard",function(a){for(var b=a.cardList,d=[],e=0,f=b.length;f>e;++e){var g=b[e],h={card_id:g.cardId,code:g.code};d.push(h)}c(p.openCard,{card_list:d},a)}),_defineProperty(_I,"consumeAndShareCard",function(a){c(p.consumeAndShareCard,{consumedCardId:a.cardId,consumedCode:a.code},a)}),_defineProperty(_I,"chooseWXPay",function(a){c(p.chooseWXPay,f(a),a)}),_defineProperty(_I,"openEnterpriseRedPacket",function(a){c(p.openEnterpriseRedPacket,f(a),a)}),_defineProperty(_I,"startSearchBeacons",function(a){c(p.startSearchBeacons,{ticket:a.ticket},a)}),_defineProperty(_I,"stopSearchBeacons",function(a){c(p.stopSearchBeacons,{},a)}),_defineProperty(_I,"onSearchBeacons",function(a){d(p.onSearchBeacons,a)}),_defineProperty(_I,"openEnterpriseChat",function(a){c("openEnterpriseChat",{useridlist:a.userIds,chatname:a.groupName},a)}),_I),J=1,K={};return r.addEventListener("error",function(a){if(!y){var b=a.target,c=b.tagName,d=b.src;if("IMG"==c||"VIDEO"==c||"AUDIO"==c||"SOURCE"==c){var e=-1!=d.indexOf("wxlocalresource://");if(e){a.preventDefault(),a.stopPropagation();var f=b["wx-id"];if(f||(f=J++,b["wx-id"]=f),K[f])return;K[f]=!0,wx.ready(function(){wx.getLocalImgData({localId:d,success:function(a){b.src=a.localData}})})}}}},!0),r.addEventListener("load",function(a){if(!y){var b=a.target,c=b.tagName;if(b.src,"IMG"==c||"VIDEO"==c||"AUDIO"==c||"SOURCE"==c){var d=b["wx-id"];d&&(K[d]=!1)}}},!0),b&&(a.wx=a.jWeixin=I),I}})},function(module,exports,__webpack_require__){(function($){__webpack_require__(2),__webpack_require__(4),__webpack_require__(5),__webpack_require__(22);var loader=__webpack_require__(137),STATIC=__webpack_require__(6);window.rootPath=function(relativePath){return relativePath?relativePath.match(/^http/)||relativePath.match(/^\/\//)||relativePath.match(/^data\:/)?relativePath:(relativePath=relativePath.replace(/^(\.)*\//,""),"cn"===window._SLD&&relativePath.match(/^images\//)&&!relativePath.match(/^images\/formTemplate\//)?location.protocol+STATIC.CDN_PATH_WITHOUT_PROTOCOL+relativePath:"./"+relativePath):null},__webpack_require__(138);var main=__webpack_require__(149)(__webpack_require__(134)),dmwCheck=main.dmwCheck,isMobile=main.isMobile,link="form/css/form.css";isMobile&&(link="form/css/formMobile.css");var _initMain=!1;loader.loadCSS(link+"?v="+(window._VER||""),function(){$(function(){_initMain||(_initMain=!0,main.init())})}),module.exports={isMobile:isMobile,dmwCheck:dmwCheck,__PRI_MK_GET_DT:main.__PRI_MK_GET_DT}}).call(exports,__webpack_require__(22));
},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _loadCSS(href){function ready(cb){return doc.body?cb():void setTimeout(function(){ready(cb)})}function loadCB(){ss.addEventListener&&ss.removeEventListener("load",loadCB),callback&&callback(),ss.media=media||"all"}var media=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",callback=arguments[2],doc=window.document,ss=doc.createElement("link"),refs=doc.getElementsByTagName("head")[0].childNodes,ref=refs[refs.length-1],sheets=doc.styleSheets;ss.rel="stylesheet",ss.type="text/css",ss.href=href,ss.media="only x",ready(function(){ref.parentNode.insertBefore(ss,ref.nextSibling)});var onloadcssdefined=function onloadcssdefined(cb){for(var resolvedHref=ss.href,i=sheets.length;i--;)if(sheets[i].href===resolvedHref)return cb();setTimeout(function(){onloadcssdefined(cb)})};return ss.addEventListener&&ss.addEventListener("load",loadCB),ss.onloadcssdefined=onloadcssdefined,onloadcssdefined(loadCB),ss}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery);exports["default"]={loadCSS:function(url,callback){for(var cssList=[].concat(url),i=0,len=cssList.length;i<len;i++)_loadCSS(cssList[i],"all",callback)},loadJS:function(url,callback){for(var jsList=[].concat(url),i=0,len=jsList.length;i<len;i++)jsList[i]&&_jquery2["default"].getScript(jsList[i],callback)}},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _config=__webpack_require__(9),_config2=_interopRequireDefault(_config),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_extensions=__webpack_require__(40),_extensions2=_interopRequireDefault(_extensions),_header=__webpack_require__(139),_header2=_interopRequireDefault(_header),_body=__webpack_require__(140),_body2=_interopRequireDefault(_body),_submit=__webpack_require__(144),_submit2=_interopRequireDefault(_submit),_copyright=__webpack_require__(129),_copyright2=_interopRequireDefault(_copyright),_succeed=__webpack_require__(147),_succeed2=_interopRequireDefault(_succeed),_errorHandler=__webpack_require__(148),_errorHandler2=_interopRequireDefault(_errorHandler),_hugeErrorHandler=__webpack_require__(130),_hugeErrorHandler2=_interopRequireDefault(_hugeErrorHandler),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore);exports["default"]={currentLang:_config2["default"].currentLang,lang:_config2["default"].lang,changeFormLang:_config2["default"].changeFormLang,utils:_utils2["default"],formExtends:_extensions2["default"],header:_header2["default"],body:_body2["default"],submit:_submit2["default"],copyright:_copyright2["default"],Succeed:_succeed2["default"],ErrorHandler:_errorHandler2["default"],HugeErrorHandler:_hugeErrorHandler2["default"],formStore:_formStore2["default"]},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function DeferredQueue(){this._q=[],this.add=function(promiseItem,fnDone,fnFail){var _p=promiseItem;fnDone&&(_p=_p.done(fnDone)),fnFail&&(_p=_p.fail(fnFail)),this._q.push(_p)},this.allDone=function(){return _jquery2["default"].when.apply(_jquery2["default"],this._q)},this.clear=function(){this._q=[]}}function inject(injection){headerBackgroundSize=null,headerBackgroundStyle={},headerRenderType=null,init=!0,headerContentTopScale=1,headerLogoScale=1,isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode}function calculateFormSize(){var recalculateAll=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_MGDebugger2["default"].log("re-calculate ...>",recalculateAll);var _header=_utils2["default"].getHeader(),_isMobile=isMobile(),_logoHeight=_header.logoHeight,_logoWidth=_header.logoWidth,_MAX_WIDTH=formWidth/3;_logoWidth>=_MAX_WIDTH&&(_logoWidth=Math.round(_MAX_WIDTH),_logoHeight=Math.ceil(_MAX_WIDTH/_header.logoWidth*_logoHeight)),_header.logo&&_isMobile&&formWidth-_header.logoWidth<160&&(headerLogoScale=(formWidth-160)/_header.logoWidth,_logoHeight=Math.ceil(headerLogoScale*_header.logoHeight),_logoWidth=Math.ceil(headerLogoScale*_header.logoWidth));var _headerStyle=_utils2["default"].getStyle("headerStyle"),$header=$form.find(".header").css({height:"auto",minHeight:"auto"}),$logo=$form.find(".h_logo"),$headerLine=$header.find(".h_headline"),$description=$header.find(".h_description"),$headerTDWrapper=$header.find(".h_TDWrapper"),_headerLogoHeight=Math.floor((_logoHeight||0)*headerLogoScale)-(2===_header.logoDisplay?HEADER_PADDING:0),_headerLogoWidth=Math.floor((_logoWidth||0)*headerLogoScale)-(2===_header.logoDisplay?HEADER_PADDING_LR/2:0);3===_header.logoDisplay&&(_headerLogoHeight=Math.round(Math.floor((_logoHeight||0)*headerLogoScale/2)-HEADER_PADDING/2)),!_header.logoBorder||4!==_header.logoBorder&&5!==_header.logoBorder||(_headerLogoHeight+=4,_headerLogoWidth+=4),decorationQueue.allDone().then(function(){recalculateAll&&($form.width(formWidth),2===headerRenderType?$headerTDWrapper.width(formWidth-_headerLogoWidth-HEADER_PADDING_LR-10):3===headerRenderType&&$headerLine.width(formWidth-_headerLogoWidth-HEADER_PADDING_LR-10));var _headerHeight=$header.outerHeight(!0)-HEADER_PADDING,_headerTitleDescriptionWrapperHeight=$headerTDWrapper.height()||0,_headerLineHeight=$headerLine.outerHeight(!0),_headerDescriptionHeight=$description.height()+($description.length>0?10:0),_backgroundTrueHeight=0;switch(headerBackgroundSize&&(4!==_headerStyle.bgLayoutHorizontal?_backgroundTrueHeight=headerBackgroundSize.height:(_backgroundTrueHeight=Math.floor(headerBackgroundSize.height/headerBackgroundSize.width*formWidth),headerContentTopScale=_isMobile?formWidth/_utils2["default"].getFormWidth()*.85:formWidth/_utils2["default"].getFormWidth())),headerRenderType){case 2:$header.css({"min-height":Math.max(_headerLogoHeight,_headerTitleDescriptionWrapperHeight,_backgroundTrueHeight-HEADER_PADDING)}),3!==_header.logoDisplay&&(_headerLogoHeight>_headerTitleDescriptionWrapperHeight?$headerTDWrapper.css("margin-top",Math.floor((_headerLogoHeight-_headerTitleDescriptionWrapperHeight)/2)):1===_header.logoDisplay&&$logo.css("margin-top",Math.floor((_headerTitleDescriptionWrapperHeight-_headerLogoHeight)/2)));break;case 3:$header.css({"min-height":Math.max(Math.max(_headerLogoHeight,_headerLineHeight)+_headerDescriptionHeight,_backgroundTrueHeight-HEADER_PADDING)}),3!==_header.logoDisplay&&(_headerLogoHeight>_headerLineHeight?$headerLine.css("margin-top",Math.floor((_headerLogoHeight-_headerLineHeight)/2)):1===_header.logoDisplay&&$logo.css("margin-top",Math.floor((_headerLineHeight-_headerLogoHeight)/2)));break;case 1:default:$header.css({"min-height":Math.max(Math.min(_headerHeight,_headerLogoHeight+_headerLineHeight+_headerDescriptionHeight),_backgroundTrueHeight-HEADER_PADDING)})}if(_MGDebugger2["default"].log(_header),3===_header.logoDisplay&&($header.css("margin-top",Math.floor(_headerLogoHeight+HEADER_PADDING/2)),$logo.css("margin-top",-Math.floor(_headerLogoHeight+HEADER_PADDING))),2===_header.logoDisplay){var _logoStyle={"margin-top":-HEADER_PADDING/2},_logoPosition=_header.layoutStr.charAt(2);"L"===_logoPosition?_logoStyle["margin-left"]=-HEADER_PADDING_LR/2:"R"===_logoPosition&&(_logoStyle["margin-right"]=-HEADER_PADDING_LR/2),$logo.css(_logoStyle)}if(init&&(_MGDebugger2["default"].log("in>>>>"),_headerStyle&&_headerStyle.background&&$header.css(_lodash2["default"].assign({"background-image":"url("+_headerStyle.background+")","background-position":"center center","background-repeat":"no-repeat"},headerBackgroundStyle)),_headerStyle&&_headerStyle.headerContentOffsetY&&$header.find(".fb_headerInfo").css({paddingTop:Math.ceil((_headerStyle.headerContentOffsetY||0)*headerContentTopScale)+"px"}),_isMobile&&_headerStyle&&4===_headerStyle.bgLayoutHorizontal&&$header.outerHeight(!0)>_backgroundTrueHeight&&4!==_headerStyle.bgLayoutVertical&&9!==_headerStyle.bgLayoutVertical)){var position="center";if(_header.headline)switch(_header.layoutStr.charAt(0)){case"R":position="right";break;case"C":break;case"L":default:position="left"}else if(_header.description)switch(_header.layoutStr.charAt(1)){case"R":position="right";break;case"C":break;case"L":default:position="left"}$header.css({"background-position":"center "+position,"background-size":"auto "+$header.outerHeight(!0)+"px"})}_MGDebugger2["default"].log("finish set false"),init=!1})}function resizeBind(){$form.off("$$resize").on("$$resize",function(){formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth()),calculateFormSize(!0)})}function _headerContentRender(content,contentStyle){return(0,_jquery2["default"])(_react2["default"].renderToStaticMarkup(_react2["default"].createElement("div",null,textRender.render(content||"",contentStyle||null))))[0].innerHTML}function _contentHasValue(content){var _r=!1;return _lodash2["default"].isArray(content)?content.join("\n").length>0&&(_r=!0):content&&(_r=!0),_r}function _headerRenderA(header,data){return headerRenderType=1,_MGDebugger2["default"].log("headerRenderType",headerRenderType),(header.logo?'<div class="h_logo" style="'+data.style.logo+'"><img class="logo style'+(data.logoBorder||0)+'" style="'+data.style.logoImage+'" src="'+header.logo+'"></div>':"")+"\n\t\t"+(_contentHasValue(header.headline)?'<div class="h_headline" style="'+data.style.headline+'">'+_headerContentRender(header.headline,header.headline_style)+"</div>":"")+"\n\t\t"+(_contentHasValue(header.description)?'<div class="h_description" style="'+data.style.description+'">'+_headerContentRender(header.description,header.description_style)+"</div>":"")+'\n\t\t<div class="clearB"></div>'}function _headerRenderB(header,data){return headerRenderType=2,(header.logo?'<div class="h_logo" style="'+data.style.logo+'"><img class="logo style'+(data.logoBorder||0)+'" style="'+data.style.logoImage+'" src="'+header.logo+'"></div>':"")+'\n\t\t<div class="h_TDWrapper" style="'+data.style.wrapper+'">\n\t\t\t'+(_contentHasValue(header.headline)?'<div class="h_headline" style="'+data.style.headline+'">'+_headerContentRender(header.headline,header.headline_style)+"</div>":"")+"\n\t\t\t"+(_contentHasValue(header.description)?'<div class="h_description" style="'+data.style.description+'">'+_headerContentRender(header.description,header.description_style)+"</div>":"")+'\n\t\t</div><div class="clearB"></div>'}function _headerRenderC(header,data){return headerRenderType=3,'<div class="h_TLWrapper">\n\t\t\t'+(header.logo?'<div class="h_logo" style="'+data.style.logo+'"><img class="logo style'+(data.logoBorder||0)+'" style="'+data.style.logoImage+'" src="'+header.logo+'"></div>':"")+"\n\t\t\t"+(_contentHasValue(header.headline)?'<div class="h_headline" style="'+data.style.headline+'">'+_headerContentRender(header.headline,header.headline_style)+"</div>":"")+'\n\t\t\t<div class="clearB"></div>\n\t\t</div>\n\t\t'+(_contentHasValue(header.description)?'<div class="h_description" style="'+data.style.description+'">'+_headerContentRender(header.description,header.description_style)+"</div>":"")}function render($f){var _isMobile=isMobile(),SHARE_PADDING=0!==_utils2["default"].getSettings().isShowShare?100:20;FORM_WIDTH_PADDING=_isMobile?0:SHARE_PADDING,HEADER_PADDING=30,HEADER_PADDING_LR=_isMobile?20:40,init=!0,headerContentTopScale=1,headerLogoScale=1,$form=$f,$form.off("$$resize"),formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth()),$form.width(formWidth);var headerStyle=_utils2["default"].getStyle("headerStyle")||{},header=_utils2["default"].getHeader();if(header){var _header="",headerData={};if(headerData.style={},layoutStr=header.layoutStr){if(_isMobile&&"N"!==layoutStr.charAt(2)){var _layoutArr=layoutStr.split("");_layoutArr[2]="C",_layoutArr[3]="",header.logo&&(_layoutArr[0]="C"),layoutStr=_layoutArr.join("")}for(var _style2=headerData.style,_LAYOUT_KEY=["headline","description","logo","stayNewLine"],_currentField=null,i=0;i<4;i++)if(_currentField=_LAYOUT_KEY[i],"stayNewLine"===_currentField)headerData.newLine="Y"===layoutStr.charAt(i);else switch(layoutStr.charAt(i)){case"L":_style2[_currentField]="text-align:left;";break;case"R":_style2[_currentField]="text-align:right;";break;case"C":_style2[_currentField]="text-align:center;";break;case"N":default:_style2[_currentField]=""}}if(headerStyle&&headerStyle.background)if(decorationQueue.add(_tools2["default"].getImageSize(headerStyle.background,3===getMode()),function(size){4!==headerStyle.bgLayoutVertical&&(headerBackgroundSize=size)}),headerBackgroundStyle={},headerStyle.bgLayoutHorizontal!==headerStyle.bgLayoutVertical||3!==headerStyle.bgLayoutHorizontal&&4!==headerStyle.bgLayoutHorizontal){switch(headerStyle.bgLayoutHorizontal){case 3:headerBackgroundStyle["background-repeat"]="repeat-x";break;case 4:headerBackgroundStyle["background-size"]="100% auto";break;case 5:headerBackgroundStyle["background-position-x"]="left";break;case 7:headerBackgroundStyle["background-position-x"]="right";break;case 6:default:headerBackgroundStyle["background-position-x"]="center"}switch(headerStyle.bgLayoutVertical){case 3:headerBackgroundStyle["background-repeat"]="repeat-y";break;case 4:headerBackgroundStyle["background-size"]="auto 100%",headerBackgroundStyle["background-position"]="initial";break;case 8:headerBackgroundStyle["background-position-y"]="top";break;case 9:headerBackgroundStyle["background-position-y"]="bottom";break;case 6:default:headerBackgroundStyle["background-position-y"]="center"}}else 3===headerStyle.bgLayoutHorizontal&&(headerBackgroundStyle["background-repeat"]="repeat"),4===headerStyle.bgLayoutHorizontal&&(headerBackgroundStyle["background-size"]="cover");var _logoLayoutStr=layoutStr?layoutStr.charAt(2):null,pFixer=!0;!header.logo||null!=header.logoHeight&&null!=header.logoWidth||(pFixer=new Promise(function(resolve,reject){_tools2["default"].getImageSize(header.logo).done(function(res){if(header.logoHeight=res.height||0,header.logoWidth=res.width||0,header.logoWidth>1/3*formWidth){var _newLogoHeight=Math.ceil(header.logoHeight*Math.ceil(1/3*formWidth)/header.logoWidth);header.logoWidth=Math.ceil(1/3*formWidth),header.logoHeight=_newLogoHeight}resolve(!0)}).fail(function(){header.logoHeight=0,header.logoWidth=0,resolve(!0)})})),Promise.resolve(pFixer).then(function(){_MGDebugger2["default"].log("process...>");var _logoHeight=void 0,_logoWidth=void 0;if(header.logo&&("L"===_logoLayoutStr?headerData.style.logo+="float:left;":"R"===_logoLayoutStr?headerData.style.logo+="float:right;":"N"===_logoLayoutStr&&(headerData.style.logo+="float:left;"),_logoHeight=header.logoHeight,_logoWidth=header.logoWidth,_isMobile&&formWidth-header.logoWidth<160&&(headerLogoScale=(formWidth-160)/header.logoWidth,_logoHeight=Math.ceil(headerLogoScale*header.logoHeight),_logoWidth=Math.ceil(headerLogoScale*header.logoWidth)),(_isMobile||"C"===_logoLayoutStr)&&(headerData.style.headline+="margin-top:5px;"),headerData.style.logoImage="width:"+_logoWidth+"px;height:"+_logoHeight+"px;",headerData.logoBorder=header.logoBorder),headerData.style.headline+=headerStyle.headlineFontSize?"font-size:"+headerStyle.headlineFontSize+"px;":"",headerData.style.headline+=headerStyle.headlineColor?"color:"+headerStyle.headlineColor+";":"",headerData.style.headline+=0===headerStyle.headlineFontWeight?"font-weight:normal;":"",headerData.style.description+=headerStyle.subheadFontSize?"font-size:"+headerStyle.subheadFontSize+"px;":"",headerData.style.description+=headerStyle.subheadColor?"color:"+headerStyle.subheadColor+";":"",headerData.style.description+=headerStyle.subheadFontWeight?"font-weight:bold;":"",init=!0,header.logo&&"L"!==header.hasValue&&"C"!==_logoLayoutStr){if(header.logo){"L"!==_logoLayoutStr&&"R"!==_logoLayoutStr&&(_logoLayoutStr="L");var _wrapperStyle=("L"===_logoLayoutStr?"float:right;":"float:left;")+"width:"+(formWidth-(_logoWidth-(2===header.logoDisplay?HEADER_PADDING_LR/2:0)+(!header.logoBorder||4!==header.logoBorder&&5!==header.logoBorder?0:4))-HEADER_PADDING_LR-10)+"px;";headerData.newLine?(headerData.style.headline+=_wrapperStyle,_header=_headerRenderC(header,headerData)):(headerData.style.wrapper=_wrapperStyle,_header=_headerRenderB(header,headerData))}}else _header=_headerRenderA(header,headerData);var _headerStyle={};if(!_lodash2["default"].isEmpty(headerStyle)&&(headerStyle.bgColor||null!=headerStyle.bgOpacityValue&&1!==headerStyle.bgOpacityValue)&&(_headerStyle={backgroundColor:headerStyle.bgColor},1!==headerStyle.bgOpacityValue)){var newColor=new _MGColor.OColor(headerStyle.bgColor||"#669acc");newColor.set("a",Math.min(headerStyle.bgOpacityValue,1)),_headerStyle.backgroundColor=newColor.getRGBA(),_headerStyle.zoom=1,_utils2["default"].isIE8&&(_style.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",_style["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",_style.backgroundColor="transparent")}$form.find(".header").css(_headerStyle).html('<div class="fb_headerInfo" style="padding-top:'+(headerStyle.headerContentOffsetY||0)*headerContentTopScale+'px" tabindex="1">'+_header+"</div>"),calculateFormSize(),resizeBind()})}}Object.defineProperty(exports,"__esModule",{value:!0});var _utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_MGColor=__webpack_require__(50),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_MGDraftRawConvert=__webpack_require__(37),textRender=(0,_MGDraftRawConvert.crateTextRender)({entity:{}}),FORM_WIDTH_PADDING=100,HEADER_PADDING=30,HEADER_PADDING_LR=40,$form=void 0,init=!0,formWidth=void 0,layoutStr=void 0,headerBackgroundSize=null,headerBackgroundStyle={},headerRenderType=null,headerContentTopScale=1,headerLogoScale=1,isMobile=void 0,getCurrentWidth=void 0,getMode=void 0,decorationQueue=new DeferredQueue;exports["default"]={render:render,inject:inject},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function inject(injection){isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode,getContent=injection.getContent}function render($b){var SHARE_PADDING=0!==_utils2["default"].getSettings().isShowShare?100:20;FORM_WIDTH_PADDING=isMobile()?0:SHARE_PADDING,_reactDom2["default"].render(_react2["default"].createElement(Body,{isMobile:isMobile()}),$b[0])}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_CInput=__webpack_require__(54),_CInput2=_interopRequireDefault(_CInput),_CRadioCheckbox=__webpack_require__(58),_CRadioCheckbox2=_interopRequireDefault(_CRadioCheckbox),_CDropDown=__webpack_require__(60),_CDropDown2=_interopRequireDefault(_CDropDown),_CDropDown3=__webpack_require__(62),_CDropDown4=_interopRequireDefault(_CDropDown3),_CMultiLevelDropdown=__webpack_require__(63),_CMultiLevelDropdown2=_interopRequireDefault(_CMultiLevelDropdown),_CMultiLevelDropdown3=__webpack_require__(65),_CMultiLevelDropdown4=_interopRequireDefault(_CMultiLevelDropdown3),_CNumber=__webpack_require__(66),_CNumber2=_interopRequireDefault(_CNumber),_CDateTime=__webpack_require__(67),_CDateTime2=_interopRequireDefault(_CDateTime),_CDateTime3=__webpack_require__(72),_CDateTime4=_interopRequireDefault(_CDateTime3),_CAttachment=__webpack_require__(75),_CAttachment2=_interopRequireDefault(_CAttachment),_CRate=__webpack_require__(81),_CRate2=_interopRequireDefault(_CRate),_CTabular=__webpack_require__(83),_CTabular2=_interopRequireDefault(_CTabular),_CTabular3=__webpack_require__(84),_CTabular4=_interopRequireDefault(_CTabular3),_CRank=__webpack_require__(85),_CRank2=_interopRequireDefault(_CRank),_CRank3=__webpack_require__(97),_CRank4=_interopRequireDefault(_CRank3),_CCurrency=__webpack_require__(98),_CCurrency2=_interopRequireDefault(_CCurrency),_CCityLocation=__webpack_require__(99),_CCityLocation2=_interopRequireDefault(_CCityLocation),_CCityLocation3=__webpack_require__(101),_CCityLocation4=_interopRequireDefault(_CCityLocation3),_CAddress=__webpack_require__(102),_CAddress2=_interopRequireDefault(_CAddress),_CAddress3=__webpack_require__(103),_CAddress4=_interopRequireDefault(_CAddress3),_CCommodity=__webpack_require__(104),_CCommodity2=_interopRequireDefault(_CCommodity),_CButton=__webpack_require__(141),_CButton2=_interopRequireDefault(_CButton),_cart=__webpack_require__(109),_cart2=_interopRequireDefault(_cart),_CMap=__webpack_require__(110),_CMap2=_interopRequireDefault(_CMap),_CPictureRadioCheckbox=__webpack_require__(112),_CPictureRadioCheckbox2=_interopRequireDefault(_CPictureRadioCheckbox),_CPictureAttachment=__webpack_require__(80),_CPictureAttachment2=_interopRequireDefault(_CPictureAttachment),_CPictureStatic=__webpack_require__(113),_CPictureStatic2=_interopRequireDefault(_CPictureStatic),_CPictureCarousel=__webpack_require__(115),_CPictureCarousel2=_interopRequireDefault(_CPictureCarousel),_CStaticText=__webpack_require__(116),_CStaticText2=_interopRequireDefault(_CStaticText),_CSeparator=__webpack_require__(117),_CSeparator2=_interopRequireDefault(_CSeparator),_CAuthCode=__webpack_require__(118),_CAuthCode2=_interopRequireDefault(_CAuthCode),_CVideo=__webpack_require__(119),_CVideo2=_interopRequireDefault(_CVideo),_CName=__webpack_require__(121),_CName2=_interopRequireDefault(_CName),_CMobileVerification=__webpack_require__(122),_CMobileVerification2=_interopRequireDefault(_CMobileVerification),_CInputMulti=__webpack_require__(123),_CInputMulti2=_interopRequireDefault(_CInputMulti),_CWeChatMulti=__webpack_require__(124),_CWeChatMulti2=_interopRequireDefault(_CWeChatMulti),_CIMSNSGroup=__webpack_require__(125),_CIMSNSGroup2=_interopRequireDefault(_CIMSNSGroup),_CCfCurrency=__webpack_require__(126),_CCfCurrency2=_interopRequireDefault(_CCfCurrency),_CCfCnId=__webpack_require__(127),_CCfCnId2=_interopRequireDefault(_CCfCnId),_CCfCnVehiclePlate=__webpack_require__(128),_CCfCnVehiclePlate2=_interopRequireDefault(_CCfCnVehiclePlate),_PopPay=__webpack_require__(142),_PopPay2=_interopRequireDefault(_PopPay),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),isMobile=void 0,getCurrentWidth=void 0,getMode=void 0,getContent=void 0,FORM_WIDTH_PADDING=20,hasAuthCodeMobile=!1,Body=_react2["default"].createClass({displayName:"Body",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){_formStore2["default"].setDefaultFillingData(),this.Rank={};var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());return _lodash2["default"].assign({formWidth:formWidth,forceUpdateCount:0},_formStore2["default"].getState())},_postHeightChange:function(){var self=this;window.clearInterval(self.updateHeightLooper),1===getMode()&&_utils2["default"].canPostMessage()&&!function(){var count=5;self.updateHeightLooper=window.setInterval(function(){count--,count<=0&&window.clearInterval(self.updateHeightLooper);var currentHeight=getContent().$container.outerHeight(!0)+30;currentHeight!==self.containerHeight&&(self.containerHeight=currentHeight,_utils2["default"].postMessage({height:self.containerHeight}))},1e3)}()},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange),this._postHeightChange()},componentWillUpdate:function(){var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());formWidth!==this.state.formWidth&&this.setState({formWidth:formWidth})},componentDidUpdate:function(){var _this=this;this._postHeightChange();var _scrollToPosition=!1,_ariafocus=!1;1===getMode()&&this.state.valid&&!_lodash2["default"].isEmpty(this.state.valid)&&this.scrollToErrorElement?!function(){_this.aria&&(_ariafocus=!0);var valid=_this.state.valid;_lodash2["default"].forEach(_this.currentComponent,function(component){var _isValid=!1;if("squeezeBox"===component.type?_lodash2["default"].forEach(component.children,function(sqId){if(valid[sqId])return _isValid=sqId,!1}):valid[component.id]&&(_isValid=component.id),_isValid){var _ret3=function(){var $_validCp=(0,_jquery2["default"])(document.getElementById(_isValid)),_position=0;return $_validCp&&$_validCp.length>0&&(_position=Math.max($_validCp.offset().top+getContent().$submitForm.prop("scrollTop")-20,0),_ariafocus||(_ariafocus=!0,setTimeout(function(){$_validCp.find(".aria-content").eq(0).focus()},30))),_utils2["default"].getParentInfo([{t:"self",v:"rect",e:1,n:"rect"},{t:"scrollParent",v:"scrollTop",n:"scrollTop"}]).then(function(res){if(res&&res.innerState){var _iframePosition=_position+res.scrollTop+res.rect.top;_utils2["default"].getParentInfo([{t:"window",v:"scrollTo",e:[0,_iframePosition]}])}else getContent().$scrollContainer.animate({scrollTop:_position},300),_this.scrollToErrorElement=!1;_scrollToPosition=!0}),{v:!1}}();if("object"===("undefined"==typeof _ret3?"undefined":_typeof(_ret3)))return _ret3.v}})}():this.scrollToErrorElement=!1,this.scrollToTop&&(this.scrollToTop=!1,setTimeout(function(){getContent().$scrollContainer.scrollTop(0)},30)),this.ariaPage&&!_ariafocus&&(_ariafocus=!0,this.ariaPage=!1,setTimeout(function(){(0,_jquery2["default"])(document.getElementById(_this.currentComponent[0].id)).find(".aria-content").eq(0).focus()},30)),setTimeout(function(){getContent().$window.trigger("$$stickyUpdate"),_this.scrollToErrorElement=!1},0)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){if(this.scrollToTop=!1,"$$resize"===action.type){var _newState={},formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());this.state.formWidth!==formWidth&&(_newState.formWidth=formWidth),1!==getMode()&&(_newState.forceUpdateCount=((this.state.forceUpdateCount||0)+1)%100),_lodash2["default"].isEmpty(_newState)||this.setState(_newState)}else if("$$messenger"===action.type){var _newState2={};_newState2.forceUpdateCount=((this.state.forceUpdateCount||0)+1)%100,this.setState(_newState2)}else"cashierInfo"===action.type?1===getMode()&&_reactDom2["default"].render(_react2["default"].createElement(_PopPay2["default"],{isMobile:isMobile(),payment:this.state.payment}),document.getElementById("popwin")):["submitValid","duplicateDataError","page","MobileValidCodeError","MobileValidEmpty","commodityQuotaError","optionQuotaError"].indexOf(action.type)>-1&&(this.scrollToErrorElement=!0,this.aria=action.aria);"page"===action.type?(this.scrollToTop=!0,this.ariaPage=!!action.aria):this.ariaPage=!1,this.setState(_formStore2["default"].getState())},renderComponent:function(id,settings,style,componentStyle){var extProps=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},fillInfo=this.state.data,valid=this.state.valid,width=this.state.formWidth,componentData=_utils2["default"].getComponents(id);if(!componentData)return _MGDebugger2["default"].log("JUMP...ERROR COMPONENT",id),null;var fillData=fillInfo[id],validData=valid?valid[id]:null,_isMobile=isMobile(),_props=_lodash2["default"].assign({key:"c"+id,data:componentData,fill:fillData,type:componentData.type,valid:validData,style:style,isMobile:_isMobile,mode:getMode(),componentStyle:componentStyle,forceUpdateCount:this.state.forceUpdateCount,fw:width},extProps);"commodity"===componentData.type&&(_props.cartValid=valid.cart);var TempRank=null;1===settings.showQuestionNo&&(_utils2["default"].isFillingComponent(componentData.type)||componentData.isCustomField)&&(this._num++,_props.num=this._num,_props.showQuestionNo=!0,_props.questionNoType=settings.questionNoType||1);var _c=null;if(componentData.isCustomField)switch(componentData.type){case 1:_c=_react2["default"].createElement(_CInput2["default"],_props);break;case 3:_c=_react2["default"].createElement(_CNumber2["default"],_props);break;case 4:_c=_react2["default"].createElement(_CRate2["default"],_props);break;case 5:_c=_react2["default"].createElement(_CCfCurrency2["default"],_props);break;case 6:_c=2!==componentData.cfRadioType?_react2["default"].createElement(_CRadioCheckbox2["default"],_props):_isMobile?_react2["default"].createElement(_CDropDown4["default"],_props):_react2["default"].createElement(_CDropDown2["default"],_props);break;case 7:_c=_react2["default"].createElement(_CRadioCheckbox2["default"],_props);break;case 8:_c=_isMobile?_react2["default"].createElement(_CMultiLevelDropdown4["default"],_props):_react2["default"].createElement(_CMultiLevelDropdown2["default"],_props);break;case 9:_c=_isMobile?_react2["default"].createElement(_CDateTime4["default"],_props):_react2["default"].createElement(_CDateTime2["default"],_props);break;case 11:_c=_react2["default"].createElement(_CCfCnId2["default"],_props);break;case 12:_c=_react2["default"].createElement(_CCfCnVehiclePlate2["default"],_props);break;default:console.error("ERROR UNKNOW CTCF_COMPONENT",id,JSON.stringify(componentData))}else switch(componentData.type){case"input":_c=_react2["default"].createElement(_CInput2["default"],_props);break;case"checkbox":case"radio":_c=_react2["default"].createElement(_CRadioCheckbox2["default"],_props);break;case"dropDown":_c=_isMobile?_react2["default"].createElement(_CDropDown4["default"],_props):_react2["default"].createElement(_CDropDown2["default"],_props);break;case"multiLevel":_c=_isMobile?_react2["default"].createElement(_CMultiLevelDropdown4["default"],_props):_react2["default"].createElement(_CMultiLevelDropdown2["default"],_props);break;case"number":_c=_react2["default"].createElement(_CNumber2["default"],_props);break;case"dateTime_both":case"dateTime_date":case"dateTime_time":_c=_isMobile?_react2["default"].createElement(_CDateTime4["default"],_props):_react2["default"].createElement(_CDateTime2["default"],_props);break;case"birthDate":_c=_isMobile?_react2["default"].createElement(_CDateTime4["default"],_extends({},_props,{isBirthDate:!0})):_react2["default"].createElement(_CDateTime2["default"],_extends({},_props,{isBirthDate:!0}));break;case"attachment":_c=_react2["default"].createElement(_CAttachment2["default"],_props);break;case"rate":_c=_react2["default"].createElement(_CRate2["default"],_props);break;case"tabular":_c=_isMobile?_react2["default"].createElement(_CTabular4["default"],_props):_react2["default"].createElement(_CTabular2["default"],_props);
break;case"rank":_isMobile?_c=_react2["default"].createElement(_CRank4["default"],_props):(this.Rank[id]||(this.Rank[id]=(0,_CRank2["default"])()),TempRank=this.Rank[id],_c=_react2["default"].createElement(TempRank,_props));break;case"currency":_c=_react2["default"].createElement(_CCurrency2["default"],_props);break;case"city":case"location":_c=_isMobile?_react2["default"].createElement(_CCityLocation4["default"],_props):_react2["default"].createElement(_CCityLocation2["default"],_props);break;case"address":_c=_isMobile?_react2["default"].createElement(_CAddress4["default"],_props):_react2["default"].createElement(_CAddress2["default"],_props);break;case"commodity":_c=_react2["default"].createElement(_CCommodity2["default"],_props);break;case"button":_c=_react2["default"].createElement(_CButton2["default"],_extends({},_props,{onGetContent:getContent}));break;case"picRadio":case"picCheckbox":_c=_react2["default"].createElement(_CPictureRadioCheckbox2["default"],_props);break;case"picAttachment":_c=_react2["default"].createElement(_CPictureAttachment2["default"],_props);break;case"staticPic":_c=_react2["default"].createElement(_CPictureStatic2["default"],_props);break;case"picCarousel":_c=_react2["default"].createElement(_CPictureCarousel2["default"],_props);break;case"staticText":_c=_react2["default"].createElement(_CStaticText2["default"],_props);break;case"separator":_c=_react2["default"].createElement(_CSeparator2["default"],_props);break;case"authCode":_c=_react2["default"].createElement(_CAuthCode2["default"],_props);break;case"staticVideo":_c=_react2["default"].createElement(_CVideo2["default"],_props);break;case"staticMap":_c=_react2["default"].createElement(_CMap2["default"],_props);break;case"name":_c=_react2["default"].createElement(_CName2["default"],_props);break;case"avatar":_c=_react2["default"].createElement(_CPictureAttachment2["default"],_extends({},_props,{isAcceptMultipleFile:!0}));break;case"gender":case"title":_c=2===+componentData.componentType?_isMobile?_react2["default"].createElement(_CDropDown4["default"],_props):_react2["default"].createElement(_CDropDown2["default"],_props):_react2["default"].createElement(_CRadioCheckbox2["default"],_props);break;case"company":case"department":case"position":_c=2===+componentData.searchComponentType?_react2["default"].createElement(_CRadioCheckbox2["default"],_props):3===+componentData.searchComponentType?_isMobile?_react2["default"].createElement(_CDropDown4["default"],_props):_react2["default"].createElement(_CDropDown2["default"],_props):_react2["default"].createElement(_CInput2["default"],_props);break;case"IM":case"SNS":_c=_react2["default"].createElement(_CIMSNSGroup2["default"],_props);break;case"mobile":!_props.data.isSendMsgAuth||hasAuthCodeMobile&&hasAuthCodeMobile!==id?_c=_react2["default"].createElement(_CInputMulti2["default"],_props):(hasAuthCodeMobile=id,_c=_react2["default"].createElement(_CMobileVerification2["default"],_props));break;case"wechat":_c=window.IN_WECHAT?_react2["default"].createElement(_CWeChatMulti2["default"],_props):_react2["default"].createElement(_CInputMulti2["default"],_props);break;case"email":case"website":case"tel":case"fax":case"qq":case"skype":case"whatsApp":case"messenger":case"viber":case"line":case"telegram":case"weibo":case"linkedIn":case"twitter":case"facebook":case"instagram":case"mkGooglePlus":_c=_react2["default"].createElement(_CInputMulti2["default"],_props);break;case"paging":_c=null;break;default:console.error("ERROR UNKNOW COMPONENT",id,JSON.stringify(componentData))}return _c},renderComponents:function(){var _this2=this,_componentsList=[],currentComponent=_utils2["default"].getPage(this.state.page)||[];if(!currentComponent)return null;this.currentComponent=currentComponent;var _shownItemsInfo=[];this._num=_utils2["default"].getPageStartOffset(this.state.page);var settings=_utils2["default"].getSettings(),style=_utils2["default"].getStyle();return _lodash2["default"].forEach(currentComponent,function(data){"normal"===data.type?(_shownItemsInfo.push(data.id),_componentsList.push(_this2.renderComponent(data.id,settings,style))):"squeezeBox"===data.type&&!function(){var _key="sq"+data.children.join(""),unitWidth=Math.floor(1e3/data.layout.reduce(function(a,b){return a+b}))/10,len=data.children.length,_forceSqueeze=!!isMobile()&&_lodash2["default"].reduce(data.children,function(res,sqId){var componentData=_utils2["default"].getComponents(sqId);return componentData?res&&"button"===componentData.type:res&&!1},!0),content=_lodash2["default"].map(data.children,function(sqId,idx){return _shownItemsInfo.push(sqId),_this2.renderComponent(sqId,settings,style,{width:data.layout[idx]*unitWidth+"% "+(_forceSqueeze?"!important":"")},{itemNum:len,forceSqueeze:_forceSqueeze})});_componentsList.push(_react2["default"].createElement("div",{className:"clearB",key:"sqbf"+_key})),_componentsList.push(_react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_group",{fb_forceSqueeze:_forceSqueeze}),key:_key},content,_react2["default"].createElement("div",{className:"clearB"})))}()}),_utils.isOldIE&&(0,_utils.hasAttachmentComponent)()&&_lodash2["default"].forEach(_utils2["default"].getLayout(),function(data){if("normal"===data.type){if(_shownItemsInfo.indexOf(data.id)>-1)return!0;_componentsList.push(_this2.renderComponent(data.id,settings,style,{display:"none"}))}else if("squeezeBox"===data.type){var _ret5=function(){var _key="sq"+data.children.join(""),unitWidth=Math.floor(1e3/data.layout.reduce(function(a,b){return a+b}))/10,len=data.children.length,content=[];return _lodash2["default"].forEach(data.children,function(sqId,idx){return _shownItemsInfo.indexOf(sqId)>-1||void content.push(_this2.renderComponent(sqId,settings,style,{width:data.layout[idx]*unitWidth+"%",display:"none"},{itemNum:len}))}),content.length>0?(_componentsList.push(_react2["default"].createElement("div",{className:"clearB",key:"sqbf"+_key})),void _componentsList.push(_react2["default"].createElement("div",{className:"fb_group",key:_key},content,_react2["default"].createElement("div",{className:"clearB"})))):{v:!0}}();if("object"===("undefined"==typeof _ret5?"undefined":_typeof(_ret5)))return _ret5.v}}),_componentsList},render:function(){var valid=this.state.valid;return _react2["default"].createElement("div",null,_react2["default"].createElement("div",{className:"fb_componentWrapper"},this.renderComponents(),_react2["default"].createElement("div",{className:"clearB",key:"clearB"})),_react2["default"].createElement(_cart2["default"],{key:"cart",forceUpdateCount:this.state.forceUpdateCount,valid:valid.cart}))}});exports["default"]={inject:inject,render:render},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(55),_mixins2=_interopRequireDefault(_mixins),_tools=__webpack_require__(33),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_formMetaUtil=__webpack_require__(57),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),ElemButton=_react2["default"].createClass({displayName:"ElemButton",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return this.hasPage=_utils2["default"].hasPage(),this.pageNum=_utils2["default"].getPageNum(),{forceUpdateCount:0,page:_formStore2["default"].getState().page}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe&&this.unsubscribe()},handleStateChange:function(action){if([7,8].indexOf(+this.props.data.btnAction)!==-1){var newState={};_utils2["default"].hasPage()===this.hasPage&&_utils2["default"].getPageNum()===this.pageNum||(this.hasPage=_utils2["default"].hasPage(),this.pageNum=_utils2["default"].getPageNum(),newState.forceUpdateCount=(this.state.forceUpdateCount+1)%100),"page"===action.type?newState.page=_formStore2["default"].getState().page:"$$resize"===action.type&&(newState.forceUpdateCount=this.state.forceUpdateCount+1),_lodash2["default"].isEmpty(newState)||this.setState(newState)}},handleChangePage:function(page){page<0?page=0:page>this.props.pageNum-1&&(page=this.props.pageNum-1),_formStore2["default"].dispatch({type:"page",data:page})},handleBtnClick:function(e){e.preventDefault(),e.stopPropagation();var _props=this.props,isMobile=_props.isMobile,data=_props.data,onGetContent=_props.onGetContent,btnAction=data.btnAction;switch(void 0===btnAction&&(btnAction=2),+btnAction){case 1:onGetContent().$form.trigger("form-submit");break;case 2:data.btnJumpTo&&window.open((0,_tools.linkify)(data.btnJumpTo));break;case 5:data.btnQqTo&&(isMobile?window.IN_WECHAT?window.open("https://wpa.qq.com/msgrd?v=3&uin="+data.btnQqTo+"&site=qq&menu=yes"):window.open("mqqwpa://im/chat?chat_type=wpa&uin="+data.btnQqTo+"&version=1&src_type=web&web_src=oicqzone.com"):location.href="tencent://message/?uin="+data.btnQqTo+"&Site=qq&Menu=yes");break;case 6:onGetContent().$scrollContainer.animate({scrollTop:0},300);break;case 7:this.hasPage&&this.handleChangePage(this.state.page-1);break;case 8:this.hasPage&&this.handleChangePage(this.state.page+1)}},render:function(){var data=this.props.data,_button=null,_btnStyle={height:data.btnHeight,lineHeight:(data.btnHeight?data.btnHeight:40)+"px",fontSize:data.btnFontSize,fontWeight:data.btnFontWeight?"bold":"normal",color:data.btnFontColor};2===data.btnWidthType?_btnStyle.width="100%":3===data.btnWidthType&&data.btnWidth?_btnStyle.width=data.btnWidth:[7,8].indexOf(data.btnStyle)===-1&&(_btnStyle.paddingLeft="30px",_btnStyle.paddingRight="30px"),[3,4].indexOf(data.btnStyle)===-1&&(_btnStyle.backgroundColor=data.btnColor),[3,4].indexOf(data.btnStyle)>-1&&(_btnStyle.borderColor=data.btnColor),[2,4,6,8,10,12].indexOf(data.btnStyle)>-1&&(_btnStyle.borderRadius=(data.btnHeight||40)/2+"px");var _btnContent=[];data.isShowBtnIcon&&data.btnIcon&&_btnContent.push(_react2["default"].createElement("i",{key:"icon",className:"iconfont fbc_cpbIcon",style:{fontSize:(data.btnFontSize||14)+1}},_lodash2["default"].find(_formMetaUtil.FORM_SETTINGS_BTN_ICON,{id:data.btnIcon}).icon)),!data.btnText&&"btnText"in data||_btnContent.push(_react2["default"].createElement("span",{key:"title",className:"fbc_cpbTitle"},"btnText"in data?data.btnText:_config.lang.cBtnDefault));var _btnProps={};switch(3===+data.btnAction?_btnProps.href="tel:"+data.btnTelTo:4===+data.btnAction?_btnProps.href="sms:"+data.btnSmsTo+(data.btnSmsContent?"?&body="+encodeURIComponent(data.btnSmsContent):""):9===+data.btnAction?_btnProps.href="mailTo:"+data.btnMailTo:_btnProps.onClick=this.handleBtnClick,data.btnStyle){case 7:case 8:_btnStyle.height=+(data.btnHeight||40)+5;var _bs7MaskStyle={},_bs7ContentStyle={backgroundColor:data.btnColor};data.btnWidthType&&1!==data.btnWidthType||(_bs7ContentStyle.paddingLeft="30px",_bs7ContentStyle.paddingRight="30px"),8===data.btnStyle&&(_bs7MaskStyle.borderRadius=(data.btnHeight||40)/2+"px",_bs7ContentStyle.borderRadius=(data.btnHeight||40)/2+"px"),_button=_react2["default"].createElement("a",_extends({className:(0,_classnames2["default"])("fbc_cpButton","fbc_cpButtonStyle"+(data.btnStyle||1)),style:_btnStyle},_btnProps),_react2["default"].createElement("i",{className:"fbc_cpBs7Mask",style:_bs7MaskStyle}),_react2["default"].createElement("span",{className:"fbc_cpBs7Content",style:_bs7ContentStyle},_btnContent));break;case 11:case 12:var _bs11BorStyle={};12===data.btnStyle&&(_bs11BorStyle.borderRadius=(data.btnHeight||40)/2+"px"),_button=_react2["default"].createElement("a",_extends({className:(0,_classnames2["default"])("fbc_cpButton","fbc_cpButtonStyle"+(data.btnStyle||1)),style:_btnStyle},_btnProps),_react2["default"].createElement("i",{className:"fbc_cpBs11Bor",style:_bs11BorStyle}),_btnContent);break;case 1:case 2:case 3:case 4:case 5:case 6:case 9:case 10:default:_button=_react2["default"].createElement("a",_extends({className:(0,_classnames2["default"])("fbc_cpButton","fbc_cpButtonStyle"+(data.btnStyle||1)),style:_btnStyle},_btnProps),_btnContent)}return _button}});exports["default"]=_react2["default"].createClass({displayName:"Component(Button)",mixins:[_reactAddonsPureRenderMixin2["default"],_mixins2["default"]],render:function(){var _props2=this.props,isMobile=_props2.isMobile,data=_props2.data,componentStyle=_props2.componentStyle,onGetContent=_props2.onGetContent;return _react2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component","fb_staticComponent",data.type),id:data.id,style:componentStyle},_react2["default"].createElement("div",{className:"fbc_cpButtonWrapper",style:{textAlign:["","left","center","right"][data.btnAlign]}},_react2["default"].createElement(ElemButton,{isMobile:isMobile,data:data,onGetContent:onGetContent})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_config=__webpack_require__(9),_FCPopwin=__webpack_require__(74),_FCPopwin2=_interopRequireDefault(_FCPopwin),_PopPayOnline=__webpack_require__(132),_PopPayOnline2=_interopRequireDefault(_PopPayOnline),_PopPayOffline=__webpack_require__(143),_PopPayOffline2=_interopRequireDefault(_PopPayOffline),_PopPaySucceed=__webpack_require__(133),_PopPaySucceed2=_interopRequireDefault(_PopPaySucceed),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"PopPay",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){var _this=this;return _utils2["default"].getParentInfo([{t:"self",v:"rect",e:1,n:"rect"}]).then(function(res){res&&res.innerState&&_this.setState({rectTop:res.rect.top})}),{payState:1}},handleClose:function(needShowSuccess){needShowSuccess&&window.setTimeout(function(){$(".main").trigger("paymentSucceed")},200),this.refs.popwin.doClose()},handleStateChange:function(_state){this.setState({payState:_state})},render:function(){var payState=this.state.payState,_title=" ",_content=_react2["default"].createElement(_PopPayOnline2["default"],{isMobile:_tools2["default"].fuzzyDeviceCheck,onClose:this.handleClose,payType:this.handleStateChange});return 1===payState?4===this.props.payment.type?(_title=_config.lang.cPayOfflineTitle,_content=_react2["default"].createElement(_PopPayOffline2["default"],{onClose:this.handleClose})):_title=_config.lang.cPayOnlineTitle:2===payState&&(_content=_react2["default"].createElement(_PopPaySucceed2["default"],{onClose:this.handleClose})),_react2["default"].createElement(_FCPopwin2["default"],{className:"pop_pay",ref:"popwin",boxStyle:{marginTop:this.state.rectTop?Math.max(60-this.state.rectTop,60):null},isCantClose:!0,title:_title},_content)}}),module.exports=exports["default"]}).call(exports,__webpack_require__(22))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_config=__webpack_require__(9),_MGMoment=__webpack_require__(34),_utils=(_interopRequireDefault(_MGMoment),__webpack_require__(30)),_utils2=_interopRequireDefault(_utils),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_MGIntl=__webpack_require__(12),_MGIntl2=_interopRequireDefault(_MGIntl),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"PopPayOnline",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){var _storeState=_formStore2["default"].getState();return{info:_storeState.payment,data:_storeState.data}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe(),clearInterval(this.getDmwProgress)},handleStateChange:function(){var _storeState=_formStore2["default"].getState();this.setState({info:_storeState.payment,data:_storeState.data})},handleClose:function(){this.props.onClose&&this.props.onClose(!0)},render:function(){var info=this.state.info,data=this.state.data,settings=_utils2["default"].getSettings(),symbol="￥";"0"==settings.cartSymbol?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var totalPrice=0,_cartInfo=_utils2["default"].processCart(data,function(data){return{price:data.price,num:data.num}});return _cartInfo.length>0&&(totalPrice=Math.round(_lodash2["default"].reduce(_cartInfo,function(pre,item){return pre+item.price*item.num},0))/100),_react2["default"].createElement("div",{className:"pay_offLine"},_react2["default"].createElement("p",{className:"pay_guide"},_react2["default"].createElement("i",{className:"iconfont pay_gIcon"},String.fromCharCode(58988)),_react2["default"].createElement("span",null,_config.lang.cPayOfflineGuide)),_react2["default"].createElement("div",{className:"pay_tradeInfo"},_react2["default"].createElement("p",{className:"pay_orderNo"},_react2["default"].createElement("span",null,_config.lang.cPayOrderNo),_react2["default"].createElement("span",{className:"orderNo"},info.ordiNo)),_react2["default"].createElement("p",{className:"pay_needPay"},_react2["default"].createElement("span",null,_config.lang.cPayNeedPay),_react2["default"].createElement("span",{className:"needPay"},symbol+" "+_MGIntl2["default"].localeNumberFormatter(totalPrice,2,2)))),_react2["default"].createElement("div",{className:"pay_operate"},_react2["default"].createElement("a",{className:"btn_normal btn_finish",onClick:this.handleClose},_config.lang.cPayKnowIt)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function inject(injection){isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode,getFormContent=injection.getContent}function render($s){isMobile&&getFormContent&&!function(){var $window=getFormContent().$window,$submit=getFormContent().$submit,$handleForm=getFormContent().$submitForm;$window.off("scroll.positionCalculate $$stickyUpdate"),$handleForm.removeClass("bottomFixed"),$submit.removeClass("submitWrapper_sticky submitWrapper_fixed");var tail=_utils2["default"].getTail();tail&&!tail.isHideBtn&&tail.stickyBottom&&(caniuse_sticky?$submit.addClass("submitWrapper_sticky"):!function(){var $header=$(".header"),$body=$(".body");$handleForm.addClass("bottomFixed"),$window.on("scroll.positionCalculate $$stickyUpdate",function(e){var submitHeight=$submit.height();$header.outerHeight()+$body.outerHeight(!0)-$window.scrollTop()-2>$window.height()?($submit.addClass("submitWrapper_fixed"),$body.css("paddingBottom",submitHeight)):($submit.removeClass("submitWrapper_fixed"),$body.css("paddingBottom",0))}),$window.trigger("$$stickyUpdate")}())}(),_reactDom2["default"].render(_react2["default"].createElement(SubmitWrapper,{isMobile:isMobile}),$s[0])}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_paging=__webpack_require__(145),_paging2=_interopRequireDefault(_paging),_Submit=__webpack_require__(146),_Submit2=_interopRequireDefault(_Submit),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),isMobile=void 0,getCurrentWidth=void 0,getMode=void 0,getFormContent=void 0,caniuse_sticky=function(){var vendorList=["","-webkit-","-ms-","-moz-","-o-"],vendorListLength=vendorList.length,stickyElement=document.createElement("div");if(stickyElement&&stickyElement.style)try{for(var i=0;i<vendorListLength;i++)if(stickyElement.style.position=vendorList[i]+"sticky",""!==stickyElement.style.position)return!0}catch(e){}return!1}(),SubmitWrapper=_react2["default"].createClass({displayName:"SubmitWrapper",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return this.hasPage=_utils2["default"].hasPage(),this.pageNum=_utils2["default"].getPageNum(),{forceUpdateCount:0,page:_formStore2["default"].getState().page}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange),this.tagTailFieldStatus()},componentDidUpdate:function(){var $window=getFormContent().$window;$window.trigger("$$stickyUpdate"),this.tagTailFieldStatus()},componentWillUnmount:function(){this.unsubscribe()},tagTailFieldStatus:function(){var $main=$(".main"),_c="is-emptyTail";$main.removeClass(_c);var _ref=_utils2["default"].getSettings()||{},isHidePageBtn=_ref.isHidePageBtn,isBanReturn=_ref.isBanReturn,_ref2=_utils2["default"].getTail()||{},isHideBtn=_ref2.isHideBtn;isHidePageBtn&&this.hasPage&&_utils2["default"].hasNextPage(this.state.page+1)?$main.addClass(_c):isHideBtn&&(!this.hasPage||this.hasPage&&!_utils2["default"].hasNextPage(this.state.page+1)&&(isHidePageBtn||isBanReturn))&&$main.addClass(_c)},handleStateChange:function(action){var newState={};_utils2["default"].hasPage()===this.hasPage&&_utils2["default"].getPageNum()===this.pageNum||(this.hasPage=_utils2["default"].hasPage(),this.pageNum=_utils2["default"].getPageNum(),newState.forceUpdateCount=(this.state.forceUpdateCount+1)%100),_formStore2["default"].getState().page!==this.state.page?newState.page=_formStore2["default"].getState().page:"$$resize"===action.type&&(newState.forceUpdateCount=this.state.forceUpdateCount+1),_lodash2["default"].isEmpty(newState)||this.setState(newState)},render:function(){var page=this.state.page,hasPages=_utils2["default"].hasPage();return _react2["default"].createElement("div",null,hasPages&&_utils2["default"].hasNextPage(page+1)?_react2["default"].createElement(_paging2["default"],{page:page,pageNum:_utils2["default"].getPageNum(),key:"paging",isMobile:isMobile(),forceUpdateCount:this.state.forceUpdateCount}):_react2["default"].createElement(_Submit2["default"],{page:page,pageNum:_utils2["default"].getPageNum(),key:"submit",isMobile:isMobile(),forceUpdateCount:this.state.forceUpdateCount}))}});exports["default"]={inject:inject,render:render},module.exports=exports["default"]}).call(exports,__webpack_require__(22))},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_MGColor=__webpack_require__(50),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Component(Paging)",mixins:[_reactAddonsPureRenderMixin2["default"]],componentDidMount:function(){$(".fbc_button").on("mousedown.stopPop",this.handleStopPop)},componentWillUnmount:function(){$(".fbc_button").off("mousedown.stopPop")},handleStopPop:function(e){e.stopPropagation(),e.preventDefault()},handleARIAChangePage:function(page,e){13!==e.keyCode&&32!==e.keyCode||this.handleChangePage(page,!0,e)},handleChangePage:function(page){var aria=arguments.length>1&&void 0!==arguments[1]&&arguments[1];page<0?page=0:page>this.props.pageNum-1&&(page=this.props.pageNum-1),_formStore2["default"].dispatch({type:"page",data:page,aria:aria})},render:function(){var settings=_utils2["default"].getSettings(),style=_utils2["default"].getStyle(),submitStyle=style.submitStyle||{},_props=this.props,isMobile=_props.isMobile,page=_props.page,pageNum=_props.pageNum,alignArray=["","left","center","right"],submitFieldStyle={textAlign:alignArray[submitStyle.btnAlign||2]};if(submitStyle.bgColor&&(submitFieldStyle.backgroundColor=submitStyle.bgColor),null!==submitStyle.bgOpacityValue&&void 0!==submitFieldStyle.bgOpacityValue&&submitStyle.bgOpacityValue<1){var newColor=new _MGColor.OColor(submitStyle.bgColor||"#ffffff");newColor.set("a",submitStyle.bgOpacityValue),submitFieldStyle.backgroundColor=newColor.getRGBA(),submitFieldStyle.zoom=1,_utils.isIE8&&(submitFieldStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",submitFieldStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",submitFieldStyle.backgroundColor="transparent")}if(submitStyle.background){submitFieldStyle.backgroundImage="url("+submitStyle.background+")",submitFieldStyle.backgroundPosition="center center",submitFieldStyle.backgroundRepeat="no-repeat";var bglH=submitStyle.bgLayoutHorizontal||6,bglV=submitStyle.bgLayoutVertical||6;switch(bglH){case 3:submitFieldStyle.backgroundRepeat="repeat-x";break;case 4:submitFieldStyle.backgroundSize="100% auto";break;case 5:submitFieldStyle.backgroundPositionX="left";break;case 7:submitFieldStyle.backgroundPositionX="right";break;case 6:default:submitFieldStyle.backgroundPositionX="center"}switch(bglV){case 3:submitFieldStyle.backgroundRepeat="repeat-y";break;case 4:submitFieldStyle.backgroundSize="auto 100%";break;case 8:submitFieldStyle.backgroundPositionY="top";break;case 9:submitFieldStyle.backgroundPositionY="bottom";break;case 6:default:submitFieldStyle.backgroundPositionY="center"}3===bglH&&3===bglV&&(submitFieldStyle.backgroundRepeat="repeat"),4===bglH&&4===bglV&&(submitFieldStyle.backgroundSize="cover")}var buttonStyle={width:1===+submitStyle.isFormWith||isMobile?"100%":"auto",height:Math.floor(2.2*(submitStyle.submitFontSize||14))+(isMobile?6:0),paddingTop:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingBottom:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingLeft:(submitStyle.submitFontSize||14)+6,paddingRight:(submitStyle.submitFontSize||14)+6,fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,background:submitStyle.btnColor},pageNumText=!1,isShowCurrentPageNum=settings.isShowCurrentPageNum,isShowAllPageNum=settings.isShowAllPageNum,isBanReturn=settings.isBanReturn,isHidePageBtn=settings.isHidePageBtn;isShowCurrentPageNum&&isShowAllPageNum?pageNumText=_config.lang.gPageCurrentAndAll({current:page+1,total:pageNum}):isShowCurrentPageNum?pageNumText=_config.lang.gPageCurrent({num:page+1}):isShowAllPageNum&&(pageNumText=_config.lang.gPageAll({num:pageNum}));var _pageNum=null;pageNumText&&(_pageNum=_react2["default"].createElement("p",{className:"fbc_pageNum"},pageNumText));var _pagePrev=null;return 1!==isBanReturn&&0!==page&&(buttonStyle.width="1"==submitStyle.isFormWith||isMobile?"49%":"auto",_pagePrev=_react2["default"].createElement("a",{className:"fbc_button",style:buttonStyle,tabIndex:1,role:"button",onKeyDown:this.handleARIAChangePage.bind(this,page-1),onClick:this.handleChangePage.bind(this,page-1,!1)},_config.lang.gPrev)),_react2["default"].createElement("div",{className:(0,_classnames2["default"])("submit","paging"),style:submitFieldStyle},isHidePageBtn?null:_react2["default"].createElement("div",{className:"fbc_pageBtn"},_pagePrev,_react2["default"].createElement("a",{className:"fbc_button",style:buttonStyle,tabIndex:1,role:"button",onKeyDown:this.handleARIAChangePage.bind(this,page+1),onClick:this.handleChangePage.bind(this,page+1,!1)},_config.lang.gNext)),_pageNum)}}),module.exports=exports["default"]}).call(exports,__webpack_require__(22))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_react=(_interopRequireDefault(_jquery),__webpack_require__(14)),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_MGColor=__webpack_require__(50),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin);exports["default"]=_react2["default"].createClass({displayName:"Submit.react",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return{saving:!1,updateCounter:0}},componentDidMount:function(){this.unsub=_formStore2["default"].addChangeListener(this.handleChangeState)},componentWillUnmount:function(){clearTimeout(this.resetProgress),this.unsub()},handleChangeState:function(action){var _this=this;"savingForm"===action.type?(this.setState({saving:!0,progress:action.progress||null}),action.progress>=100&&(this.resetProgress=setTimeout(function(){_this.setState({progress:null})},1200))):"endSubmit"===action.type?this.setState({saving:!1,progress:null}):"$$resize"===action.type&&this.setState({updateCounter:this.state.updateCounter+1})},handleChangePage:function(page){page<0?page=0:page>this.props.pageNum-1&&(page=this.props.pageNum-1),_formStore2["default"].dispatch({type:"page",data:page})},render:function(){var tail=_utils2["default"].getTail(),style=_utils2["default"].getStyle(),settings=_utils2["default"].getSettings(),_props=this.props,isMobile=_props.isMobile,page=_props.page,pageNum=_props.pageNum,submitStyle=style.submitStyle||{},alignArray=["","left","center","right"],submitFieldStyle={textAlign:alignArray[submitStyle.btnAlign||2]};if(submitStyle.bgColor&&(submitFieldStyle.backgroundColor=submitStyle.bgColor),null!=submitStyle.bgOpacity&&1!==submitStyle.bgOpacityValue){var newColor=new _MGColor.OColor(submitStyle.bgColor||"#ffffff");newColor.set("a",submitStyle.bgOpacityValue),submitFieldStyle.backgroundColor=newColor.getRGBA(),submitFieldStyle.zoom=1,_utils.isIE8&&(submitFieldStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",submitFieldStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",
submitFieldStyle.backgroundColor="transparent")}if(submitStyle.background){submitFieldStyle.backgroundImage="url("+submitStyle.background+")",submitFieldStyle.backgroundPosition="center center",submitFieldStyle.backgroundRepeat="no-repeat";var bglH=submitStyle.bgLayoutHorizontal||6,bglV=submitStyle.bgLayoutVertical||6;switch(bglH){case 3:submitFieldStyle.backgroundRepeat="repeat-x";break;case 4:submitFieldStyle.backgroundSize="100% auto";break;case 5:submitFieldStyle.backgroundPositionX="left";break;case 7:submitFieldStyle.backgroundPositionX="right";break;case 6:default:submitFieldStyle.backgroundPositionX="center"}switch(bglV){case 3:submitFieldStyle.backgroundRepeat="repeat-y";break;case 4:submitFieldStyle.backgroundSize="auto 100%";break;case 8:submitFieldStyle.backgroundPositionY="top";break;case 9:submitFieldStyle.backgroundPositionY="bottom";break;case 6:default:submitFieldStyle.backgroundPositionY="center"}3===bglH&&3===bglV&&(submitFieldStyle.backgroundRepeat="repeat"),4===bglH&&4===bglV&&(submitFieldStyle.backgroundSize="cover")}var pageNumText=!1,_pageNum=null,_hasPagePrev=!1,_pagePrev=null;if(pageNum>1){var isShowCurrentPageNum=settings.isShowCurrentPageNum,isShowAllPageNum=settings.isShowAllPageNum,isBanReturn=settings.isBanReturn,isHidePageBtn=settings.isHidePageBtn;isShowCurrentPageNum&&isShowAllPageNum?pageNumText=_config.lang.gPageCurrentAndAll({current:page+1,total:pageNum}):isShowCurrentPageNum?pageNumText=_config.lang.gPageCurrent({num:page+1}):isShowAllPageNum&&(pageNumText=_config.lang.gPageAll({num:pageNum})),pageNumText&&(_pageNum=_react2["default"].createElement("p",{className:"fbc_pageNum"},pageNumText)),1===isBanReturn||0===page||isHidePageBtn||(_hasPagePrev=!0)}var btnStyle={width:1===+submitStyle.isFormWith||this.props.isMobile?"100%":"auto",height:Math.floor(2.2*(submitStyle.submitFontSize||14))+(isMobile?6:0),paddingTop:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingBottom:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingLeft:(submitStyle.submitFontSize||14)+6,paddingRight:(submitStyle.submitFontSize||14)+6,fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,background:submitStyle.btnColor},submitBtnStyle=_lodash2["default"].assign({},btnStyle);this.props.isMobile&&_hasPagePrev&&(submitBtnStyle.width="49%",submitBtnStyle.marginLeft="2%");var _submitBtn=null;if(!tail||tail&&1!==tail.isHideBtn){var submitText=_config.lang.gSubmit;tail&&tail.isDefaultSubmitText&&(submitText="submitText"in tail?tail.submitText:_config.lang.gSubmit),this.state.saving&&(submitText=_config.lang.gSaving,this.state.progress&&(submitText+=" "+this.state.progress.toFixed(1)+"%")),_submitBtn=_react2["default"].createElement("a",{className:(0,_classnames2["default"])("fb_submitBtn",{fb_savingBtn:this.state.saving}),tabIndex:1,role:"button","aria-disabled":this.state.saving,id:"form_submit",style:submitBtnStyle},submitText)}return _hasPagePrev&&(_pagePrev=_react2["default"].createElement("a",{className:"fbc_button",style:btnStyle,tabIndex:1,role:"button","aria-live":"polite",onClick:this.handleChangePage.bind(this,page-1)},_config.lang.gPrev)),_react2["default"].createElement("div",{className:"submit",style:submitFieldStyle,"aria-live":"assertive","aria-relevant":"text"},_pagePrev?_react2["default"].createElement("div",{className:"fbc_pageBtn fbc_submitPagePrev",style:{width:tail&&1===tail.isHideBtn?"100%":null}},_pagePrev):null,_submitBtn,_pageNum,_react2["default"].createElement("div",{className:"clearB"}))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _numberChunk(str,chunkLength){str=""+str;for(var temp="",res=[],i=0,len=str.length;i<len;i++)i%chunkLength===0&&temp&&(res.push(temp),temp=""),temp+=str.charAt(i);return temp&&res.push(temp),res}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_config=__webpack_require__(9),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(33),_extensions=(_interopRequireDefault(_tools),__webpack_require__(40)),_MGDraftRawConvert=__webpack_require__(37),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),isWx=/micromessenger/i.test(window.navigator.userAgent),textRender=(0,_MGDraftRawConvert.crateTextRender)({entity:{}});exports["default"]=_react2["default"].createClass({displayName:"succeed",mixins:[_reactAddonsPureRenderMixin2["default"]],componentDidMount:function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30}),(0,_jquery2["default"])("body").scrollTop(0),setTimeout(function(){(0,_jquery2["default"])(".fb_secondaryStatus").focus()},10)},_getHrefUrl:function(){var link="",settings=this.props.settings;if("2"==settings.asButtonLinkType&&settings.asButtonLink)link=settings.asButtonLink;else{var _search="";if(isWx){var hash=+new Date;_search=location.pathname!==_utils2["default"].token()?"?wechat_hash="+hash:/wechat_hash/.test(location.search)?location.search.replace(/wechat_hash=\d+(&?)/,"wechat_hash="+hash+"$1"):""==location.search?"?wechat_hash="+hash:location.search+"&wechat_hash="+hash}window._SST&&(_search+=_search?"&":"?",_search+="sst="+window._SST),link=location.origin+"/"+_utils2["default"].token()+_search}return link},handleImgError:function(e){e.target.src="images/form/success.png"},handleImgLoad:function(){setTimeout(function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},100)},handleViewStatistics:function(){location.href="r.php?t="+(_utils2["default"].token()||"")},handleViewSubmitData:function(){location.href="r.php?t="+(_utils2["default"].token()||"")+"&s=2"},render:function(){var _props=this.props,settings=_props.settings,isMobile=_props.isMobile,randomCode=_props.randomCode,ticketValidationCode=_props.ticketValidationCode,ticketValidationQR=_props.ticketValidationQR,_utils$getStyle=_utils2["default"].getStyle(),bodyStyle=_utils$getStyle.bodyStyle,submitStyle=_utils$getStyle.submitStyle;bodyStyle=bodyStyle||{},submitStyle=submitStyle||{};var _image=null,_text=null,_ticketValidation=null,_randomCode=null,_feedbackNum=null,_feedbackResult=null,_button=null;if(settings&&0!==settings.asIsShowImage){var asImage=settings.asImage||{},imgUri="images/form/success.png";settings.asIsDefaultImg||(asImage.isLink&&asImage.linkUri?imgUri=asImage.linkUri:!asImage.isLink&&asImage.imageUri&&(imgUri=asImage.imageUri)),_image=_react2["default"].createElement("div",{className:"fb_ssItem image","aria-hidden":!0},_react2["default"].createElement("img",{className:"fb_ssImg",src:imgUri,onError:this.handleImgError,onLoad:this.handleImgLoad}))}if(settings&&0!==settings.asIsShowText&&(_text=_react2["default"].createElement("div",{className:"fb_ssItem text",key:"tips"},_react2["default"].createElement("div",{className:"fb_ssTitle",style:{color:bodyStyle.titleColor}},"asTextTitle"in settings?settings.asTextTitle&&!_lodash2["default"].isEmpty(settings.asTextTitle)?textRender.render(settings.asTextTitle,settings.asTextTitle_style):"":_config.lang.asSubmitSucceed),_react2["default"].createElement("div",{className:"fb_ssSubTitle",style:{color:bodyStyle.describeColor}},"asTextSubTitle"in settings?settings.asTextSubTitle&&!_lodash2["default"].isEmpty(settings.asTextSubTitle)?textRender.render(settings.asTextSubTitle,settings.asTextSubTitle_style):"":_config.lang.asSubmitSucceedDescribe))),(0,_extensions.getTicketValidation)().isTicketValidation){var _ref=(0,_extensions.getTicketValidation)().info||{},ticketValidationTitle=_ref.ticketValidationTitle,ticketValidationDescribe=_ref.ticketValidationDescribe;_ticketValidation=_react2["default"].createElement("div",{className:"fb_ssItem ticketValidation",key:"ticketValidation"},_react2["default"].createElement("div",{className:"fb_ticketValidation"},_react2["default"].createElement("div",{className:"fb_tvContent"},_react2["default"].createElement("div",{className:"fb_tvTitle"},"ticketValidationTitle"in(0,_extensions.getTicketValidation)().info?ticketValidationTitle&&!_lodash2["default"].isEmpty(ticketValidationTitle)?_lodash2["default"].map(ticketValidationTitle,function(line,lnum){return _react2["default"].createElement("p",{key:"des"+lnum},line)}):"":_react2["default"].createElement("p",{key:"des"},_config.lang.ticketValidationTitle)),_react2["default"].createElement("p",{className:"fb_tvGuide"},_config.lang.ticketValidationGuide),_react2["default"].createElement("div",{className:"fb_tvDecorate"},_react2["default"].createElement("div",{className:"fb_tvBorder"})),_react2["default"].createElement("img",{className:"fb_tvQrCode",src:(0,_tools.linkify)(ticketValidationQR)}),_react2["default"].createElement("p",{className:"fb_tvRandomCode"},_numberChunk(ticketValidationCode,4).join(" ")),ticketValidationDescribe&&(ticketValidationDescribe.length>1||ticketValidationDescribe[0])?_react2["default"].createElement("div",{className:"fb_tvDescribe"},_lodash2["default"].map(ticketValidationDescribe,function(text,idx){return _react2["default"].createElement("p",{key:"des"+idx},text)})):null)))}if(settings&&settings.asIsShowRandomCode&&(_randomCode=_react2["default"].createElement("div",{className:"fb_ssItem randomCode",key:"randomCode"},_react2["default"].createElement("div",{className:"fb_randomCode"},_react2["default"].createElement("p",{className:"fb_rdTitle"},"asRandomCodeTitle"in settings?settings.asRandomCodeTitle:_config.lang.asRandomCode),_react2["default"].createElement("br",null),_react2["default"].createElement("p",{className:"fb_rdExample"},randomCode)))),settings&&settings.asIsShowFeedbackNum&&(_feedbackNum=_react2["default"].createElement("div",{className:"fb_ssItem feedbackNum",key:"feedbackNum"},_react2["default"].createElement("p",{className:"fb_fnText"},"asFeedbackNumText"in settings?settings.asFeedbackNumText:_config.lang.asFeedbackNumber))),settings&&settings.asIsShowFeedbackResult){var isShowStatistics=0!==settings.isShowStatistics,_statistics=null,isShowData=0!==settings.isShowData,_data=null,_border=null;isShowStatistics&&(_statistics=_react2["default"].createElement("div",{className:"fb_frStatistics",onClick:this.handleViewStatistics},_react2["default"].createElement("p",{className:"fb_frIcon"}),_react2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asStatisticsView))),isShowData&&(_data=_react2["default"].createElement("div",{className:"fb_frData",onClick:this.handleViewSubmitData},_react2["default"].createElement("p",{className:"fb_frIcon"}),_react2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asFormSubmitView))),isShowStatistics&&isShowData&&(_border=_react2["default"].createElement("div",{className:"fb_frBorder"})),_feedbackResult=_react2["default"].createElement("div",{className:"fb_ssItem feedbackResult",key:"feedbackResult"},_statistics,_border,_data)}return settings&&0!==settings.asIsShowButton&&(_button=_react2["default"].createElement("div",{className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fb_submitBtn",style:{width:"1"==submitStyle.isFormWith||isMobile?"100%":"auto",height:Math.floor((2.2+(isMobile?.4:0))*(submitStyle.fontSize||14)),lineHeight:isMobile?Math.floor(1.6*(submitStyle.fontSize||14))+"px":null,paddingTop:(submitStyle.fontSize||14)/2,paddingBottom:(submitStyle.fontSize||14)/2,paddingLeft:submitStyle.fontSize||14,paddingRight:submitStyle.fontSize||14,fontSize:submitStyle.fontSize,fontWeight:submitStyle.fontWeight,color:submitStyle.fontColor,background:submitStyle.btnColor},href:this._getHrefUrl()},"asButtonText"in settings?settings.asButtonText||_config.lang.gGoBack:_config.lang.gGoBack))),_react2["default"].createElement("div",{className:"fb_secondaryStatus",tabIndex:1},_image,_text,_ticketValidation,_randomCode,_feedbackNum,_feedbackResult)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_classnames=__webpack_require__(38),_classnames2=_interopRequireDefault(_classnames),_MGMoment=__webpack_require__(34),_MGMoment2=_interopRequireDefault(_MGMoment),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger),_tools=__webpack_require__(33),_tools2=_interopRequireDefault(_tools),_formStore=__webpack_require__(42),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_config2=__webpack_require__(6),_config3=_interopRequireDefault(_config2),_reactAddonsPureRenderMixin=__webpack_require__(46),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),isWx=/micromessenger/i.test(window.navigator.userAgent),_CDN_PATH="";"cn"===window._SLD&&(_CDN_PATH=location.protocol+_config3["default"].CDN_PATH_WITHOUT_PROTOCOL),exports["default"]=_react2["default"].createClass({displayName:"errorHandler",mixins:[_reactAddonsPureRenderMixin2["default"]],getInitialState:function(){return{time:null,valid:!1}},componentDidMount:function(){this.refs.password&&(_reactDom2["default"].findDOMNode(this.refs.password).focus(),(0,_jquery2["default"])(_reactDom2["default"].findDOMNode(this.refs.password)).on("keydown",this.handleKeyPreventDefault)),_formStore2["default"].addChangeListener(this.handleStateChange),_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},componentWillMount:function(){var _this=this,_props=this.props,settings=_props.settings,errorCode=_props.errorCode,timerId=void 0,self=this;errorCode===-822&&!function(){var timer=function timer(){var time=(0,_MGMoment2["default"])().time();usableTimeFromTime>=time?(self.setState({time:Math.floor(time/1e3)}),timerId=_tools2["default"].rAF(timer)):(_tools2["default"].cAF(timerId),location.reload(!0))},usableTimeFromTime=_this.usableTimeFromTime=(0,_MGMoment2["default"])(settings.usableTimeFrom).time();window.JHD&&(usableTimeFromTime=_this.usableTimeFromTime=(0,_MGMoment2["default"])().time()+1e3*window.JHD),timer()}()},componentDidUpdate:function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},componentWillUnmount:function(){(0,_jquery2["default"])(_reactDom2["default"].findDOMNode(this.refs.password)).off("keydown",this.handleKeyPreventDefault)},handleStateChange:function(data){"passwordValid"===data.type&&this.setState({valid:data.data})},handleRefresh:function(){return isWx?void(window.location.href=_tools2["default"].updateUrl(window.location.href)):void location.reload()},handleImageLoad:function(){setTimeout(function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},100)},handleKeyPreventDefault:function(e){13===e.which&&e.preventDefault()},handleKeySubmitPassword:function(e){this.setState({valid:!1});var keyCode=e.keyCode||e.which;13===keyCode&&(e.preventDefault(),this.handleSubmitPassword())},handleSubmitPassword:function(){var password=_reactDom2["default"].findDOMNode(this.refs.password).value;password?_formStore2["default"].validPassword(password):this.setState({valid:"required"})},_getAfterSubmitImage:function(){var settings=this.props.settings,asImage=settings.asImage||{},imgUri=null;return settings.asIsDefaultImg||(asImage.isLink&&asImage.linkUri?imgUri=asImage.linkUri:!asImage.isLink&&asImage.imageUri&&(imgUri=asImage.imageUri)),imgUri},handleViewStatistics:function(){location.href="r.php?t="+(_utils2["default"].token()||"")},handleViewSubmitData:function(){location.href="r.php?t="+(_utils2["default"].token()||"")+"&s=2"},renderFeedbackResult:function(){var settings=this.props.settings,bodyStyle=_utils2["default"].getStyle().bodyStyle||{},feedbackResult=null;if(settings&&settings.asIsShowFeedbackResult){var isShowStatistics=0!==settings.isShowStatistics,_statistics=null,isShowData=0!==settings.isShowData,_data=null,_border=null;isShowStatistics&&(_statistics=_react2["default"].createElement("div",{className:"fb_frStatistics",onClick:this.handleViewStatistics},_react2["default"].createElement("p",{className:"fb_frIcon"}),_react2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asStatisticsView))),isShowData&&(_data=_react2["default"].createElement("div",{className:"fb_frData",onClick:this.handleViewSubmitData},_react2["default"].createElement("p",{className:"fb_frIcon"}),_react2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asFormSubmitView))),isShowStatistics&&isShowData&&(_border=_react2["default"].createElement("div",{className:"fb_frBorder"})),feedbackResult=_react2["default"].createElement("div",{className:"fb_ssItem feedbackResult",key:"feedbackResult"},_statistics,_border,_data)}return feedbackResult},preRenderNeedPasswordComponent:function(){var errorTips=null;"error"===this.state.valid&&(errorTips=_react2["default"].createElement("p",{key:"errorTips",className:"fbc_errorTips"},_config.lang.errAccessPassword));var input=_react2["default"].createElement("div",{key:"input",className:"fb_ssItem input"},_react2["default"].createElement("input",{type:"password",className:(0,_classnames2["default"])("fbc_input",{error:this.state.valid}),autoComplete:!1,spellCheck:!1,ref:"password",onKeyUp:this.handleKeySubmitPassword})),button=_react2["default"].createElement("div",{key:"button",className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fbc_button",onClick:this.handleSubmitPassword},_config.lang.gConfirm));return{image:_CDN_PATH+"images/form/err_passwordLimit.png",subTitle:_config.lang.tAccessPassword,content:[errorTips,input,button]}},preRenderBannedComponent:function(){return{image:_CDN_PATH+"images/form/err_banned.png",title:_config.lang.tBannedForm,subTitle:_config.lang.tBannedFormDescribe}},preRenderFrozenComponent:function(){return{image:_CDN_PATH+"images/form/err_banned.png",title:_config.lang.tFrozenForm,subTitle:_config.lang.tFrozenFormDescribe}},preRenderPauseComponent:function(){return{image:_CDN_PATH+"images/form/err_pause.png",title:_config.lang.tPauseForm,subTitle:_config.lang.tPauseFormDescribe}},preRenderStoppedComponent:function(){return{image:_CDN_PATH+"images/form/err_stopped.png",title:_config.lang.tStoppedForm}},preRenderIPLimitedComponent:function(){var button=_react2["default"].createElement("div",{className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fbc_button",href:"http://hk.mikecrm.com/ZN5fxQj"},_config.lang.tIPLimitedSubmit));return{image:_CDN_PATH+"images/form/err_wrongSLD.png",title:_config.lang.tIPLimited,subTitle:this.props.isMobile?_config.lang.tIPLimitedDescribeMobile||_config.lang.tIPLimitedDescribe:_config.lang.tIPLimitedDescribe,content:[button]}},preRenderWrongDNSComponent:function(){return{image:_CDN_PATH+"images/form/err_stopped.png",title:_config.lang.tWrongDNSTitle}},preRenderNotNewestComponent:function(){var button=_react2["default"].createElement("div",{className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fbc_button",onClick:this.handleRefresh},_config.lang.tFormRefresh));return{image:_CDN_PATH+"images/form/err_expired.png",title:_config.lang.tNotNewestForm,subTitle:_config.lang.tNotNewestFormDescribe,content:[button]}},preRenderWrongSLDComponent:function(){var frLink=_react2["default"].createElement("div",{className:"fb_ssItem link"},_react2["default"].createElement("a",{className:"fbc_link",href:"http://"+(window._CL_SLD||"www")+".mikecrm.com/"+_utils2["default"].token()},"http://"+(window._CL_SLD||"www")+".mikecrm.com/"+_utils2["default"].token()));return{image:_CDN_PATH+"images/form/err_wrongSLD.png",title:_config.lang.tWrongSLDTitle,subTitle:_config.lang.tWrongSLDDescribe,content:[frLink]}},preRenderUnstartComponent:function(){var settings=this.props.settings,time=(0,_MGMoment2["default"])().time(),shownTime=null;if(this.usableTimeFromTime-time<=864e5&&this.usableTimeFromTime-time>0){var info=Math.floor((this.usableTimeFromTime-time)/1e3),_shownSec=info%60,_tempMinInfo=(info-_shownSec)/60,_shownMin=_tempMinInfo%60,_shownHour=(_tempMinInfo-_shownMin)/60%24;shownTime=_react2["default"].createElement("div",{className:"fb_ssItem openTime",key:"runTimer"},_react2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tStartCountdown),_react2["default"].createElement("p",{className:"fb_ssTime"},_config.lang.tCountdownTimerFunc({hour:_tools2["default"].leftPad(_shownHour,0,2),minutes:_tools2["default"].leftPad(_shownMin,0,2),seconds:_tools2["default"].leftPad(_shownSec,0,2)})))}else shownTime=_react2["default"].createElement("div",{className:"fb_ssItem openTime",key:"timer"},_react2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tStartHint),_react2["default"].createElement("p",{className:"fb_ssTime"},(0,_MGMoment2["default"])(settings.usableTimeFrom).getFullDateTime()));return{image:_CDN_PATH+"images/form/err_timeLimit.png",title:settings.usableTimeTextBefore||_config.lang.tCollectionNotStarted,content:[shownTime]}},preRenderTimeStoppedComponent:function(){var settings=this.props.settings,parsedInfo=_tools2["default"].parseURL(location.url),viewLink=location.protocol+"//"+parsedInfo.host+"/"+_utils2["default"].token()+"?iro=1",button=_react2["default"].createElement("div",{className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fbc_button",href:viewLink},_config.lang.tFormView));return{image:_CDN_PATH+"images/form/err_numLimit.png",title:settings.usableTimeTextAfter||_config.lang.tCollectionFinished,content:[this.renderFeedbackResult(),button]}},preRenderDayTimeUnstartComponent:function(){var settings=this.props.settings,_dailyFrom=(settings.usableTimeDailyFrom||"00:00:00").split(":"),_dailyTo=(settings.usableTimeDailyTo||"23:59:59").split(":");_dailyFrom.pop(),_dailyTo.pop();var dayTime=_react2["default"].createElement("div",{className:"fb_ssItem dayTime"},_react2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tCollectionPeriod),_react2["default"].createElement("p",{className:"fb_ssTime"},_dailyFrom.join(":")+" ~ "+_dailyTo.join(":")));return{image:_CDN_PATH+"images/form/err_timeLimit.png",title:settings.usableTimeTextBefore||_config.lang.tCollectionNotStarted,content:[dayTime]}},preRenderDayTimeStoppedComponent:function(){var settings=this.props.settings,_dailyFrom=(settings.usableTimeDailyFrom||"00:00:00").split(":"),_dailyTo=(settings.usableTimeDailyTo||"23:59:59").split(":");_dailyFrom.pop(),_dailyTo.pop();var dayTime=_react2["default"].createElement("div",{className:"fb_ssItem dayTime"},_react2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tCollectionPeriod),_react2["default"].createElement("p",{className:"fb_ssTime"},_dailyFrom.join(":")+" ~ "+_dailyTo.join(":")));return{image:_CDN_PATH+"images/form/err_timeLimit.png",title:settings.usableTimeTextAfter||_config.lang.tCollectionFinished,content:[dayTime]}},preRenderFullEntryComponent:function(){var settings=this.props.settings,parsedInfo=_tools2["default"].parseURL(location.url),viewLink=location.protocol+"//"+parsedInfo.host+"/"+_utils2["default"].token()+"?iro=1",button=_react2["default"].createElement("div",{className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fbc_button",href:viewLink},_config.lang.tFormView));return{image:_CDN_PATH+"images/form/err_numLimit.png",title:settings.mensurableSubmitText||_config.lang.tCollectionFull,content:[this.renderFeedbackResult(),button]}},preRenderRepeatSubmitComponent:function(){var settings=this.props.settings,parsedInfo=_tools2["default"].parseURL(location.url),viewLink=location.protocol+"//"+parsedInfo.host+"/"+_utils2["default"].token()+"?iro=1",button=_react2["default"].createElement("div",{className:"fb_ssItem button"},_react2["default"].createElement("a",{className:"fbc_button",href:viewLink},_config.lang.tFormView));return{image:_CDN_PATH+"images/form/err_submitLimit.png",title:settings.onlySubmitText||_config.lang.tAlreadySubmitted,content:[this.renderFeedbackResult(),button]}},preRenderSubmitError:function(){return{image:_CDN_PATH+"images/form/err_submitError.png",title:_config.lang.tSubmitErrorTitle,subTitle:_config.lang.tSubmitErrorDescribe}},render:function(){var props=this.props,bodyStyle=_utils2["default"].getStyle().bodyStyle||{},content=null;switch(+props.errorCode){case-801:content=this.preRenderBannedComponent();break;case-802:content=this.preRenderFrozenComponent();break;case-803:content=this.preRenderPauseComponent();break;case-804:content=this.preRenderStoppedComponent();break;case-80001:content=this.preRenderIPLimitedComponent();break;case-810:content=this.preRenderWrongDNSComponent();break;case-811:content=this.preRenderNotNewestComponent();break;case-812:content=this.preRenderWrongSLDComponent();break;case-820:content=this.preRenderNeedPasswordComponent();break;case-822:content=this.preRenderUnstartComponent();break;case-823:content=this.preRenderTimeStoppedComponent();break;case-824:content=this.preRenderDayTimeUnstartComponent();break;case-825:content=this.preRenderDayTimeStoppedComponent();break;case-826:content=this.preRenderFullEntryComponent();break;case-827:content=this.preRenderRepeatSubmitComponent();break;case-2:default:content=this.preRenderSubmitError()}return content?_react2["default"].createElement("div",{className:"fb_secondaryStatus"},_react2["default"].createElement("div",{className:"fb_ssItem image"},_react2["default"].createElement("img",{className:"fb_ssImg",src:content.image,onLoad:this.handleImageLoad})),_react2["default"].createElement("div",{className:"fb_ssItem text",key:"tips"},_react2["default"].createElement("p",{className:"fb_ssTitle",style:{color:bodyStyle.titleColor}},content.title),_react2["default"].createElement("p",{className:(0,_classnames2["default"])("fb_ssSubTitle",{error:"required"==this.state.valid})},content.subTitle)),content.content):(_MGDebugger2["default"].error("no fit error type",props),null)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}function getFormCurrentMode(){return _mode}function _setFormFillCache(setFormCache){return function(e){if(_needSave){var res=_form.formStore.getState(),cacheFillingInfo=_form.utils.getCacheFilling(res.data);_lodash2["default"].isEmpty(cacheFillingInfo)||setFormCache(JSON.stringify(cacheFillingInfo))}}}function _renderCheckInAuthorization(){return'<div class="mask" id="ckiMask"><div class="checkInAuth popInnerAnimation"><div class="cki_content"><p class="cki_tips">'+_form.lang.ckiAuthGuide+'</p></div><div class="cki_operate"><a class="fbc_button cki_no">'+_form.lang.ckiAuthNo+'</a><a class="fbc_button cki_yes" name="auth">'+_form.lang.ckiAuthYse+"</a></div></div></div>"}function _renderCaptchaBox(img){var state=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return'<div class="mask" id="captchaMask"><div class="captcha popInnerAnimation"><div class="cpt_content"><img class="cpt_img" src="'+img+'" title="'+_form.lang.fCaptchaChangeTips+'" ><p class="cpt_tips'+("error"===state?" error":"")+'">'+_form.lang.fCaptchaTips+'</p><div class="cpt_inputWrapper fbc_input'+("error"===state?" error":"")+'"><input class="cpt_input fbi_input" />'+("succeed"===state?'<i class="iconfont cpt_icon succeed">'+String.fromCharCode(59173)+"</i>":"")+("error"===state?'<i class="iconfont cpt_icon error">'+String.fromCharCode(58982)+"</i>":"")+'</div></div><div class="cpt_operate"><a class="fbc_button cpt_confirm">'+_form.lang.gConfirm+"</a></div></div></div>"}function _renderQRMask(id,img,info){function MKReGetQRCode(elem){timer>5||(timer++,ws.post(RE_GET_QRCODE,{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:_form.utils.token()}})}}).done(function(res){0===res.r&&(elem.src=_form.utils.QR(!0,+new Date))}))}if(!_form.utils.token()||"null"===_form.utils.token()){var _qrImg2="images/form/icon_weChat.png";return"cn"===window._SLD&&(_qrImg2=location.protocol+_config2["default"].CDN_PATH_WITHOUT_PROTOCOL+"images/form/icon_weChat.png"),'<div class="mask '+id+'" id="'+id+'"><div class="scanner popInnerAnimation"><div class="scannerGuide"><img class="scannerWeChatIcon" src="'+_qrImg2+'" /><p class="scannerDes">'+_form.lang.errNoTokenShareImage+"</p></div></div>"}var timer=0;global.MKGetQR=null,global.MKGetQR=_lodash2["default"].throttle(MKReGetQRCode,1e3);var _qrImg="images/form/icon_weChat.png";return"cn"===window._SLD&&(_qrImg=location.protocol+_config2["default"].CDN_PATH_WITHOUT_PROTOCOL+"images/form/icon_weChat.png"),'<div class="mask '+id+'" id="'+id+'"><div class="scanner popInnerAnimation"><img class="scannerQRCode" src="'+img+'" onerror="MKGetQR(this)"/><div class="scannerGuide"><img class="scannerWeChatIcon" src="'+_qrImg+'" /><p class="scannerDes">'+info+"</p></div></div>"}function formShareMask(){_mode!==MODE_PREVIEW&&_mode!==MODE_FILLING||($wrapper.css("overflow","hidden").on("click.closeShare","#shareMask",function(){(0,_jquery2["default"])("#shareMask").remove(),$wrapper.css("overflow-y","auto").off("click.closeShare"),$container.removeClass("form-disabled")}),$submitForm.after(_renderQRMask("shareMask",_form.utils.QR(!0),_form.lang.sShareFormDis)),$container.addClass("form-disabled"))}function wechatOnlyMask(){_mode!==MODE_FILLING&&_mode!==MODE_IRO||($body.css({overflow:"hidden",width:"100%",height:"100%"}).bind("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),$window.css({overflow:"hidden",width:"100%",height:"100%"}),$submitForm.after(_renderQRMask("",_form.utils.QR(!0),_form.lang.errOnlyInWeChat)),$container.addClass("form-disabled"))}function formCaptchaMask(img,callback){if(_mode===MODE_FILLING||_mode===MODE_IRO){var _captchaMask="#captchaMask",_confirm=!1,_oldVal=null;$wrapper.css("overflow","hidden").on("captchaFin",function(){(0,_jquery2["default"])(_captchaMask).remove(),$wrapper.css("overflow-y","auto").off("captchaFin").off(".captchaEvent")}).on("input.captchaEvent propertychange.captchaEvent",_captchaMask+" .cpt_input",function(e){var $input=(0,_jquery2["default"])(this),$cp=(0,_jquery2["default"])(_captchaMask),_val=$input.val();_form.utils.setCaptchaData(_val),_oldVal!==_val&&($cp.find(".cpt_icon").remove(),$cp.find(".cpt_tips").removeClass("error"),$cp.find(".cpt_inputWrapper").removeClass("error")),4===_val.length&&_oldVal!==_val&&_form.formStore.checkCaptcha(_form.utils.getCaptchaToken(),_val).done(function(res){0===res.r?$input.after('<i class="iconfont cpt_icon succeed">'+String.fromCharCode(59173)+"</i>"):($cp.find(".cpt_inputWrapper").addClass("error"),$input.after('<i class="iconfont cpt_icon error">'+String.fromCharCode(58982)+"</i>"))}),_oldVal=_val}).on("click.captchaEvent",_captchaMask+" .cpt_img",function(){_oldVal=null,_form.utils.setCaptchaToken(null),_form.utils.setCaptchaData(null),(0,_jquery2["default"])(_captchaMask+" .cpt_input").val(""),(0,_jquery2["default"])(_captchaMask).find(".cpt_icon").remove();var $img=(0,_jquery2["default"])(this);_form.formStore.generateCaptcha().then(function(res){
_form.utils.setCaptchaToken(res.t),$img.attr("src","data:image/png;base64,"+res.img)})}).on("click.captchaEvent",_captchaMask+" .cpt_confirm",function(){if(!_confirm)if(_form.utils.getCaptchaData())_confirm=!0,callback();else{var $cp=(0,_jquery2["default"])(_captchaMask);$cp.find(".cpt_tips").addClass("error"),$cp.find(".cpt_inputWrapper").addClass("error")}}),$submitForm.after(_renderCaptchaBox(img))}}function formCheckInWechatAuthMask(){_mode===MODE_FILLING&&($wrapper.css({overflow:"hidden",width:"100%",height:"100%"}).on("click.opeCheckInAuth",".fbc_button",function(e){(0,_jquery2["default"])("#ckiMask").remove(),$wrapper.css("overflow-y","auto").off("click.closeShare"),$container.removeClass("form-disabled"),"auth"===e.target.name&&_form.formStore.wxAuth()}),$window.css({overflow:"hidden",width:"100%",height:"100%"}),$submitForm.after(_renderCheckInAuthorization()))}function _submit(){if(!_saving&&!_processed){_form.formStore.dispatch({type:"savingForm"}),_form.formStore.dispatch({type:"submitValid",aria:_aria}),_aria=!1;var res=_form.formStore.getState();if(_needSave=!1,res.valid&&!_lodash2["default"].isEmpty(res.valid))return _needSave=!0,_form.formStore.dispatch({type:"endSubmit"}),void _form.formStore.dispatch({type:"submitFailLocate"});_form.utils.formCacheId()&&!_lodash2["default"].isEmpty(_form.utils.getCacheFilling(res.data))&&updateCache(JSON.stringify(_form.utils.getCacheFilling(res.data))),_saving=!0;var _data=res.data;_savedData=_data;var _captcha=!0;_form.utils.getFormCaptcha()&&(_captcha=new Promise(function(resolve){_form.formStore.generateCaptcha().then(function(res){_form.utils.setCaptchaToken(res.t),formCaptchaMask("data:image/png;base64,"+res.img,function(){resolve()})})})),Promise.resolve(_captcha).then(function(){var filesInfo=_form.formStore.getFiles(),_specialSubmit=!1,$submitWorker=(0,_jquery2["default"])("#submitWorker"),_postData=_form.utils.getSubmitData(_data);if(window.IN_WECHAT&&(_postData.cvs.c.ext||(_postData.cvs.c.ext={}),_postData.cvs.c.ext.cashier)){var _jumpLink=_redirectUrl(_data);_postData.cvs.c.ext.jp={rdu:_jumpLink}}$submitWorker.length>0&&!_lodash2["default"].isEmpty(filesInfo)&&(isOldIE?!function(){$submitWorker=(0,_jquery2["default"])("#submitFrame");var hiddenInput=(0,_jquery2["default"])('<input type="hidden" name="d" >').insertBefore(".submit").val(JSON.stringify(_postData));$submitWorker.on("load",function(e){hiddenInput.remove();var content=$submitWorker.contents().find("body").html();try{_submitFin(JSON.parse(content))}catch(e){_submitFail()}}),_lodash2["default"].forEach(filesInfo,function(items,cpId){var $cp=(0,_jquery2["default"])("#"+cpId);$cp.length>0&&!function(){var num=0;_lodash2["default"].forEach(items.fileList,function(data,i){$cp.find('[data-idx="'+i+'"]').attr("name","ATTA_"+cpId+"_"+num),num++})}()}),_specialSubmit=!0,$submitForm.submit()}():!function(){var files=[],paramNames=[];_lodash2["default"].forEach(filesInfo,function(items,cpId){var num=0;_lodash2["default"].forEach(items.fileList,function(data,i){files.push(data),paramNames.push("ATTA_"+cpId+"_"+num),num++})}),_lodash2["default"].isEmpty(files)||(_specialSubmit=!0,$submitWorker.fileupload("send",{files:files,paramName:paramNames,url:SUBMIT,formData:{d:JSON.stringify(_postData)}}).success(_submitFin))}()),_specialSubmit||ws.post(SUBMIT,{hideErrorAlert:!0,data:{d:JSON.stringify(_postData)}}).done(_submitFin).fail(function(response){_submitFail()})})}}function _setSubmitOnce(){_form.utils.getSettings("isOnlySubmit")&&!function(){var _cookieBanned=((0,_tools.getCookie)(_SUBMIT_ONCE_KEY.toLowerCase())||"").split(",")||[];_lodash2["default"].forEach(_submitOnceList,function(time,token){_cookieBanned.push(token)}),_cookieBanned.push(_form.utils.token()),(0,_tools.setCookie)(_SUBMIT_ONCE_KEY.toLowerCase(),_cookieBanned.join(","),{domain:_DOMAIN,expires:2,path:"/"});var expiredTime=new Date;expiredTime.setDate(expiredTime.getDate()+2),expiredTime.setHours(23),expiredTime.setMinutes(59),expiredTime.setSeconds(59),_submitOnceList[_form.utils.token()]=expiredTime.getTime(),_MGCache2["default"].set(_SUBMIT_ONCE_KEY,JSON.stringify(_submitOnceList))}()}function _redirectUrl(data){var settings=_form.utils.getSettings(),_jumpLink=null;return 2===settings.afterSubmitPage&&(settings.asIsJumpToLuxury&&_lodash2["default"].forEach(settings.asJumpToLuxury,function(info,cpId){if(data[cpId]){var _component=_form.utils.getComponents(cpId),_opt=_lodash2["default"].find(_component.options,{sId:data[cpId][0]});_opt&&(_jumpLink=info[_opt.pid||_opt.id])}}),_jumpLink||(_jumpLink=settings.asJumpTo||null)),_jumpLink?(0,_tools.linkify)(_jumpLink):null}function _submitSucceed(data){var settings=_form.utils.getSettings(),link=data.link,randomCode=data.randomCode,ticketValidationCode=data.ticketValidationCode,ticketValidationQR=data.ticketValidationQR;if(link){var _ret5=function(){var _content=_form.lang.asSubmitSucceed;settings.asTextTitle&&(_content=_lodash2["default"].escape(settings.asTextTitle));var jumpToPage='<div class="mask maskJumpInfo" id="submitJump"><div class="mj_content popInnerAnimation"><div class="mj_img"></div><p class="mj_succeedTips">'+_content+'</p><div class="mj_jumpTips"><p class="mj_jtTitle mj_jtBLink">'+_form.lang.succeedJumpTips({sec:3})+'</p><p class="mj_jtInfo">'+link+"</p>";"ja"===_form.currentLang?jumpToPage+='<p class="mj_jtTitle mj_jtALink">へ移動する</p>':"ru"===_form.currentLang?jumpToPage+='<p class="mj_jtTitle mj_jtALink">через 3 с.</p>':"it"===_form.currentLang&&(jumpToPage+='<p class="mj_jtTitle mj_jtALink">tra 3 secondi</p>'),jumpToPage+="</div></div></div>",$submitForm.after(jumpToPage),(0,_jquery2["default"])(".ie8").length>0?(0,_jquery2["default"])("html").addClass("ie8noscroll"):(0,_jquery2["default"])("html").addClass("noscroll"),$container.addClass("form-disabled");var startTime=(0,_MGMoment2["default"])().time(),timer=(0,_jquery2["default"])("#submitJump").find(".mj_jtBLink");"ru"!==_form.currentLang&&"it"!==_form.currentLang||(timer=(0,_jquery2["default"])("#submitJump").find(".mj_jtALink"));var reduceInterval=setInterval(function(){var currentTime=(0,_MGMoment2["default"])().time(),reduceTimer=Math.max(Math.ceil(_REDUCE_JUMP_SEC-(currentTime-startTime)/1e3),0);"ru"===_form.currentLang?timer.text("через "+reduceTimer+" с."):"it"===_form.currentLang?timer.text("tra "+reduceTimer+" secondi"):timer.text(_form.lang.succeedJumpTips({sec:reduceTimer}))},300);return setTimeout(function(){clearInterval(reduceInterval),_processed=!0,(0,_jquery2["default"])("#submitJump").remove(),(0,_jquery2["default"])("html").removeClass("noscroll").removeClass("ie8noscroll"),$container.removeClass("form-disabled"),_topFrameSettings&&_topFrameSettings.topFrameLocationHref&&_tools.inIframe?window.top.location.href=link:location.href=link},1e3*_REDUCE_JUMP_SEC),{v:void 0}}();if("object"===("undefined"==typeof _ret5?"undefined":_typeof(_ret5)))return _ret5.v}_processed=!0,_reactDom2["default"].unmountComponentAtNode($body[0]),_reactDom2["default"].unmountComponentAtNode($submit[0]);var $main=(0,_jquery2["default"])(".main"),_c="is-emptyTail";$main.removeClass(_c),_reactDom2["default"].render(_react2["default"].createElement(_form.Succeed,{settings:settings,isMobile:_isMobile,randomCode:randomCode,ticketValidationCode:ticketValidationCode,ticketValidationQR:ticketValidationQR}),$body[0]),settings&&0!==settings.asIsShowButton&&_reactDom2["default"].render(_react2["default"].createElement(_SucceedReturn2["default"],{isMobile:_isMobile}),$submit[0])}function _submitFin(res){if(_finExtData={},$wrapper.trigger("captchaFin"),0!==res.r)return res.r===-850?(_form.formStore.dispatch({type:"optionQuotaError",errorInfo:[].concat(res.e)}),_needSave=!0,_saving=!1):res.r===-851?(_form.formStore.dispatch({type:"commodityQuotaError",errorInfo:[].concat(res.e)}),_needSave=!0,_saving=!1):res.r===-852?(_form.formStore.dispatch({type:"duplicateDataError",errorId:res.e}),_needSave=!0,_saving=!1):res.r===-828?(_form.formStore.dispatch({type:"MobileValidEmpty",errorId:_form.utils.getValidMobile()}),_needSave=!0,_saving=!1):res.r===-829?(_form.formStore.dispatch({type:"MobileValidCodeError",errorId:_form.utils.getValidMobile()}),_needSave=!0,_saving=!1):res.r===-830?(_needSave=!0,_saving=!1,_submit()):_error(res.r,_isMobile),void _form.formStore.dispatch({type:"endSubmit"});_saving=!1,_MGCache2["default"].remove(_form.utils.formCacheId()),res.randomCode&&(_finExtData.randomCode=res.randomCode);var _isExtTkv=res.ext&&res.ext.ftkv;if(_isExtTkv){var _ftkvInfo=res.ext.ftkv;_finExtData.tkvCode=_ftkvInfo.code,_finExtData.tkvQrUrl=_ftkvInfo.qrUrl}if(res.cashier){var _cashierInfo=_lodash2["default"].assign({},res.cashier);if(window.IN_WECHAT){if(_cashierInfo.inWechat=!0,_cashierInfo.redirectUrl=_redirectUrl(_savedData),_cashierInfo.randomCode=res.randomCode||null,_isExtTkv){var _ftkvInfo2=res.ext.ftkv;_cashierInfo.tkvCode=_ftkvInfo2.code,_cashierInfo.tkvQrUrl=_ftkvInfo2.qrUrl}_cashierInfo.t=_form.utils.token()}_form.formStore.dispatch({type:"cashierInfo",data:_cashierInfo})}else _afterSubmit(_savedData,_finExtData);_form.formStore.dispatch({type:"endSubmit"})}function _submitFail(){_MGDebugger2["default"].error("unkown error..",arguments)}function _afterSubmit(data,extData){_setSubmitOnce();var link=_redirectUrl(data);_submitSucceed({link:link,randomCode:extData.randomCode,ticketValidationCode:extData.tkvCode,ticketValidationQR:extData.tkvQrUrl})}function _paid(){_afterSubmit(_savedData,_finExtData)}function _error(errCode,isMobile){_reactDom2["default"].unmountComponentAtNode($submit[0]),[-52,-801,-802,-888,-840,-841].indexOf(errCode)>-1?($wrapper.css("backgroundColor","#FAFAFA"),_reactDom2["default"].render(_react2["default"].createElement(_form.HugeErrorHandler,{errorCode:errCode,isMobile:isMobile}),$container[0])):_reactDom2["default"].render(_react2["default"].createElement(_form.ErrorHandler,{errorCode:errCode,settings:_form.utils.getSettings(),isMobile:isMobile}),$body[0])}function bindEvent(){"onresize"in window&&$window.on("resize.windowResize",resizeTrigger),"onorientationchange"in window&&$window.on("orientationchange.windowResize",function(e){resizeTrigger(),setTimeout(function(){resizeTrigger()},600)}),(0,_jquery2["default"])(document).on("drop dragover",function(e){return e.preventDefault(),!1}),(0,_jquery2["default"])(".handleForm").on("drop dragover",function(e){return e.preventDefault(),!1}),_mode===MODE_FILLING?$form.on("click.submit","#form_submit",_submit).on("keydown.submit","#form_submit",function(e){var _this=this;13!==e.which&&32!==e.which||((0,_jquery2["default"])(this).blur(),_aria=!0,_submit(),setTimeout(function(){(0,_jquery2["default"])(_this).focus()},10))}).on("form-submit",_submit).on("click.share",".f_shareBtn",formShareMask):_mode===MODE_PREVIEW&&$form.on("click.share",".f_shareBtn",formShareMask)}function decorateFormTheme(isMobile){var THEME_COLOR=(_form.utils.getStyle("themeColor")||"#2D8FD9").toUpperCase();if(THEME_COLOR&&"#2D8FD9"!==THEME_COLOR){var THEME_COLOR_RGB=_MGColor2["default"].convertToRGBObj.fromHex(THEME_COLOR),style=[];style.push(".fb_tvGuide, .fbc_optionSvg.selected, .fbc_optionSvg:hover, .fbc_optionVal:hover .fbc_optionSvg{color:"+THEME_COLOR+";}"),style.push(".fbc_commodityPrice, .fbc_dtIcon, .fbc_paImgState, .fbc_descriptionLink, .fbc_descriptionLink:visited, .fbc_foldBtn, .fbc_foldBtn:visited, .fbc_commodityNameJump:hover, .lg-countpicker-reduce, .lg-countpicker-increase, .fbc_addIcon:hover, .fbc_addIcon:active{color:"+THEME_COLOR+";}"),style.push(".fbc_input:focus, .fbc_input.is_focus, .fbc_tabularInput:focus, .fbc_tabularInput.is_focus, .fbc_select.focus, .fbc_selectList, .fbc_paItem:hover, .fbc_uploadFile:hover,  .fbc_dtDropWrapper, .calendar_bDayItem .current-month.selected,.fbc_roItem.dragging, .lg-countpicker-reduce:hover, .lg-countpicker-increase:hover{border-color:"+THEME_COLOR+";}"),style.push(".fbc_raHovered .fbc_raGroove{color:"+THEME_COLOR+";background-color:rgba("+THEME_COLOR_RGB.r+", "+THEME_COLOR_RGB.g+", "+THEME_COLOR_RGB.b+", 0.5);}.fbc_raItem.has-value .fbc_raNum, .fbc_raNum.has_value, .fbc_raHovered .fbc_raNum, .fbc_raFilled .fbc_raNum, .fbc_raFilled.fbc_raHovered .fbc_raNum, .lg-countpicker-reduce:active, .lg-countpicker-increase:active, .fbc_pccDot.active, .fbc_numItem.numSelected{background-color:"+THEME_COLOR+";}"),style.push(".fbc_selectLi:hover, .calendar_switcher, .fb_ticketValidation, .fb_tvDecorate:before, .fb_tvDecorate:after{background-color:"+THEME_COLOR+";}"),style.push(".fbc_selectLi.fbc_currentSelected, .calendar_hTitle, .calendar_hDecrease, .calendar_hIncrease, \n\t.calendar_hTitle.canSwitch .hasTopLayer, .calendar_bDayItem.current-month:hover, .calendar_bDayItem.current-month:hover a, \n\t.calendar_bDayItem.current-month:hover a:hover, .calendar_bDayItem.current-month:hover a:visited, \n\t.calendar_bDayItem.current-month.selected, .calendar_bDayItem.current-month.selected a, \n\t.fb_tvBorder, .calendar_bDayItem.current-month.selected a:hover, .calendar_bDayItem.current-month.selected a:visited{color:"+THEME_COLOR+";border-color:"+THEME_COLOR+";}\n\t.fbc_button.calendar_confirm,.calendar_cancel:active{background-color:"+THEME_COLOR+";}\n\t.calendar_bDayItem.today{background-color:rgba("+THEME_COLOR_RGB.r+", "+THEME_COLOR_RGB.g+", "+THEME_COLOR_RGB.b+", 0.5);}\n\t.calendar_cancel, .calendar_typeItem:hover .calendar_typeTitle, .calendar_typeItem.selected .calendar_typeTitle{color:"+THEME_COLOR+";}.calendar_cancel:hover{border-color:"+THEME_COLOR+";}"),isMobile&&(style.push(".fbc_picOptionsChecked, .fbc_staticMap:hover{border-color:"+THEME_COLOR+";box-shadow-color:"+THEME_COLOR+";}"),style.push(".fbc_select .fbc_innerSelect:focus{box-shadow-color:"+THEME_COLOR+";}"),style.push(".fbc_tabularInput.fbc_input, .fbc_tabularInput:focus{box-shadow-color:"+THEME_COLOR+";}"));var _style=_doc?(0,_jquery2["default"])(_doc).find("#formStyle"):(0,_jquery2["default"])("#formStyle");0===_style.length?(_doc?(0,_jquery2["default"])(_doc).find("head"):(0,_jquery2["default"])("head")).append('<style id="formStyle" type="text/css">'+style.join("\n")+"</style>"):_style.html(style.join("\n"))}}function decorateForm(isMobile){var isOpacityBackground=arguments.length>1&&void 0!==arguments[1]&&arguments[1],globalStyle=_form.utils.getStyle(),bodyStyle=globalStyle.bodyStyle,style={};if((!isMobile||bodyStyle&&null!=bodyStyle.bgOpacityValue&&_lodash2["default"].isNumber(bodyStyle.bgOpacityValue)&&bodyStyle.bgOpacityValue<1)&&globalStyle.background){switch(style.backgroundImage="url("+globalStyle.background+")",isMobile&&(style.backgroundImage="url("+globalStyle.optBackground+")"),style.backgroundPosition="center center",style.backgroundRepeat="no-repeat",globalStyle.bgLayoutHorizontal||6){case 3:style.backgroundRepeat="repeat-x";break;case 4:style.backgroundSize="100% auto";break;case 5:style.backgroundPositionX="left";break;case 7:style.backgroundPositionX="right";break;case 6:default:style.backgroundPositionX="center"}switch(globalStyle.bgLayoutVertical||6){case 3:style.backgroundRepeat="repeat-y";break;case 4:style.backgroundSize="auto 100%";break;case 8:style.backgroundPositionY="top";break;case 9:style.backgroundPositionY="bottom";break;case 6:default:style.backgroundPositionY="center"}globalStyle.bgLayoutHorizontal===globalStyle.bgLayoutVertical&&(3===globalStyle.bgLayoutVertical?style.backgroundRepeat="repeat":4===globalStyle.bgLayoutVertical&&(style.backgroundSize="cover"));var _bgNewLayer=!1;_MGDebugger2["default"].log("---> mode",_mode,isMobile),!isMobile||_mode!==MODE_FILLING&&_mode!==MODE_IRO&&_mode!==MODE_READONLY&&_mode!==MODE_FINISH_SUBMIT||(_bgNewLayer=!0),globalStyle.backgroundFixed||_bgNewLayer?(style.overflowY=isMobile?"scroll":"hidden",$submitForm.addClass("coverForm")):$submitForm.removeClass("coverForm"),style.backgroundSize&&!isMobile&&isIE8&&("cover"===style.backgroundSize||style.backgroundSize.indexOf("100%")>=0)&&(style.backgroundImage=null,style.backgroundSize=null,(0,_jquery2["default"])(".bg_ly").remove(),$form.before('<img class="bg_ly" src="'+globalStyle.background+'" width="100%" height="100%" style="position: absolute; left: 0; right: 0;top: 0;bottom: 0; z-index: 0;">')),_bgNewLayer?(0!==(0,_jquery2["default"])(".bg_ly").length&&(0,_jquery2["default"])(".bg_ly").remove(),$submitForm.before('<div class="bg_ly" style="position: fixed; left: 0; right: 0;top: 0;bottom: 0; z-index: -1;background-image:'+style.backgroundImage+";"+(style.backgroundSize?"background-size:"+style.backgroundSize+";":"")+"background-repeat:"+style.backgroundRepeat+"; background-position: "+style.backgroundPosition+";"+(style.backgroundPositionX?"background-position-x:"+style.backgroundPositionX+";":"")+(style.backgroundPositionY?"background-position-y:"+style.backgroundPositionY+";":"")+'transform: translate3d(0,0,-1px);overflow: scroll;"></div>'),style.backgroundImage=null,style.backgroundSize=null):(0,_jquery2["default"])(".bg_ly").remove()}if(isOpacityBackground)style.backgroundColor="transparent";else if(globalStyle.bgColor){var c=new _MGColor.OColor(globalStyle.bgColor);style.backgroundColor=c.getHEX()}var bodyContentStyle={};if(bodyStyle&&(bodyStyle.bgColor||null!=bodyStyle.bgOpacityValue&&1!==bodyStyle.bgOpacityValue)&&(bodyStyle.bgColor&&(bodyContentStyle.backgroundColor=bodyStyle.bgColor),1!==bodyStyle.bgOpacityValue)){var newColor=new _MGColor.OColor(bodyStyle.bgColor||"#ffffff");newColor.set("a",bodyStyle.bgOpacityValue),bodyContentStyle.zoom=1,isIE8?(bodyContentStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",bodyContentStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",bodyContentStyle.backgroundColor="transparent"):bodyContentStyle.backgroundColor=newColor.getRGBA()}_MGDebugger2["default"].log("decorator"),_MGDebugger2["default"].log(style,bodyContentStyle,$wrapper.data("hasSet"),$body.data("hasSet")),_lodash2["default"].isEmpty(style)||$wrapper.data("hasSet")||($wrapper.data("hasSet","1"),$wrapper.css(style)),_lodash2["default"].isEmpty(bodyContentStyle)||$body.data("hasSet")||($body.data("hasSet","1"),$body.css(bodyContentStyle)),globalStyle&&globalStyle.headerStyle&&0===globalStyle.headerStyle.bgOpacityValue&&bodyStyle&&0===bodyStyle.bgOpacityValue&&globalStyle.submitStyle&&0===globalStyle.submitStyle.bgOpacityValue&&$form.css({boxShadow:"0 0 0"})}function formRender(data){$form.trigger("viewRender",data)}function bindViewRender(){$form.bind("viewRender",function(e,isMobile,iframeSettings){decorateFormTheme(isMobile),decorateForm(isMobile,(iframeSettings||{}).opacityBg);var bgColor=void 0,drakBg=!1;if(bgColor=_form.utils.getStyle("bgColor")||null){var bgColorObject=_MGColor2["default"].convertToRGBObj.fromHex(bgColor);drakBg=_MGColor2["default"].colorGrayLevel(bgColorObject.r,bgColorObject.g,bgColorObject.b)<170}_form.header.render($form);var _JHR=_form.utils.JHR();if(0===_JHR||_mode!==MODE_FILLING&&_mode!==MODE_IRO&&_mode!==MODE_FINISH_SUBMIT)if(_mode===MODE_FINISH_SUBMIT){_form.utils.formInfoInit(),_setSubmitOnce();var _urlInfo=(0,_tools.parseURL)(location.href),_randomCode=decodeURIComponent(_urlInfo.params.rc||""),_link=decodeURIComponent(_urlInfo.params.rdu||""),_tkvCode=decodeURIComponent(_urlInfo.params.tkvc||""),_tkvQrUrl=decodeURIComponent(_urlInfo.params.tkvqr||"");_submitSucceed({link:_link,randomCode:_randomCode,ticketValidationCode:_tkvCode,ticketValidationQR:_tkvQrUrl}),_reactDom2["default"].unmountComponentAtNode($copyright[0]),_form.copyright.render($copyright,drakBg)}else{if(_form.utils.formInfoInit(),_mode!==MODE_READONLY&&_mode!==MODE_IRO){var _qrImg="images/form/form_shareQr.png";"cn"===window._SLD&&(_qrImg=location.protocol+_config2["default"].CDN_PATH_WITHOUT_PROTOCOL+"images/form/form_shareQr.png"),0===_form.utils.getSettings("isShowShare")||0!==(0,_jquery2["default"])(".f_shareBtn").length||isMobile||$form.append('<a class="f_shareBtn '+(drakBg?"f_shareLight":"")+'" title="'+_form.lang.sShareBtnTitle+'"><img src="'+_qrImg+'" ></a>')}if(_mode!==MODE_IRO||_isWcMask||(0,_jquery2["default"])("body").addClass("readOnly").prepend('<p class="form_globalTips">'+_form.lang.tFormViewTIps+"</p>"),_mode===MODE_FILLING){if(_cache)try{_form.utils.setDefaultValue(JSON.parse(_cache)),_form.formStore.setDefaultFillingData()}catch(e){_MGDebugger2["default"].error(e)}_form.formStore.setUvdData();var _dt=_form.utils.getParamsDt();if(_dt&&!_lodash2["default"].isEmpty(_dt)){var foc=_dt.foc,dt=_objectWithoutProperties(_dt,["foc"]);try{_form.utils.setDefaultValue(dt),_form.formStore.setDefaultFillingData(foc)}catch(e){_MGDebugger2["default"].error(e)}}_form.utils.hasAttachmentComponent()&&(isOldIE?$submitForm.attr({id:"submitWorker",action:SUBMIT,target:"submitFrame",method:"post"}).append('<iframe id="submitFrame" name="submitFrame" class="f_submitWorker"/>'):($submitForm.append('<input type="file" id="submitWorker" class="f_submitWorker"/>'),(0,_jquery2["default"])("#submitWorker").fileupload({dataType:"json",replaceFileInput:!0,multiple:!0,progressall:function(e,data){var progress=+(data.loaded/data.total*100);_form.formStore.dispatch({type:"savingForm",progress:progress})}})))}_form.formStore.setIpLoc(),_form.body.render($body),_reactDom2["default"].unmountComponentAtNode($submit[0]),_form.submit.render($submit),_reactDom2["default"].unmountComponentAtNode($copyright[0]),_form.copyright.render($copyright,drakBg),$window.trigger("$$stickyUpdate")}else _form.utils.formInfoInit(),_error(_JHR,isMobile),[-52,-801,-802,-888,-840,-841].indexOf(_JHR)===-1&&(_reactDom2["default"].unmountComponentAtNode($copyright[0]),_form.copyright.render($copyright,drakBg))}).on("paymentSucceed",_paid)}function cacheManager(setCache){var _FORM_CACHE_KEY=_form.utils.formCacheId(),formCache=void 0,submitOnceInfoCache=void 0,pageReferrerCache=void 0;_FORM_CACHE_KEY&&(formCache=_MGCache2["default"].get(_FORM_CACHE_KEY))?_MGCache2["default"].remove(_FORM_CACHE_KEY):formCache=null,(submitOnceInfoCache=_MGCache2["default"].get(_SUBMIT_ONCE_KEY))?!function(){submitOnceInfoCache=JSON.parse(submitOnceInfoCache),_MGDebugger2["default"].log(submitOnceInfoCache);var _newList={},_currentTime=(new Date).getTime();_lodash2["default"].forEach(submitOnceInfoCache,function(info,key){_currentTime-info<=0&&(_newList[key]=info)}),submitOnceInfoCache=_newList,_MGCache2["default"].set(_SUBMIT_ONCE_KEY,JSON.stringify(submitOnceInfoCache))}():submitOnceInfoCache={},(pageReferrerCache=_MGCache2["default"].get(_FORM_PAGE_REFERRER_KEY))?_MGCache2["default"].remove(_FORM_PAGE_REFERRER_KEY):pageReferrerCache=null,updateCache=function(data){_MGCache2["default"].set(_form.utils.formCacheId(),data)},updateSubmitOnceCache=function(data){_MGCache2["default"].set(_FORM_PAGE_REFERRER_KEY,data)};var saveFormCache=setCache(updateCache);return window.onbeforeunload=saveFormCache,"onpagehide"in window&&(window.inIOSCache=!0,window.onpagehide=saveFormCache,window.addEventListener("pagehide",function(){saveFormCache()},!1),window.addEventListener("blur",function(){saveFormCache()},!1),window.onunload=saveFormCache),"onpageshow"in window&&(window.onpageshow=function(){_saving||(_processed=!1,_saving=!1,_needSave=!0)}),$window.on("triggerSaveCache",saveFormCache),{formCache:formCache,submitOnceInfoCache:submitOnceInfoCache,pageReferrerCache:pageReferrerCache}}function __PRI_MK_GET_DT(){var res=_form.formStore.getState(),cacheFillingInfo=_form.utils.getCacheFilling(res.data),_dtInfo={};return _lodash2["default"].forEach(cacheFillingInfo,function(d,k){d&&!_lodash2["default"].isEmpty(d)&&(_dtInfo[k]=d)}),JSON.stringify(_dtInfo)}function getFormContent(){return{$scrollContainer:$scrollContainer,$window:$window,$container:$container,$wrapper:$wrapper,$form:$form,$body:$body,$submit:$submit,$copyright:$copyright,$submitForm:$submitForm}}function updateContentBinder(content){$scrollContainer=content.$scrollContainer,$window=content.$window,$container=content.$container,$wrapper=content.$wrapper,$form=content.$form,$body=content.$body,$submit=content.$submit,$copyright=content.$copyright,$submitForm=content.$submitForm}function initMain(injection){function _init(doc){_doc=doc,_mode=injection.setPageMode(),_hasError=0!==_form.utils.JHR(),_hasError&&_form.utils.JHR()===-840&&(_mode=MODE_FILLING),_form.utils.setAsRaw(injection.setRawInfo(),_mode),_IS_IRO&&(_mode=MODE_IRO),_MGDebugger2["default"].log(_mode);var content=injection.contentBinder(_form.utils);if(updateContentBinder(content),$form.show(),_mode===MODE_FILLING&&!function(){var _cacheManager=cacheManager(_setFormFillCache),formCache=_cacheManager.formCache,submitOnceInfoCache=_cacheManager.submitOnceInfoCache,pageReferrerCache=_cacheManager.pageReferrerCache;_cache=formCache,_submitOnceList=submitOnceInfoCache||{};var _testList=_lodash2["default"].assign({},_submitOnceList),_cookieBanned=((0,_tools.getCookie)(_SUBMIT_ONCE_KEY.toLowerCase())||"").split(",");_cookieBanned&&_lodash2["default"].forEach(_cookieBanned,function(_token){_token&&!_testList[_token]&&(_testList[_token]=1)}),_form.utils.getSettings("isOnlySubmit")&&_testList[_form.utils.token()]&&(_hasError=!0,_form.utils.updateRawInfo("JHR",-827)),pageReferrerCache&&_form.utils.setCacheReferrer(pageReferrerCache),!_form.utils.getSettings("isOnlyWeChat")||window.IN_WECHAT&&window.WC_JSAPI_PARAMS||(_isWcMask=!0,_mode=MODE_IRO,wechatOnlyMask()),_form.utils.convertExtensions();var _checkInInfo=_form.formExtends.getCheckIn();window.IN_WECHAT&&window.WC_JSAPI_PARAMS&&!_form.utils.getVstWcState()&&_checkInInfo.isCheckIn&&_checkInInfo.info.ckiWeChat&&formCheckInWechatAuthMask(),injection.setMessageIframe(function(){_form.formStore.dispatch({type:"$$messenger"}),_topFrameSettings=injection.getPostSettings(),formRender([injection.isMobile(),_topFrameSettings])})}(),_mode===MODE_FILLING||_mode===MODE_IRO||_mode===MODE_FINISH_SUBMIT)try{injection.setWechat()}catch(e){}bindEvent(),bindViewRender(),formRender([injection.isMobile(),injection.getPostSettings()]),injection.eventBind(),$window.trigger("triggerSaveCache")}global.MKIsMobile=injection.isMobile;var _injectData={isMobile:injection.isMobile,getCurrentWidth:injection.getCurrentWidth,getMode:getFormCurrentMode},_bodyInject=_lodash2["default"].assign({getContent:getFormContent},_injectData);return _form.formStore.inject(_lodash2["default"].assign({updateRawInfo:injection.updateRawInfo,setRawInfo:injection.setRawInfo,getContent:getFormContent,getPostSettings:injection.getPostSettings},_injectData)),_form.header.inject(_injectData),_form.body.inject(_bodyInject),_form.submit.inject(_bodyInject),_form.copyright.inject(_injectData),_form.utils.init(),_isMobile=injection.isMobile(),{init:_init,dmwCheck:_form.formStore.checkDMW,isMobile:injection.isMobile(),updateContentBinder:updateContentBinder,__PRI_MK_GET_DT:__PRI_MK_GET_DT}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lodash=__webpack_require__(8),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(22),_jquery2=_interopRequireDefault(_jquery),_react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(23),_reactDom2=_interopRequireDefault(_reactDom),_MGCache=__webpack_require__(24),_MGCache2=_interopRequireDefault(_MGCache),_form=__webpack_require__(138),_SucceedReturn=__webpack_require__(150),_SucceedReturn2=_interopRequireDefault(_SucceedReturn),_MGWsUtil=__webpack_require__(25),_MGWsUtil2=_interopRequireDefault(_MGWsUtil),_tools=__webpack_require__(33),_MGMoment=__webpack_require__(34),_MGMoment2=_interopRequireDefault(_MGMoment),_MGDebugger=__webpack_require__(32),_MGDebugger2=_interopRequireDefault(_MGDebugger),_config=__webpack_require__(6),_config2=_interopRequireDefault(_config),_MGString=__webpack_require__(29),_MGColor=(_interopRequireDefault(_MGString),__webpack_require__(50)),_MGColor2=_interopRequireDefault(_MGColor);__webpack_require__(76),__webpack_require__(77),__webpack_require__(78),__webpack_require__(79);var isIE8=_form.utils.isIE8,isOldIE=_form.utils.isOldIE,_IS_IRO=_form.utils._IS_IRO,_DOMAIN="mikecrm.com";global.jQuery=global.$=_jquery2["default"];var ws={ajax:_MGWsUtil2["default"].ajax,post:function(url,options){var _default={url:url,type:"POST",dataType:"json"};return _MGWsUtil2["default"].ajax(_jquery2["default"].extend({mode:"abort"},options,_default))},abort:_MGWsUtil2["default"].abort},MODE_UNKNOW=-1,MODE_FILLING=1,MODE_PREVIEW=2,MODE_READONLY=3,MODE_IRO=4,MODE_FINISH_SUBMIT=5,_mode=MODE_UNKNOW,_hasError=!1,_needSave=!0,$form=void 0,$body=void 0,$submit=void 0,$copyright=void 0,$wrapper=void 0,$container=void 0,$scrollContainer=void 0,$submitForm=void 0,$window=void 0,_isMobile=void 0,_topFrameSettings=void 0,_doc=null,_RUNTIME="handler/web/form_runtime/",SUBMIT=_RUNTIME+"handleSubmit.php",RE_GET_QRCODE=_RUNTIME+"handleGenQr.php",_saving=!1,_processed=!1,_aria=!1,_savedData=null,_REDUCE_JUMP_SEC=3,_finExtData={},resizeTrigger=_lodash2["default"].debounce(function(){$form.trigger("$$resize"),_form.formStore.dispatch({type:"$$resize"})},200),_SUBMIT_ONCE_KEY="MKSO",_FORM_PAGE_REFERRER_KEY="MKFPR",_cache=null,_submitOnceList={},updateCache=null,updateSubmitOnceCache=null,_isWcMask=!1;exports["default"]=initMain,module.exports=exports["default"]}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=__webpack_require__(14),_react2=_interopRequireDefault(_react),_config=__webpack_require__(9),_MGColor=__webpack_require__(50),_utils=__webpack_require__(30),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(33),isWx=(_interopRequireDefault(_tools),/micromessenger/i.test(window.navigator.userAgent));exports["default"]=_react2["default"].createClass({displayName:"SucceedReturn.react",_getHrefUrl:function(){var link="",settings=_utils2["default"].getSettings();if("2"==settings.asButtonLinkType&&settings.asButtonLink)link=settings.asButtonLink;else{var _search="";if(isWx){var hash=+new Date;_search=location.pathname!==_utils2["default"].token()?"?wechat_hash="+hash:/wechat_hash/.test(location.search)?location.search.replace(/wechat_hash=\d+(&?)/,"wechat_hash="+hash+"$1"):""==location.search?"?wechat_hash="+hash:location.search+"&wechat_hash="+hash}window._SST&&(_search+=_search?"&":"?",_search+="sst="+window._SST),link=location.origin+"/"+_utils2["default"].token()+_search}return link},render:function(){var style=_utils2["default"].getStyle(),settings=_utils2["default"].getSettings(),isMobile=this.props.isMobile,submitStyle=style.submitStyle||{},alignArray=["","left","center","right"],submitFieldStyle={textAlign:alignArray[submitStyle.btnAlign||2]};if(submitStyle.bgColor&&(submitFieldStyle.backgroundColor=submitStyle.bgColor),null!=submitStyle.bgOpacity&&1!==submitStyle.bgOpacityValue){var newColor=new _MGColor.OColor(submitStyle.bgColor||"#ffffff");newColor.set("a",submitStyle.bgOpacityValue),submitFieldStyle.backgroundColor=newColor.getRGBA(),submitFieldStyle.zoom=1,_utils.isIE8&&(submitFieldStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",submitFieldStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",submitFieldStyle.backgroundColor="transparent")}if(submitStyle.background){submitFieldStyle.backgroundImage="url("+submitStyle.background+")",submitFieldStyle.backgroundPosition="center center",submitFieldStyle.backgroundRepeat="no-repeat";var bglH=submitStyle.bgLayoutHorizontal||6,bglV=submitStyle.bgLayoutVertical||6;
switch(bglH){case 3:submitFieldStyle.backgroundRepeat="repeat-x";break;case 4:submitFieldStyle.backgroundSize="100% auto";break;case 5:submitFieldStyle.backgroundPositionX="left";break;case 7:submitFieldStyle.backgroundPositionX="right";break;case 6:default:submitFieldStyle.backgroundPositionX="center"}switch(bglV){case 3:submitFieldStyle.backgroundRepeat="repeat-y";break;case 4:submitFieldStyle.backgroundSize="auto 100%";break;case 8:submitFieldStyle.backgroundPositionY="top";break;case 9:submitFieldStyle.backgroundPositionY="bottom";break;case 6:default:submitFieldStyle.backgroundPositionY="center"}3==bglH&&3==bglV&&(submitFieldStyle.backgroundRepeat="repeat"),4==bglH&&4==bglV&&(submitFieldStyle.backgroundSize="cover")}var submitBtnStyle={width:"1"==submitStyle.isFormWith||this.props.isMobile?"100%":"auto",height:Math.floor(2.2*(submitStyle.submitFontSize||14))+(isMobile?6:0),paddingTop:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingBottom:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingLeft:(submitStyle.submitFontSize||14)+6,paddingRight:(submitStyle.submitFontSize||14)+6,fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,background:submitStyle.btnColor};return _react2["default"].createElement("div",{className:"submit",style:submitFieldStyle},_react2["default"].createElement("a",{className:"fb_submitBtn",style:submitBtnStyle,href:this._getHrefUrl()},"asButtonText"in settings?settings.asButtonText||"":_config.lang.gGoBack))}}),module.exports=exports["default"]}]);